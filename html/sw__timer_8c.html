<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>sw_timer.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_6aeebb853ebd8c514e6186653c592c82.html">otzone</a></li><li class="navelem"><a class="el" href="dir_fb44076c8b62c63869cf8a830933e50d.html">src</a></li><li class="navelem"><a class="el" href="dir_ae72a19de923b7f4b595b906221fc8f6.html">core</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">sw_timer.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="sw__types_8h_source.html">sw_types.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="sw__list_8h_source.html">sw_list.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="sw__timer_8h_source.html">sw_timer.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="global_8h_source.html">global.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="task_8h_source.html">task.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="sw__buddy_8h_source.html">sw_buddy.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="sw__debug_8h_source.html">sw_debug.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="sw__mem__functions_8h_source.html">sw_mem_functions.h</a>&gt;</code><br/>
</div>
<p><a href="sw__timer_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a15567cc380a5e1b8431dba4f27c08507"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sw__timer_8c.html#a15567cc380a5e1b8431dba4f27c08507">SW_FREE_RUNNING_CNTR</a>&#160;&#160;&#160;<a class="el" href="structtimer__cpu__info.html#aa974e9f8fcb63cfd61f3f47f0e08f033">timer_cpu_info.free_run_clock_id</a></td></tr>
<tr class="separator:a15567cc380a5e1b8431dba4f27c08507"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8672374dcfaf2638029c194d6a89824c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sw__timer_8c.html#a8672374dcfaf2638029c194d6a89824c">SW_TICKTIMER</a>&#160;&#160;&#160;<a class="el" href="structtimer__cpu__info.html#a6a2bec36e28f276b88ea52faa377f31b">timer_cpu_info.tick_timer_id</a></td></tr>
<tr class="separator:a8672374dcfaf2638029c194d6a89824c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9e58ddfe9637a6c6f7d1b636fb741904"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sw__timer_8c.html#a9e58ddfe9637a6c6f7d1b636fb741904">init_sw_timer</a> (void)</td></tr>
<tr class="memdesc:a9e58ddfe9637a6c6f7d1b636fb741904"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function initializes the Timer structure variables.  <a href="#a9e58ddfe9637a6c6f7d1b636fb741904">More...</a><br/></td></tr>
<tr class="separator:a9e58ddfe9637a6c6f7d1b636fb741904"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80a9cef76712fd40db49dba06813eb3f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sw__timer_8c.html#a80a9cef76712fd40db49dba06813eb3f">timeval_after</a> (const <a class="el" href="uniontimeval__t.html">timeval_t</a> *value1, const <a class="el" href="uniontimeval__t.html">timeval_t</a> *value2)</td></tr>
<tr class="memdesc:a80a9cef76712fd40db49dba06813eb3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether value 1 comes after value2 If yes returns 1 else returns 0.  <a href="#a80a9cef76712fd40db49dba06813eb3f">More...</a><br/></td></tr>
<tr class="separator:a80a9cef76712fd40db49dba06813eb3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bef445ffa8cb61c179fcd5f70d4e2df"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sw__timer_8c.html#a2bef445ffa8cb61c179fcd5f70d4e2df">timeval_before</a> (const <a class="el" href="uniontimeval__t.html">timeval_t</a> *value1, const <a class="el" href="uniontimeval__t.html">timeval_t</a> *value2)</td></tr>
<tr class="memdesc:a2bef445ffa8cb61c179fcd5f70d4e2df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether value 1 comes before value2 If yes returns 1 else returns 0.  <a href="#a2bef445ffa8cb61c179fcd5f70d4e2df">More...</a><br/></td></tr>
<tr class="separator:a2bef445ffa8cb61c179fcd5f70d4e2df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13c8fa1f0e26c42abddfcda14bdb07b6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sw__timer_8c.html#a13c8fa1f0e26c42abddfcda14bdb07b6">__free_running_cntr_intr</a> (void)</td></tr>
<tr class="memdesc:a13c8fa1f0e26c42abddfcda14bdb07b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function updates the timestamp This function is called only when the free running counter interrupt is generated.(When free running counter reaches zero this interrupt arises and after that the counter reload itself to the max value(mostly 0xFFFFFFFF) and continue to count down)  <a href="#a13c8fa1f0e26c42abddfcda14bdb07b6">More...</a><br/></td></tr>
<tr class="separator:a13c8fa1f0e26c42abddfcda14bdb07b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26ea71463f065aaa1db5e341990adc7d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sw__types_8h.html#ad758b7a5c3f18ed79d2fcd23d9f16357">u64</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sw__timer_8c.html#a26ea71463f065aaa1db5e341990adc7d">read_timestamp</a> (void)</td></tr>
<tr class="memdesc:a26ea71463f065aaa1db5e341990adc7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">It updates and returns the current timestamp value.  <a href="#a26ea71463f065aaa1db5e341990adc7d">More...</a><br/></td></tr>
<tr class="separator:a26ea71463f065aaa1db5e341990adc7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37105580638257400682808d9dd0d684"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structtimer__event.html">timer_event</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sw__timer_8c.html#a37105580638257400682808d9dd0d684">timer_event_create</a> (<a class="el" href="sw__timer_8h.html#af2a1579b25ee1ac4bddd632dff9276a4">sw_timer_event_handler</a> handler, void *priv_data)</td></tr>
<tr class="memdesc:a37105580638257400682808d9dd0d684"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is called to create a new timer event. It allocates the memory for timer event struct, initializes the elements and returns the structure. If it cannot allocate the memory then it returns NULL.  <a href="#a37105580638257400682808d9dd0d684">More...</a><br/></td></tr>
<tr class="separator:a37105580638257400682808d9dd0d684"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0060dc3f865566f66c7a445533afb847"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sw__timer_8c.html#a0060dc3f865566f66c7a445533afb847">timer_event_destroy</a> (struct <a class="el" href="structtimer__event.html">timer_event</a> *tevent)</td></tr>
<tr class="memdesc:a0060dc3f865566f66c7a445533afb847"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function deletes the timer event structure After expiration of the timer ,the application can choose to keep and reuse the same structure again or delete it.If it decides to delete the structure then this function is called. This function frees the memory.  <a href="#a0060dc3f865566f66c7a445533afb847">More...</a><br/></td></tr>
<tr class="separator:a0060dc3f865566f66c7a445533afb847"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9578a02129a7b5c79e395fe76d4562c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sw__timer_8c.html#ae9578a02129a7b5c79e395fe76d4562c">timer_event_start</a> (struct <a class="el" href="structtimer__event.html">timer_event</a> *tevent, <a class="el" href="uniontimeval__t.html">timeval_t</a> *time)</td></tr>
<tr class="memdesc:ae9578a02129a7b5c79e395fe76d4562c"><td class="mdescLeft">&#160;</td><td class="mdescRight">It starts the timer event by calling the appropriate functions The time interval is written to the hardwire timer and the event is added to the list of events to be handled on timer expiry.  <a href="#ae9578a02129a7b5c79e395fe76d4562c">More...</a><br/></td></tr>
<tr class="separator:ae9578a02129a7b5c79e395fe76d4562c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ac98981aa3fa8b3464dd10584116865"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sw__timer_8c.html#a3ac98981aa3fa8b3464dd10584116865">timer_interrupt</a> (void)</td></tr>
<tr class="memdesc:a3ac98981aa3fa8b3464dd10584116865"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the function which is called on expiry of any timer event. This fn goes through the list of registered timer events. If the expiry time of the event is already in the past then the corresponding handler function is called. As the list is already sorted according to their time of expiration, the function returns either when it encounters the first event whose expiry time is in the future or when the list becomes empty.  <a href="#a3ac98981aa3fa8b3464dd10584116865">More...</a><br/></td></tr>
<tr class="separator:a3ac98981aa3fa8b3464dd10584116865"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee258028608dc57e3cf1b12e04d10624"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sw__timer_8c.html#aee258028608dc57e3cf1b12e04d10624">is_timer_event_active</a> (struct <a class="el" href="structtimer__event.html">timer_event</a> *tevent)</td></tr>
<tr class="memdesc:aee258028608dc57e3cf1b12e04d10624"><td class="mdescLeft">&#160;</td><td class="mdescRight">checks whether the timer event is active  <a href="#aee258028608dc57e3cf1b12e04d10624">More...</a><br/></td></tr>
<tr class="separator:aee258028608dc57e3cf1b12e04d10624"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4325e305edc1bdb585dc2785675f5b8f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sw__timer_8c.html#a4325e305edc1bdb585dc2785675f5b8f">is_timer_event_waiting_on_callback</a> (struct <a class="el" href="structtimer__event.html">timer_event</a> *tevent)</td></tr>
<tr class="memdesc:a4325e305edc1bdb585dc2785675f5b8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">checks whether the timer event is waiting in callback mode  <a href="#a4325e305edc1bdb585dc2785675f5b8f">More...</a><br/></td></tr>
<tr class="separator:a4325e305edc1bdb585dc2785675f5b8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78d85b1d9026b8c3735115d2d7330590"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sw__timer_8c.html#a78d85b1d9026b8c3735115d2d7330590">timer_event_stop</a> (struct <a class="el" href="structtimer__event.html">timer_event</a> *tevent)</td></tr>
<tr class="memdesc:a78d85b1d9026b8c3735115d2d7330590"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops a <a class="el" href="structtimer__event.html">timer_event</a>.  <a href="#a78d85b1d9026b8c3735115d2d7330590">More...</a><br/></td></tr>
<tr class="separator:a78d85b1d9026b8c3735115d2d7330590"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a0c89d2e15ec3253dc8b4c3da918aa080"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structtimer__cpu__info.html">timer_cpu_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sw__timer_8c.html#a0c89d2e15ec3253dc8b4c3da918aa080">timer_cpu_info</a></td></tr>
<tr class="separator:a0c89d2e15ec3253dc8b4c3da918aa080"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a15567cc380a5e1b8431dba4f27c08507"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SW_FREE_RUNNING_CNTR&#160;&#160;&#160;<a class="el" href="structtimer__cpu__info.html#aa974e9f8fcb63cfd61f3f47f0e08f033">timer_cpu_info.free_run_clock_id</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a8672374dcfaf2638029c194d6a89824c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SW_TICKTIMER&#160;&#160;&#160;<a class="el" href="structtimer__cpu__info.html#a6a2bec36e28f276b88ea52faa377f31b">timer_cpu_info.tick_timer_id</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a13c8fa1f0e26c42abddfcda14bdb07b6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __free_running_cntr_intr </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function updates the timestamp This function is called only when the free running counter interrupt is generated.(When free running counter reaches zero this interrupt arises and after that the counter reload itself to the max value(mostly 0xFFFFFFFF) and continue to count down) </p>
<p>Otherwise the timestamp is updated by read_timestamp function </p>

<p>Definition at line <a class="el" href="sw__timer_8c_source.html#l00280">280</a> of file <a class="el" href="sw__timer_8c_source.html">sw_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;{</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <a class="code" href="sw__types_8h.html#ad758b7a5c3f18ed79d2fcd23d9f16357">u64</a> tmp_cycles;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <a class="code" href="uniontimeval__t.html">timeval_t</a> tmp_timeval;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    sw_timer_info.cycles_count_new = <a class="code" href="sw__board_8h.html#a5fa8edeaaac08a1c8c927cde7ead26de">TIMER_COUNT_MAX</a>;   </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    tmp_cycles = sw_timer_info.cycles_count_new - </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                                    sw_timer_info.cycles_count_old;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    sw_timer_info.abs_cycles_count += tmp_cycles;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    sw_timer_info.cycles_count_old = 0;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    tmp_timeval.<a class="code" href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">tval64</a> = <a class="code" href="cpu__api_8c.html#a1c97425d04c5c0494e087de87bf2c18c">clockcycles_to_timeval</a>(tmp_cycles);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    sw_timer_info.sw_timestamp.tval64 = timeval_add(&amp;sw_timer_info.sw_timestamp,</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                                                                &amp;tmp_timeval);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;}</div>
<div class="ttc" id="uniontimeval__t_html"><div class="ttname"><a href="uniontimeval__t.html">timeval_t</a></div><div class="ttdoc">Structure to represent the time in High resolution format( Resolution in Nano seconds) ...</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00053">sw_timer.h:53</a></div></div>
<div class="ttc" id="cpu__api_8c_html_a1c97425d04c5c0494e087de87bf2c18c"><div class="ttname"><a href="cpu__api_8c.html#a1c97425d04c5c0494e087de87bf2c18c">clockcycles_to_timeval</a></div><div class="ttdeci">u64 clockcycles_to_timeval(u32 clockcycles)</div><div class="ttdoc">This function converts the clockcycles to time in seconds and nanoseconds This function definition de...</div><div class="ttdef"><b>Definition:</b> <a href="cpu__api_8c_source.html#l00111">cpu_api.c:111</a></div></div>
<div class="ttc" id="uniontimeval__t_html_ad2bd856b9918d0953976ccb75ba2cbe2"><div class="ttname"><a href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">timeval_t::tval64</a></div><div class="ttdeci">s64 tval64</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00054">sw_timer.h:54</a></div></div>
<div class="ttc" id="sw__board_8h_html_a5fa8edeaaac08a1c8c927cde7ead26de"><div class="ttname"><a href="sw__board_8h.html#a5fa8edeaaac08a1c8c927cde7ead26de">TIMER_COUNT_MAX</a></div><div class="ttdeci">#define TIMER_COUNT_MAX</div><div class="ttdef"><b>Definition:</b> <a href="sw__board_8h_source.html#l00071">sw_board.h:71</a></div></div>
<div class="ttc" id="sw__types_8h_html_ad758b7a5c3f18ed79d2fcd23d9f16357"><div class="ttname"><a href="sw__types_8h.html#ad758b7a5c3f18ed79d2fcd23d9f16357">u64</a></div><div class="ttdeci">unsigned long long u64</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00062">sw_types.h:62</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9e58ddfe9637a6c6f7d1b636fb741904"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_sw_timer </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function initializes the Timer structure variables. </p>

<p>Definition at line <a class="el" href="sw__timer_8c_source.html#l00062">62</a> of file <a class="el" href="sw__timer_8c_source.html">sw_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;{</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="comment">/* TODO :Later, this function should be made to read values</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">     * from Device Tree */</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordtype">int</span> iter;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <a class="code" href="structtimer__cpu__info.html">timer_cpu_info</a>.<a class="code" href="structtimer__cpu__info.html#aa79880aaf690b1462cd9dc48d196079d">expires_next</a>.<a class="code" href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">tval64</a> = <a class="code" href="sw__timer_8h.html#a35b2fd1a5f6b88bf3842ba3663e6f85e">TIMEVAL_MAX</a>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <a class="code" href="sw__list_8h.html#a0ffe9d28c36d7b018a9cfae33bae45c0">INIT_LIST_HEAD</a>(&amp;<a class="code" href="structtimer__cpu__info.html">timer_cpu_info</a>.<a class="code" href="structtimer__cpu__info.html#a247df8c592cc7f8766d4856b134dc0b3">pending_routines</a>);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="structtimer__cpu__info.html">timer_cpu_info</a>.<a class="code" href="structtimer__cpu__info.html#a9906377953463856f7602c0837ad1e51">num_events</a> = 0;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordflow">for</span>(iter = 0; iter &lt; <a class="code" href="sw__timer_8h.html#a929f3a2522dbb7c737b5cd2493760af6">MAX_NUM_OF_TIMERS</a>; iter++)</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <a class="code" href="structtimer__cpu__info.html">timer_cpu_info</a>.<a class="code" href="structtimer__cpu__info.html#ac4ab45439b1a9387b3813053907dbc05">clock_info</a>[iter].<a class="code" href="structtimer__clock__info.html#a5625d6bd91d526ee959b8544b157af83">cpu_info</a> = &amp;<a class="code" href="sw__timer_8c.html#a0c89d2e15ec3253dc8b4c3da918aa080">timer_cpu_info</a>;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <a class="code" href="structtimer__cpu__info.html">timer_cpu_info</a>.<a class="code" href="structtimer__cpu__info.html#ac4ab45439b1a9387b3813053907dbc05">clock_info</a>[iter].<a class="code" href="structtimer__clock__info.html#a3073cfbb525a7ad406a8fbd49b0757b0">clock_id</a> = iter;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <a class="code" href="sw__list_8h.html#a0ffe9d28c36d7b018a9cfae33bae45c0">INIT_LIST_HEAD</a>(&amp;<a class="code" href="structtimer__cpu__info.html">timer_cpu_info</a>.<a class="code" href="structtimer__cpu__info.html#ac4ab45439b1a9387b3813053907dbc05">clock_info</a>[iter].<a class="code" href="structtimer__clock__info.html#a297fe3a0fc7efdc467d0b534bd5c8aae">active</a>);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <a class="code" href="sw__semaphores_8h.html#a3e2192a82f8890c9fc1c37866a6973bb">INIT_SPIN_LOCK</a>(&amp;<a class="code" href="structtimer__cpu__info.html">timer_cpu_info</a>.<a class="code" href="structtimer__cpu__info.html#ac4ab45439b1a9387b3813053907dbc05">clock_info</a>[iter].<a class="code" href="structtimer__clock__info.html#ab36d9db5095d55de592fbf79fbabddb4">spin_lock</a>);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <a class="code" href="structtimer__cpu__info.html">timer_cpu_info</a>.<a class="code" href="structtimer__cpu__info.html#ac4ab45439b1a9387b3813053907dbc05">clock_info</a>[iter].<a class="code" href="structtimer__clock__info.html#aa9f75d46f84066afd21744a215b15a2d">clock_period</a>.<a class="code" href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">tval64</a> = </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                                                        <a class="code" href="global_8h.html#a1d1a50120ee870d594c772846ae7b638">get_clock_period</a>();</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <a class="code" href="structtimer__cpu__info.html">timer_cpu_info</a>.<a class="code" href="structtimer__cpu__info.html#ac4ab45439b1a9387b3813053907dbc05">clock_info</a>[iter].<a class="code" href="structtimer__clock__info.html#a8bcf44bc681e9e02122416aaa831fd9c">timer_period</a>.<a class="code" href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">tval64</a> = </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                                                        <a class="code" href="global_8h.html#a92ae44371c8f02cda079839316bb120e">get_timer_period</a>();</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    }</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="comment">/* TODO :Later this should be made to obtain from Device Tree */</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="structtimer__cpu__info.html">timer_cpu_info</a>.<a class="code" href="structtimer__cpu__info.html#aa974e9f8fcb63cfd61f3f47f0e08f033">free_run_clock_id</a> = 0;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="structtimer__cpu__info.html">timer_cpu_info</a>.<a class="code" href="structtimer__cpu__info.html#a6a2bec36e28f276b88ea52faa377f31b">tick_timer_id</a> = 1;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="preprocessor">#define SW_FREE_RUNNING_CNTR    timer_cpu_info.free_run_clock_id</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define SW_TICKTIMER            timer_cpu_info.tick_timer_id</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    sw_timer_info.sw_timestamp.tval64 = 0;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    sw_timer_info.abs_cycles_count = 0;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    sw_timer_info.cycles_count_new = 0;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    sw_timer_info.cycles_count_old = 0;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    sw_timer_info.timer_period.tval64 = <a class="code" href="global_8h.html#a92ae44371c8f02cda079839316bb120e">get_timer_period</a>();</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    sw_timer_info.clock_period.tval64 = <a class="code" href="global_8h.html#a1d1a50120ee870d594c772846ae7b638">get_clock_period</a>();</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;}</div>
<div class="ttc" id="structtimer__clock__info_html_a297fe3a0fc7efdc467d0b534bd5c8aae"><div class="ttname"><a href="structtimer__clock__info.html#a297fe3a0fc7efdc467d0b534bd5c8aae">timer_clock_info::active</a></div><div class="ttdeci">struct list active</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00089">sw_timer.h:89</a></div></div>
<div class="ttc" id="structtimer__clock__info_html_ab36d9db5095d55de592fbf79fbabddb4"><div class="ttname"><a href="structtimer__clock__info.html#ab36d9db5095d55de592fbf79fbabddb4">timer_clock_info::spin_lock</a></div><div class="ttdeci">struct spinlock spin_lock</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00088">sw_timer.h:88</a></div></div>
<div class="ttc" id="sw__timer_8c_html_a0c89d2e15ec3253dc8b4c3da918aa080"><div class="ttname"><a href="sw__timer_8c.html#a0c89d2e15ec3253dc8b4c3da918aa080">timer_cpu_info</a></div><div class="ttdeci">struct timer_cpu_info timer_cpu_info</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8c_source.html#l00039">sw_timer.c:39</a></div></div>
<div class="ttc" id="structtimer__clock__info_html_a3073cfbb525a7ad406a8fbd49b0757b0"><div class="ttname"><a href="structtimer__clock__info.html#a3073cfbb525a7ad406a8fbd49b0757b0">timer_clock_info::clock_id</a></div><div class="ttdeci">int clock_id</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00086">sw_timer.h:86</a></div></div>
<div class="ttc" id="sw__semaphores_8h_html_a3e2192a82f8890c9fc1c37866a6973bb"><div class="ttname"><a href="sw__semaphores_8h.html#a3e2192a82f8890c9fc1c37866a6973bb">INIT_SPIN_LOCK</a></div><div class="ttdeci">#define INIT_SPIN_LOCK(s)</div><div class="ttdef"><b>Definition:</b> <a href="sw__semaphores_8h_source.html#l00043">sw_semaphores.h:43</a></div></div>
<div class="ttc" id="structtimer__cpu__info_html_aa974e9f8fcb63cfd61f3f47f0e08f033"><div class="ttname"><a href="structtimer__cpu__info.html#aa974e9f8fcb63cfd61f3f47f0e08f033">timer_cpu_info::free_run_clock_id</a></div><div class="ttdeci">int free_run_clock_id</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00106">sw_timer.h:106</a></div></div>
<div class="ttc" id="global_8h_html_a1d1a50120ee870d594c772846ae7b638"><div class="ttname"><a href="global_8h.html#a1d1a50120ee870d594c772846ae7b638">get_clock_period</a></div><div class="ttdeci">u64 get_clock_period(void)</div><div class="ttdoc">This function returns the resolution which can be obtained with the given clock. </div></div>
<div class="ttc" id="uniontimeval__t_html_ad2bd856b9918d0953976ccb75ba2cbe2"><div class="ttname"><a href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">timeval_t::tval64</a></div><div class="ttdeci">s64 tval64</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00054">sw_timer.h:54</a></div></div>
<div class="ttc" id="structtimer__cpu__info_html_aa79880aaf690b1462cd9dc48d196079d"><div class="ttname"><a href="structtimer__cpu__info.html#aa79880aaf690b1462cd9dc48d196079d">timer_cpu_info::expires_next</a></div><div class="ttdeci">timeval_t expires_next</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00103">sw_timer.h:103</a></div></div>
<div class="ttc" id="structtimer__clock__info_html_aa9f75d46f84066afd21744a215b15a2d"><div class="ttname"><a href="structtimer__clock__info.html#aa9f75d46f84066afd21744a215b15a2d">timer_clock_info::clock_period</a></div><div class="ttdeci">timeval_t clock_period</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00090">sw_timer.h:90</a></div></div>
<div class="ttc" id="sw__timer_8h_html_a35b2fd1a5f6b88bf3842ba3663e6f85e"><div class="ttname"><a href="sw__timer_8h.html#a35b2fd1a5f6b88bf3842ba3663e6f85e">TIMEVAL_MAX</a></div><div class="ttdeci">#define TIMEVAL_MAX</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00035">sw_timer.h:35</a></div></div>
<div class="ttc" id="structtimer__clock__info_html_a5625d6bd91d526ee959b8544b157af83"><div class="ttname"><a href="structtimer__clock__info.html#a5625d6bd91d526ee959b8544b157af83">timer_clock_info::cpu_info</a></div><div class="ttdeci">struct timer_cpu_info * cpu_info</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00085">sw_timer.h:85</a></div></div>
<div class="ttc" id="structtimer__cpu__info_html_ac4ab45439b1a9387b3813053907dbc05"><div class="ttname"><a href="structtimer__cpu__info.html#ac4ab45439b1a9387b3813053907dbc05">timer_cpu_info::clock_info</a></div><div class="ttdeci">struct timer_clock_info clock_info[MAX_NUM_OF_TIMERS]</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00101">sw_timer.h:101</a></div></div>
<div class="ttc" id="sw__timer_8h_html_a929f3a2522dbb7c737b5cd2493760af6"><div class="ttname"><a href="sw__timer_8h.html#a929f3a2522dbb7c737b5cd2493760af6">MAX_NUM_OF_TIMERS</a></div><div class="ttdeci">#define MAX_NUM_OF_TIMERS</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00036">sw_timer.h:36</a></div></div>
<div class="ttc" id="structtimer__cpu__info_html_a247df8c592cc7f8766d4856b134dc0b3"><div class="ttname"><a href="structtimer__cpu__info.html#a247df8c592cc7f8766d4856b134dc0b3">timer_cpu_info::pending_routines</a></div><div class="ttdeci">struct list pending_routines</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00104">sw_timer.h:104</a></div></div>
<div class="ttc" id="sw__list_8h_html_a0ffe9d28c36d7b018a9cfae33bae45c0"><div class="ttname"><a href="sw__list_8h.html#a0ffe9d28c36d7b018a9cfae33bae45c0">INIT_LIST_HEAD</a></div><div class="ttdeci">#define INIT_LIST_HEAD(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="sw__list_8h_source.html#l00040">sw_list.h:40</a></div></div>
<div class="ttc" id="structtimer__cpu__info_html"><div class="ttname"><a href="structtimer__cpu__info.html">timer_cpu_info</a></div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00100">sw_timer.h:100</a></div></div>
<div class="ttc" id="structtimer__clock__info_html_a8bcf44bc681e9e02122416aaa831fd9c"><div class="ttname"><a href="structtimer__clock__info.html#a8bcf44bc681e9e02122416aaa831fd9c">timer_clock_info::timer_period</a></div><div class="ttdeci">timeval_t timer_period</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00091">sw_timer.h:91</a></div></div>
<div class="ttc" id="structtimer__cpu__info_html_a6a2bec36e28f276b88ea52faa377f31b"><div class="ttname"><a href="structtimer__cpu__info.html#a6a2bec36e28f276b88ea52faa377f31b">timer_cpu_info::tick_timer_id</a></div><div class="ttdeci">int tick_timer_id</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00107">sw_timer.h:107</a></div></div>
<div class="ttc" id="structtimer__cpu__info_html_a9906377953463856f7602c0837ad1e51"><div class="ttname"><a href="structtimer__cpu__info.html#a9906377953463856f7602c0837ad1e51">timer_cpu_info::num_events</a></div><div class="ttdeci">unsigned long num_events</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00105">sw_timer.h:105</a></div></div>
<div class="ttc" id="global_8h_html_a92ae44371c8f02cda079839316bb120e"><div class="ttname"><a href="global_8h.html#a92ae44371c8f02cda079839316bb120e">get_timer_period</a></div><div class="ttdeci">u64 get_timer_period(void)</div><div class="ttdoc">This function returns the maximum time that can be kept track of before it gets expired. (Eg : The time taken for running from 0xFFFFFFFF to 0x00000000) </div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aee258028608dc57e3cf1b12e04d10624"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int is_timer_event_active </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtimer__event.html">timer_event</a> *&#160;</td>
          <td class="paramname"><em>tevent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>checks whether the timer event is active </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tevent</td><td>The timer event whose state need to be checked </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 - If active 0 - If not active </dd></dl>

<p>Definition at line <a class="el" href="sw__timer_8c_source.html#l00611">611</a> of file <a class="el" href="sw__timer_8c_source.html">sw_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;{</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="keywordflow">if</span>(!tevent)</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordflow">if</span>(tevent-&gt;<a class="code" href="structtimer__event.html#a0dab1a530fdd4a8af6a1979afac45614">state</a> &amp; <a class="code" href="sw__timer_8h.html#a9a3ee6fd61424b1eafc3b491bb0e1d07">TIMER_STATE_ACTIVE</a>)</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;}</div>
<div class="ttc" id="sw__timer_8h_html_a9a3ee6fd61424b1eafc3b491bb0e1d07"><div class="ttname"><a href="sw__timer_8h.html#a9a3ee6fd61424b1eafc3b491bb0e1d07">TIMER_STATE_ACTIVE</a></div><div class="ttdeci">#define TIMER_STATE_ACTIVE</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00041">sw_timer.h:41</a></div></div>
<div class="ttc" id="structtimer__event_html_a0dab1a530fdd4a8af6a1979afac45614"><div class="ttname"><a href="structtimer__event.html#a0dab1a530fdd4a8af6a1979afac45614">timer_event::state</a></div><div class="ttdeci">int state</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00123">sw_timer.h:123</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4325e305edc1bdb585dc2785675f5b8f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int is_timer_event_waiting_on_callback </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtimer__event.html">timer_event</a> *&#160;</td>
          <td class="paramname"><em>tevent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>checks whether the timer event is waiting in callback mode </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tevent</td><td>The timer event whose state need to be checked </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 - If it is waiting on callback 0 - If it is not waiting on callback </dd></dl>

<p>Definition at line <a class="el" href="sw__timer_8c_source.html#l00631">631</a> of file <a class="el" href="sw__timer_8c_source.html">sw_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;{</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keywordflow">if</span>(!tevent)</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="keywordflow">if</span> (tevent-&gt;<a class="code" href="structtimer__event.html#a0dab1a530fdd4a8af6a1979afac45614">state</a> &amp; <a class="code" href="sw__timer_8h.html#afb59caa6c3e7f02e7a6502395c5a1b9d">TIMER_STATE_PENDING</a>)</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="keywordflow">else</span> </div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;}</div>
<div class="ttc" id="structtimer__event_html_a0dab1a530fdd4a8af6a1979afac45614"><div class="ttname"><a href="structtimer__event.html#a0dab1a530fdd4a8af6a1979afac45614">timer_event::state</a></div><div class="ttdeci">int state</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00123">sw_timer.h:123</a></div></div>
<div class="ttc" id="sw__timer_8h_html_afb59caa6c3e7f02e7a6502395c5a1b9d"><div class="ttname"><a href="sw__timer_8h.html#afb59caa6c3e7f02e7a6502395c5a1b9d">TIMER_STATE_PENDING</a></div><div class="ttdeci">#define TIMER_STATE_PENDING</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00043">sw_timer.h:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a26ea71463f065aaa1db5e341990adc7d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sw__types_8h.html#ad758b7a5c3f18ed79d2fcd23d9f16357">u64</a> read_timestamp </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>It updates and returns the current timestamp value. </p>
<dl class="section return"><dt>Returns</dt><dd>The current timestamp value </dd></dl>

<p>Definition at line <a class="el" href="sw__timer_8c_source.html#l00304">304</a> of file <a class="el" href="sw__timer_8c_source.html">sw_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;{</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <a class="code" href="sw__types_8h.html#ad758b7a5c3f18ed79d2fcd23d9f16357">u64</a> tmp_cycles;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <a class="code" href="uniontimeval__t.html">timeval_t</a> tmp_timeval;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    sw_timer_info.cycles_count_new = <a class="code" href="global_8h.html#aeb41968f065556efd8259c71df12988f">read_freerunning_cntr</a>();</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    tmp_cycles = sw_timer_info.cycles_count_new - </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                                        sw_timer_info.cycles_count_old;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    sw_timer_info.abs_cycles_count += tmp_cycles;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    sw_timer_info.cycles_count_old = sw_timer_info.cycles_count_new;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    tmp_timeval.<a class="code" href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">tval64</a> = <a class="code" href="cpu__api_8c.html#a1c97425d04c5c0494e087de87bf2c18c">clockcycles_to_timeval</a>(tmp_cycles);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    sw_timer_info.sw_timestamp.tval64 = timeval_add(&amp;sw_timer_info.sw_timestamp,</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                                                                &amp;tmp_timeval);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="preprocessor">#ifdef TIMER_DBG</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="preprocessor"></span>    <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: Timestamp :  sec 0x%08x nsec 0x%08x \n&quot;</span>,</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            sw_timer_info.sw_timestamp.tval.sec,</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            sw_timer_info.sw_timestamp.tval.nsec);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">return</span> sw_timer_info.sw_timestamp.tval64;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;}</div>
<div class="ttc" id="uniontimeval__t_html"><div class="ttname"><a href="uniontimeval__t.html">timeval_t</a></div><div class="ttdoc">Structure to represent the time in High resolution format( Resolution in Nano seconds) ...</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00053">sw_timer.h:53</a></div></div>
<div class="ttc" id="global_8h_html_aeb41968f065556efd8259c71df12988f"><div class="ttname"><a href="global_8h.html#aeb41968f065556efd8259c71df12988f">read_freerunning_cntr</a></div><div class="ttdeci">u32 read_freerunning_cntr(void)</div><div class="ttdoc">It reads and returns the value of the timer which is used as the free running counter. </div></div>
<div class="ttc" id="cpu__api_8c_html_a1c97425d04c5c0494e087de87bf2c18c"><div class="ttname"><a href="cpu__api_8c.html#a1c97425d04c5c0494e087de87bf2c18c">clockcycles_to_timeval</a></div><div class="ttdeci">u64 clockcycles_to_timeval(u32 clockcycles)</div><div class="ttdoc">This function converts the clockcycles to time in seconds and nanoseconds This function definition de...</div><div class="ttdef"><b>Definition:</b> <a href="cpu__api_8c_source.html#l00111">cpu_api.c:111</a></div></div>
<div class="ttc" id="uniontimeval__t_html_ad2bd856b9918d0953976ccb75ba2cbe2"><div class="ttname"><a href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">timeval_t::tval64</a></div><div class="ttdeci">s64 tval64</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00054">sw_timer.h:54</a></div></div>
<div class="ttc" id="sw__types_8h_html_ad758b7a5c3f18ed79d2fcd23d9f16357"><div class="ttname"><a href="sw__types_8h.html#ad758b7a5c3f18ed79d2fcd23d9f16357">u64</a></div><div class="ttdeci">unsigned long long u64</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00062">sw_types.h:62</a></div></div>
<div class="ttc" id="sw__debug_8h_html_a501cc8c07cf94dc1a6269c0d3ba5a234"><div class="ttname"><a href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a></div><div class="ttdeci">u32 sw_printf(const char *fmt,...)</div><div class="ttdoc">Print Function. </div><div class="ttdef"><b>Definition:</b> <a href="sw__debug_8c_source.html#l00046">sw_debug.c:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a37105580638257400682808d9dd0d684"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structtimer__event.html">timer_event</a>* timer_event_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sw__timer_8h.html#af2a1579b25ee1ac4bddd632dff9276a4">sw_timer_event_handler</a>&#160;</td>
          <td class="paramname"><em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>priv_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is called to create a new timer event. It allocates the memory for timer event struct, initializes the elements and returns the structure. If it cannot allocate the memory then it returns NULL. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handler</td><td>The handler which will be called on the expiration of the timer </td></tr>
    <tr><td class="paramname">priv_data</td><td>The data which may be needed by the handler</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-The <a class="el" href="structtimer__event.html">timer_event</a> structure allocated and initialized -NULL if it fails to allocate the structure </dd></dl>

<p>Definition at line <a class="el" href="sw__timer_8c_source.html#l00344">344</a> of file <a class="el" href="sw__timer_8c_source.html">sw_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;{</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keyword">struct </span><a class="code" href="structtimer__event.html">timer_event</a>* new_event;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    new_event = (<span class="keyword">struct </span><a class="code" href="structtimer__event.html">timer_event</a>*)<a class="code" href="sw__buddy_8h.html#ae6f063fadf564f51c72ac39a83d9b550">sw_malloc_private</a>(<a class="code" href="sw__buddy_8h.html#aec6635083e97f6d7929adfe2179dabdc">COMMON_HEAP_ID</a>,</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                                                    <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structtimer__event.html">timer_event</a>));</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordflow">if</span>(!new_event){</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: Malloc failed in Creating New Timer event \n&quot;</span>);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <a class="code" href="sw__mem__functions_8h.html#a14af1b39b1154a36624740bad34b813f">sw_memset</a>( new_event, 0, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structtimer__event.html">timer_event</a>));</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;   </div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    new_event-&gt;<a class="code" href="structtimer__event.html#a01948743648ab6aa905c88718864d8e3">clk_info</a> = &amp;<a class="code" href="structtimer__cpu__info.html">timer_cpu_info</a>.<a class="code" href="structtimer__cpu__info.html#ac4ab45439b1a9387b3813053907dbc05">clock_info</a>[<a class="code" href="sw__timer_8c.html#a8672374dcfaf2638029c194d6a89824c">SW_TICKTIMER</a>];</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <a class="code" href="sw__list_8h.html#a0ffe9d28c36d7b018a9cfae33bae45c0">INIT_LIST_HEAD</a>(&amp;new_event-&gt;<a class="code" href="structtimer__event.html#afd05499da93e741a3b53da86d15c7a26">node</a>);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    new_event-&gt;<a class="code" href="structtimer__event.html#a255eb37843c82205acb811f7c999558f">handler</a> = (int (*)(<span class="keywordtype">void</span>*))<a class="code" href="structtimer__event.html#a255eb37843c82205acb811f7c999558f">handler</a>;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    new_event-&gt;<a class="code" href="structtimer__event.html#a485beddab325bc129d6f64ef095b42ba">expires</a>.<a class="code" href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">tval64</a> = <a class="code" href="sw__timer_8h.html#a35b2fd1a5f6b88bf3842ba3663e6f85e">TIMEVAL_MAX</a>;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    new_event-&gt;<a class="code" href="structtimer__event.html#a0dab1a530fdd4a8af6a1979afac45614">state</a> = <a class="code" href="sw__timer_8h.html#a1fe05d0f8f4b530c917954508864ef67">TIMER_STATE_INACTIVE</a>;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    new_event-&gt;<a class="code" href="structtimer__event.html#a0c0cd8e8d93d525667cfae032c56d0eb">callback_mode</a> = <a class="code" href="sw__timer_8h.html#ab435e99d43ff4980f2935354e41da10faebefe66542afed94c25f2d85b2399c48">TIMER_CALLBACK_HARDIRQ</a>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    new_event-&gt;<a class="code" href="structtimer__event.html#a869756e2844fbd8a9d226075bccf3671">data</a> = priv_data;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">return</span> new_event;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;}</div>
<div class="ttc" id="structtimer__event_html_a0c0cd8e8d93d525667cfae032c56d0eb"><div class="ttname"><a href="structtimer__event.html#a0c0cd8e8d93d525667cfae032c56d0eb">timer_event::callback_mode</a></div><div class="ttdeci">int callback_mode</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00124">sw_timer.h:124</a></div></div>
<div class="ttc" id="sw__buddy_8h_html_aec6635083e97f6d7929adfe2179dabdc"><div class="ttname"><a href="sw__buddy_8h.html#aec6635083e97f6d7929adfe2179dabdc">COMMON_HEAP_ID</a></div><div class="ttdeci">#define COMMON_HEAP_ID</div><div class="ttdef"><b>Definition:</b> <a href="sw__buddy_8h_source.html#l00057">sw_buddy.h:57</a></div></div>
<div class="ttc" id="structtimer__event_html_a01948743648ab6aa905c88718864d8e3"><div class="ttname"><a href="structtimer__event.html#a01948743648ab6aa905c88718864d8e3">timer_event::clk_info</a></div><div class="ttdeci">struct timer_clock_info * clk_info</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00121">sw_timer.h:121</a></div></div>
<div class="ttc" id="uniontimeval__t_html_ad2bd856b9918d0953976ccb75ba2cbe2"><div class="ttname"><a href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">timeval_t::tval64</a></div><div class="ttdeci">s64 tval64</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00054">sw_timer.h:54</a></div></div>
<div class="ttc" id="structtimer__event_html_a255eb37843c82205acb811f7c999558f"><div class="ttname"><a href="structtimer__event.html#a255eb37843c82205acb811f7c999558f">timer_event::handler</a></div><div class="ttdeci">int(* handler)(void *)</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00122">sw_timer.h:122</a></div></div>
<div class="ttc" id="sw__mem__functions_8h_html_a14af1b39b1154a36624740bad34b813f"><div class="ttname"><a href="sw__mem__functions_8h.html#a14af1b39b1154a36624740bad34b813f">sw_memset</a></div><div class="ttdeci">void * sw_memset(void *dest, u32 c, u32 count)</div><div class="ttdoc">memory set </div><div class="ttdef"><b>Definition:</b> <a href="sw__mem__functions_8c_source.html#l00074">sw_mem_functions.c:74</a></div></div>
<div class="ttc" id="sw__timer_8h_html_a1fe05d0f8f4b530c917954508864ef67"><div class="ttname"><a href="sw__timer_8h.html#a1fe05d0f8f4b530c917954508864ef67">TIMER_STATE_INACTIVE</a></div><div class="ttdeci">#define TIMER_STATE_INACTIVE</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00039">sw_timer.h:39</a></div></div>
<div class="ttc" id="sw__timer_8h_html_a35b2fd1a5f6b88bf3842ba3663e6f85e"><div class="ttname"><a href="sw__timer_8h.html#a35b2fd1a5f6b88bf3842ba3663e6f85e">TIMEVAL_MAX</a></div><div class="ttdeci">#define TIMEVAL_MAX</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00035">sw_timer.h:35</a></div></div>
<div class="ttc" id="structtimer__event_html_a0dab1a530fdd4a8af6a1979afac45614"><div class="ttname"><a href="structtimer__event.html#a0dab1a530fdd4a8af6a1979afac45614">timer_event::state</a></div><div class="ttdeci">int state</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00123">sw_timer.h:123</a></div></div>
<div class="ttc" id="structtimer__event_html_a485beddab325bc129d6f64ef095b42ba"><div class="ttname"><a href="structtimer__event.html#a485beddab325bc129d6f64ef095b42ba">timer_event::expires</a></div><div class="ttdeci">timeval_t expires</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00120">sw_timer.h:120</a></div></div>
<div class="ttc" id="structtimer__cpu__info_html_ac4ab45439b1a9387b3813053907dbc05"><div class="ttname"><a href="structtimer__cpu__info.html#ac4ab45439b1a9387b3813053907dbc05">timer_cpu_info::clock_info</a></div><div class="ttdeci">struct timer_clock_info clock_info[MAX_NUM_OF_TIMERS]</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00101">sw_timer.h:101</a></div></div>
<div class="ttc" id="sw__types_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00039">sw_types.h:39</a></div></div>
<div class="ttc" id="structtimer__event_html"><div class="ttname"><a href="structtimer__event.html">timer_event</a></div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00116">sw_timer.h:116</a></div></div>
<div class="ttc" id="sw__buddy_8h_html_ae6f063fadf564f51c72ac39a83d9b550"><div class="ttname"><a href="sw__buddy_8h.html#ae6f063fadf564f51c72ac39a83d9b550">sw_malloc_private</a></div><div class="ttdeci">void * sw_malloc_private(int heap_id, u32 size)</div><div class="ttdoc">Allocates memory privately for size bytes at the memory related to heap_id passed. </div><div class="ttdef"><b>Definition:</b> <a href="sw__buddy_8c_source.html#l00654">sw_buddy.c:654</a></div></div>
<div class="ttc" id="sw__debug_8h_html_a501cc8c07cf94dc1a6269c0d3ba5a234"><div class="ttname"><a href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a></div><div class="ttdeci">u32 sw_printf(const char *fmt,...)</div><div class="ttdoc">Print Function. </div><div class="ttdef"><b>Definition:</b> <a href="sw__debug_8c_source.html#l00046">sw_debug.c:46</a></div></div>
<div class="ttc" id="structtimer__event_html_a869756e2844fbd8a9d226075bccf3671"><div class="ttname"><a href="structtimer__event.html#a869756e2844fbd8a9d226075bccf3671">timer_event::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00125">sw_timer.h:125</a></div></div>
<div class="ttc" id="sw__list_8h_html_a0ffe9d28c36d7b018a9cfae33bae45c0"><div class="ttname"><a href="sw__list_8h.html#a0ffe9d28c36d7b018a9cfae33bae45c0">INIT_LIST_HEAD</a></div><div class="ttdeci">#define INIT_LIST_HEAD(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="sw__list_8h_source.html#l00040">sw_list.h:40</a></div></div>
<div class="ttc" id="structtimer__cpu__info_html"><div class="ttname"><a href="structtimer__cpu__info.html">timer_cpu_info</a></div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00100">sw_timer.h:100</a></div></div>
<div class="ttc" id="sw__timer_8c_html_a8672374dcfaf2638029c194d6a89824c"><div class="ttname"><a href="sw__timer_8c.html#a8672374dcfaf2638029c194d6a89824c">SW_TICKTIMER</a></div><div class="ttdeci">#define SW_TICKTIMER</div></div>
<div class="ttc" id="structtimer__event_html_afd05499da93e741a3b53da86d15c7a26"><div class="ttname"><a href="structtimer__event.html#afd05499da93e741a3b53da86d15c7a26">timer_event::node</a></div><div class="ttdeci">struct list node</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00117">sw_timer.h:117</a></div></div>
<div class="ttc" id="sw__timer_8h_html_ab435e99d43ff4980f2935354e41da10faebefe66542afed94c25f2d85b2399c48"><div class="ttname"><a href="sw__timer_8h.html#ab435e99d43ff4980f2935354e41da10faebefe66542afed94c25f2d85b2399c48">TIMER_CALLBACK_HARDIRQ</a></div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00067">sw_timer.h:67</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0060dc3f865566f66c7a445533afb847"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int timer_event_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtimer__event.html">timer_event</a> *&#160;</td>
          <td class="paramname"><em>tevent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function deletes the timer event structure After expiration of the timer ,the application can choose to keep and reuse the same structure again or delete it.If it decides to delete the structure then this function is called. This function frees the memory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tevent</td><td>The structure which needs to be deleted</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success -1 on failure </dd></dl>

<p>Definition at line <a class="el" href="sw__timer_8c_source.html#l00384">384</a> of file <a class="el" href="sw__timer_8c_source.html">sw_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;{</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordflow">if</span>(!tevent)</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">if</span>(tevent-&gt;<a class="code" href="structtimer__event.html#a0dab1a530fdd4a8af6a1979afac45614">state</a> == <a class="code" href="sw__timer_8h.html#a1fe05d0f8f4b530c917954508864ef67">TIMER_STATE_INACTIVE</a>){</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <a class="code" href="sw__buddy_8h.html#adf62b1f83e5f1afcdd6342ad9a747b76">sw_free_private</a>(<a class="code" href="sw__buddy_8h.html#aec6635083e97f6d7929adfe2179dabdc">COMMON_HEAP_ID</a>, tevent);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: Timer Event in USE :Cannot Free this Timer Event \n&quot;</span>);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;}</div>
<div class="ttc" id="sw__buddy_8h_html_aec6635083e97f6d7929adfe2179dabdc"><div class="ttname"><a href="sw__buddy_8h.html#aec6635083e97f6d7929adfe2179dabdc">COMMON_HEAP_ID</a></div><div class="ttdeci">#define COMMON_HEAP_ID</div><div class="ttdef"><b>Definition:</b> <a href="sw__buddy_8h_source.html#l00057">sw_buddy.h:57</a></div></div>
<div class="ttc" id="sw__timer_8h_html_a1fe05d0f8f4b530c917954508864ef67"><div class="ttname"><a href="sw__timer_8h.html#a1fe05d0f8f4b530c917954508864ef67">TIMER_STATE_INACTIVE</a></div><div class="ttdeci">#define TIMER_STATE_INACTIVE</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00039">sw_timer.h:39</a></div></div>
<div class="ttc" id="structtimer__event_html_a0dab1a530fdd4a8af6a1979afac45614"><div class="ttname"><a href="structtimer__event.html#a0dab1a530fdd4a8af6a1979afac45614">timer_event::state</a></div><div class="ttdeci">int state</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00123">sw_timer.h:123</a></div></div>
<div class="ttc" id="sw__buddy_8h_html_adf62b1f83e5f1afcdd6342ad9a747b76"><div class="ttname"><a href="sw__buddy_8h.html#adf62b1f83e5f1afcdd6342ad9a747b76">sw_free_private</a></div><div class="ttdeci">void sw_free_private(int heap_id, void *pointer)</div><div class="ttdoc">Frees the privately allocated memory pointing to the heap_id and the address pointer. </div><div class="ttdef"><b>Definition:</b> <a href="sw__buddy_8c_source.html#l00729">sw_buddy.c:729</a></div></div>
<div class="ttc" id="sw__debug_8h_html_a501cc8c07cf94dc1a6269c0d3ba5a234"><div class="ttname"><a href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a></div><div class="ttdeci">u32 sw_printf(const char *fmt,...)</div><div class="ttdoc">Print Function. </div><div class="ttdef"><b>Definition:</b> <a href="sw__debug_8c_source.html#l00046">sw_debug.c:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae9578a02129a7b5c79e395fe76d4562c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timer_event_start </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtimer__event.html">timer_event</a> *&#160;</td>
          <td class="paramname"><em>tevent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uniontimeval__t.html">timeval_t</a> *&#160;</td>
          <td class="paramname"><em>time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>It starts the timer event by calling the appropriate functions The time interval is written to the hardwire timer and the event is added to the list of events to be handled on timer expiry. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tevent</td><td>The timer event which needed to be started </td></tr>
    <tr><td class="paramname">time</td><td>The time duration after which the event need to be expire </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="sw__timer_8c_source.html#l00485">485</a> of file <a class="el" href="sw__timer_8c_source.html">sw_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;{</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <a class="code" href="uniontimeval__t.html">timeval_t</a> temp_time;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <a class="code" href="sw__types_8h.html#a426fa6e7d1eaa7c84e108835da641869">irq_flags_t</a> irqflags;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordflow">if</span>(!tevent)</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        return ;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    temp_time.<a class="code" href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">tval64</a> = <a class="code" href="sw__timer_8c.html#a26ea71463f065aaa1db5e341990adc7d">read_timestamp</a>();</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    time-&gt;<a class="code" href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">tval64</a> =  timeval_add(&amp;temp_time, time);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="preprocessor">#ifdef TIMER_DBG</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="preprocessor"></span>    <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: Timer Event start time  sec 0x%08x nsec 0x%08x \n&quot;</span>,</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            time-&gt;<a class="code" href="uniontimeval__t.html#a744c01516c3a376cb67bfa8a0a3d0900">tval</a>.<a class="code" href="uniontimeval__t.html#a9c6a9d36de22b39f398f77325ee07539">sec</a>,time-&gt;<a class="code" href="uniontimeval__t.html#a744c01516c3a376cb67bfa8a0a3d0900">tval</a>.<a class="code" href="uniontimeval__t.html#a85f38542a8fa84ce968e2297bf8f7487">nsec</a>);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    timer_event_set_expire(tevent, time);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    spin_lock_irqsave(&amp;tevent-&gt;<a class="code" href="structtimer__event.html#a01948743648ab6aa905c88718864d8e3">clk_info</a>-&gt;<a class="code" href="structtimer__clock__info.html#ab36d9db5095d55de592fbf79fbabddb4">spin_lock</a>, &amp;irqflags);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    timer_queue_add(&amp;tevent-&gt;<a class="code" href="structtimer__event.html#a01948743648ab6aa905c88718864d8e3">clk_info</a>-&gt;<a class="code" href="structtimer__clock__info.html#a297fe3a0fc7efdc467d0b534bd5c8aae">active</a>, tevent); </div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    spin_unlock_irqrestore(&amp;tevent-&gt;<a class="code" href="structtimer__event.html#a01948743648ab6aa905c88718864d8e3">clk_info</a>-&gt;<a class="code" href="structtimer__clock__info.html#ab36d9db5095d55de592fbf79fbabddb4">spin_lock</a>, irqflags);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="structtimer__cpu__info.html">timer_cpu_info</a>.<a class="code" href="structtimer__cpu__info.html#aa79880aaf690b1462cd9dc48d196079d">expires_next</a>.<a class="code" href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">tval64</a> &gt; tevent-&gt;<a class="code" href="structtimer__event.html#a485beddab325bc129d6f64ef095b42ba">expires</a>.<a class="code" href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">tval64</a>){</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        program_tick_for_event(tevent-&gt;<a class="code" href="structtimer__event.html#a485beddab325bc129d6f64ef095b42ba">expires</a>.<a class="code" href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">tval64</a>);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    }</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;}</div>
<div class="ttc" id="structtimer__clock__info_html_a297fe3a0fc7efdc467d0b534bd5c8aae"><div class="ttname"><a href="structtimer__clock__info.html#a297fe3a0fc7efdc467d0b534bd5c8aae">timer_clock_info::active</a></div><div class="ttdeci">struct list active</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00089">sw_timer.h:89</a></div></div>
<div class="ttc" id="structtimer__clock__info_html_ab36d9db5095d55de592fbf79fbabddb4"><div class="ttname"><a href="structtimer__clock__info.html#ab36d9db5095d55de592fbf79fbabddb4">timer_clock_info::spin_lock</a></div><div class="ttdeci">struct spinlock spin_lock</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00088">sw_timer.h:88</a></div></div>
<div class="ttc" id="uniontimeval__t_html"><div class="ttname"><a href="uniontimeval__t.html">timeval_t</a></div><div class="ttdoc">Structure to represent the time in High resolution format( Resolution in Nano seconds) ...</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00053">sw_timer.h:53</a></div></div>
<div class="ttc" id="structtimer__event_html_a01948743648ab6aa905c88718864d8e3"><div class="ttname"><a href="structtimer__event.html#a01948743648ab6aa905c88718864d8e3">timer_event::clk_info</a></div><div class="ttdeci">struct timer_clock_info * clk_info</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00121">sw_timer.h:121</a></div></div>
<div class="ttc" id="sw__timer_8c_html_a26ea71463f065aaa1db5e341990adc7d"><div class="ttname"><a href="sw__timer_8c.html#a26ea71463f065aaa1db5e341990adc7d">read_timestamp</a></div><div class="ttdeci">u64 read_timestamp(void)</div><div class="ttdoc">It updates and returns the current timestamp value. </div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8c_source.html#l00304">sw_timer.c:304</a></div></div>
<div class="ttc" id="uniontimeval__t_html_ad2bd856b9918d0953976ccb75ba2cbe2"><div class="ttname"><a href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">timeval_t::tval64</a></div><div class="ttdeci">s64 tval64</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00054">sw_timer.h:54</a></div></div>
<div class="ttc" id="structtimer__cpu__info_html_aa79880aaf690b1462cd9dc48d196079d"><div class="ttname"><a href="structtimer__cpu__info.html#aa79880aaf690b1462cd9dc48d196079d">timer_cpu_info::expires_next</a></div><div class="ttdeci">timeval_t expires_next</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00103">sw_timer.h:103</a></div></div>
<div class="ttc" id="structtimer__event_html_a485beddab325bc129d6f64ef095b42ba"><div class="ttname"><a href="structtimer__event.html#a485beddab325bc129d6f64ef095b42ba">timer_event::expires</a></div><div class="ttdeci">timeval_t expires</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00120">sw_timer.h:120</a></div></div>
<div class="ttc" id="uniontimeval__t_html_a744c01516c3a376cb67bfa8a0a3d0900"><div class="ttname"><a href="uniontimeval__t.html#a744c01516c3a376cb67bfa8a0a3d0900">timeval_t::tval</a></div><div class="ttdeci">struct timeval_t::@10 tval</div></div>
<div class="ttc" id="uniontimeval__t_html_a9c6a9d36de22b39f398f77325ee07539"><div class="ttname"><a href="uniontimeval__t.html#a9c6a9d36de22b39f398f77325ee07539">timeval_t::sec</a></div><div class="ttdeci">s32 sec</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00056">sw_timer.h:56</a></div></div>
<div class="ttc" id="sw__debug_8h_html_a501cc8c07cf94dc1a6269c0d3ba5a234"><div class="ttname"><a href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a></div><div class="ttdeci">u32 sw_printf(const char *fmt,...)</div><div class="ttdoc">Print Function. </div><div class="ttdef"><b>Definition:</b> <a href="sw__debug_8c_source.html#l00046">sw_debug.c:46</a></div></div>
<div class="ttc" id="structtimer__cpu__info_html"><div class="ttname"><a href="structtimer__cpu__info.html">timer_cpu_info</a></div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00100">sw_timer.h:100</a></div></div>
<div class="ttc" id="sw__types_8h_html_a426fa6e7d1eaa7c84e108835da641869"><div class="ttname"><a href="sw__types_8h.html#a426fa6e7d1eaa7c84e108835da641869">irq_flags_t</a></div><div class="ttdeci">unsigned int irq_flags_t</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00085">sw_types.h:85</a></div></div>
<div class="ttc" id="uniontimeval__t_html_a85f38542a8fa84ce968e2297bf8f7487"><div class="ttname"><a href="uniontimeval__t.html#a85f38542a8fa84ce968e2297bf8f7487">timeval_t::nsec</a></div><div class="ttdeci">s32 nsec</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00056">sw_timer.h:56</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a78d85b1d9026b8c3735115d2d7330590"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timer_event_stop </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtimer__event.html">timer_event</a> *&#160;</td>
          <td class="paramname"><em>tevent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stops a <a class="el" href="structtimer__event.html">timer_event</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tevent</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="sw__timer_8c_source.html#l00648">648</a> of file <a class="el" href="sw__timer_8c_source.html">sw_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;{</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="keyword">struct </span><a class="code" href="structtimer__clock__info.html">timer_clock_info</a>* clock_info;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="keyword">struct </span><a class="code" href="structtimer__event.html">timer_event</a>* next_event;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <a class="code" href="uniontimeval__t.html">timeval_t</a> <a class="code" href="structtimer__event.html#a485beddab325bc129d6f64ef095b42ba">expires</a>,expires_next;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <a class="code" href="sw__types_8h.html#a426fa6e7d1eaa7c84e108835da641869">irq_flags_t</a> irqflags;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="sw__timer_8c.html#a4325e305edc1bdb585dc2785675f5b8f">is_timer_event_waiting_on_callback</a>(tevent))</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="sw__timer_8c.html#aee258028608dc57e3cf1b12e04d10624">is_timer_event_active</a>(tevent)){</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        clock_info = &amp;<a class="code" href="structtimer__cpu__info.html">timer_cpu_info</a>.<a class="code" href="structtimer__cpu__info.html#ac4ab45439b1a9387b3813053907dbc05">clock_info</a>[<a class="code" href="sw__timer_8c.html#a8672374dcfaf2638029c194d6a89824c">SW_TICKTIMER</a>];</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        spin_lock_irqsave(&amp;tevent-&gt;<a class="code" href="structtimer__event.html#a01948743648ab6aa905c88718864d8e3">clk_info</a>-&gt;<a class="code" href="structtimer__clock__info.html#ab36d9db5095d55de592fbf79fbabddb4">spin_lock</a>, &amp;irqflags);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        <span class="keywordflow">if</span>(&amp;tevent-&gt;<a class="code" href="structtimer__event.html#afd05499da93e741a3b53da86d15c7a26">node</a> == timer_queue_getnext(&amp;clock_info-&gt;<a class="code" href="structtimer__clock__info.html#a297fe3a0fc7efdc467d0b534bd5c8aae">active</a>)){</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;            spin_unlock_irqrestore(&amp;tevent-&gt;<a class="code" href="structtimer__event.html#a01948743648ab6aa905c88718864d8e3">clk_info</a>-&gt;<a class="code" href="structtimer__clock__info.html#ab36d9db5095d55de592fbf79fbabddb4">spin_lock</a>, irqflags);</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            expires.<a class="code" href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">tval64</a> = timer_get_expire(tevent); </div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;            <span class="keywordflow">if</span>(expires.<a class="code" href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">tval64</a> == <a class="code" href="structtimer__cpu__info.html">timer_cpu_info</a>.<a class="code" href="structtimer__cpu__info.html#aa79880aaf690b1462cd9dc48d196079d">expires_next</a>.<a class="code" href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">tval64</a>){</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;               <span class="keywordflow">if</span>(tevent-&gt;<a class="code" href="structtimer__event.html#afd05499da93e741a3b53da86d15c7a26">node</a>.<a class="code" href="structlist.html#a1900fe79e875e2838625b2eb60837f8f">next</a> == &amp;clock_info-&gt;<a class="code" href="structtimer__clock__info.html#a297fe3a0fc7efdc467d0b534bd5c8aae">active</a>)</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                   expires_next.<a class="code" href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">tval64</a> = <a class="code" href="sw__timer_8h.html#a35b2fd1a5f6b88bf3842ba3663e6f85e">TIMEVAL_MAX</a>;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;               <span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                   next_event = <a class="code" href="sw__list_8h.html#a26c976b7f654e70df318c1843e5094de">list_entry</a>(tevent-&gt;<a class="code" href="structtimer__event.html#afd05499da93e741a3b53da86d15c7a26">node</a>.<a class="code" href="structlist.html#a1900fe79e875e2838625b2eb60837f8f">next</a>,<span class="keyword">struct</span> <a class="code" href="structtimer__event.html">timer_event</a>, <a class="code" href="structtimer__event.html#afd05499da93e741a3b53da86d15c7a26">node</a>);</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                   expires_next = next_event-&gt;<a class="code" href="structtimer__event.html#a485beddab325bc129d6f64ef095b42ba">expires</a>;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;               }</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;               <span class="keywordflow">if</span>(expires_next.<a class="code" href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">tval64</a> != <a class="code" href="structtimer__cpu__info.html">timer_cpu_info</a>.<a class="code" href="structtimer__cpu__info.html#aa79880aaf690b1462cd9dc48d196079d">expires_next</a>.<a class="code" href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">tval64</a>)</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                   program_tick_for_event(expires_next.<a class="code" href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">tval64</a>);</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;               </div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;           }</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        }</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            spin_unlock_irqrestore(&amp;tevent-&gt;<a class="code" href="structtimer__event.html#a01948743648ab6aa905c88718864d8e3">clk_info</a>-&gt;<a class="code" href="structtimer__clock__info.html#ab36d9db5095d55de592fbf79fbabddb4">spin_lock</a>, irqflags);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        }</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        spin_lock_irqsave(&amp;tevent-&gt;<a class="code" href="structtimer__event.html#a01948743648ab6aa905c88718864d8e3">clk_info</a>-&gt;<a class="code" href="structtimer__clock__info.html#ab36d9db5095d55de592fbf79fbabddb4">spin_lock</a>, &amp;irqflags);</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        timer_queue_del(tevent);</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        spin_unlock_irqrestore(&amp;tevent-&gt;<a class="code" href="structtimer__event.html#a01948743648ab6aa905c88718864d8e3">clk_info</a>-&gt;<a class="code" href="structtimer__clock__info.html#ab36d9db5095d55de592fbf79fbabddb4">spin_lock</a>, irqflags);</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    }</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;}</div>
<div class="ttc" id="structtimer__clock__info_html_a297fe3a0fc7efdc467d0b534bd5c8aae"><div class="ttname"><a href="structtimer__clock__info.html#a297fe3a0fc7efdc467d0b534bd5c8aae">timer_clock_info::active</a></div><div class="ttdeci">struct list active</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00089">sw_timer.h:89</a></div></div>
<div class="ttc" id="structtimer__clock__info_html_ab36d9db5095d55de592fbf79fbabddb4"><div class="ttname"><a href="structtimer__clock__info.html#ab36d9db5095d55de592fbf79fbabddb4">timer_clock_info::spin_lock</a></div><div class="ttdeci">struct spinlock spin_lock</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00088">sw_timer.h:88</a></div></div>
<div class="ttc" id="uniontimeval__t_html"><div class="ttname"><a href="uniontimeval__t.html">timeval_t</a></div><div class="ttdoc">Structure to represent the time in High resolution format( Resolution in Nano seconds) ...</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00053">sw_timer.h:53</a></div></div>
<div class="ttc" id="structtimer__event_html_a01948743648ab6aa905c88718864d8e3"><div class="ttname"><a href="structtimer__event.html#a01948743648ab6aa905c88718864d8e3">timer_event::clk_info</a></div><div class="ttdeci">struct timer_clock_info * clk_info</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00121">sw_timer.h:121</a></div></div>
<div class="ttc" id="sw__timer_8c_html_aee258028608dc57e3cf1b12e04d10624"><div class="ttname"><a href="sw__timer_8c.html#aee258028608dc57e3cf1b12e04d10624">is_timer_event_active</a></div><div class="ttdeci">int is_timer_event_active(struct timer_event *tevent)</div><div class="ttdoc">checks whether the timer event is active </div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8c_source.html#l00611">sw_timer.c:611</a></div></div>
<div class="ttc" id="uniontimeval__t_html_ad2bd856b9918d0953976ccb75ba2cbe2"><div class="ttname"><a href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">timeval_t::tval64</a></div><div class="ttdeci">s64 tval64</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00054">sw_timer.h:54</a></div></div>
<div class="ttc" id="structtimer__cpu__info_html_aa79880aaf690b1462cd9dc48d196079d"><div class="ttname"><a href="structtimer__cpu__info.html#aa79880aaf690b1462cd9dc48d196079d">timer_cpu_info::expires_next</a></div><div class="ttdeci">timeval_t expires_next</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00103">sw_timer.h:103</a></div></div>
<div class="ttc" id="sw__timer_8h_html_a35b2fd1a5f6b88bf3842ba3663e6f85e"><div class="ttname"><a href="sw__timer_8h.html#a35b2fd1a5f6b88bf3842ba3663e6f85e">TIMEVAL_MAX</a></div><div class="ttdeci">#define TIMEVAL_MAX</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00035">sw_timer.h:35</a></div></div>
<div class="ttc" id="sw__list_8h_html_a26c976b7f654e70df318c1843e5094de"><div class="ttname"><a href="sw__list_8h.html#a26c976b7f654e70df318c1843e5094de">list_entry</a></div><div class="ttdeci">#define list_entry(ptr, type, member)</div><div class="ttdef"><b>Definition:</b> <a href="sw__list_8h_source.html#l00044">sw_list.h:44</a></div></div>
<div class="ttc" id="sw__timer_8c_html_a4325e305edc1bdb585dc2785675f5b8f"><div class="ttname"><a href="sw__timer_8c.html#a4325e305edc1bdb585dc2785675f5b8f">is_timer_event_waiting_on_callback</a></div><div class="ttdeci">int is_timer_event_waiting_on_callback(struct timer_event *tevent)</div><div class="ttdoc">checks whether the timer event is waiting in callback mode </div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8c_source.html#l00631">sw_timer.c:631</a></div></div>
<div class="ttc" id="structtimer__clock__info_html"><div class="ttname"><a href="structtimer__clock__info.html">timer_clock_info</a></div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00084">sw_timer.h:84</a></div></div>
<div class="ttc" id="structtimer__event_html_a485beddab325bc129d6f64ef095b42ba"><div class="ttname"><a href="structtimer__event.html#a485beddab325bc129d6f64ef095b42ba">timer_event::expires</a></div><div class="ttdeci">timeval_t expires</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00120">sw_timer.h:120</a></div></div>
<div class="ttc" id="structtimer__cpu__info_html_ac4ab45439b1a9387b3813053907dbc05"><div class="ttname"><a href="structtimer__cpu__info.html#ac4ab45439b1a9387b3813053907dbc05">timer_cpu_info::clock_info</a></div><div class="ttdeci">struct timer_clock_info clock_info[MAX_NUM_OF_TIMERS]</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00101">sw_timer.h:101</a></div></div>
<div class="ttc" id="structtimer__event_html"><div class="ttname"><a href="structtimer__event.html">timer_event</a></div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00116">sw_timer.h:116</a></div></div>
<div class="ttc" id="structtimer__cpu__info_html"><div class="ttname"><a href="structtimer__cpu__info.html">timer_cpu_info</a></div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00100">sw_timer.h:100</a></div></div>
<div class="ttc" id="sw__types_8h_html_a426fa6e7d1eaa7c84e108835da641869"><div class="ttname"><a href="sw__types_8h.html#a426fa6e7d1eaa7c84e108835da641869">irq_flags_t</a></div><div class="ttdeci">unsigned int irq_flags_t</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00085">sw_types.h:85</a></div></div>
<div class="ttc" id="sw__timer_8c_html_a8672374dcfaf2638029c194d6a89824c"><div class="ttname"><a href="sw__timer_8c.html#a8672374dcfaf2638029c194d6a89824c">SW_TICKTIMER</a></div><div class="ttdeci">#define SW_TICKTIMER</div></div>
<div class="ttc" id="structtimer__event_html_afd05499da93e741a3b53da86d15c7a26"><div class="ttname"><a href="structtimer__event.html#afd05499da93e741a3b53da86d15c7a26">timer_event::node</a></div><div class="ttdeci">struct list node</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00117">sw_timer.h:117</a></div></div>
<div class="ttc" id="structlist_html_a1900fe79e875e2838625b2eb60837f8f"><div class="ttname"><a href="structlist.html#a1900fe79e875e2838625b2eb60837f8f">list::next</a></div><div class="ttdeci">struct list * next</div><div class="ttdef"><b>Definition:</b> <a href="sw__list_8h_source.html#l00035">sw_list.h:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3ac98981aa3fa8b3464dd10584116865"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timer_interrupt </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is the function which is called on expiry of any timer event. This fn goes through the list of registered timer events. If the expiry time of the event is already in the past then the corresponding handler function is called. As the list is already sorted according to their time of expiration, the function returns either when it encounters the first event whose expiry time is in the future or when the list becomes empty. </p>

<p>Definition at line <a class="el" href="sw__timer_8c_source.html#l00548">548</a> of file <a class="el" href="sw__timer_8c_source.html">sw_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;{</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="keyword">struct </span><a class="code" href="structtimer__clock__info.html">timer_clock_info</a>* clock_info;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="keyword">struct </span><a class="code" href="structlist.html">list</a> *node;    </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keyword">struct </span><a class="code" href="structtimer__event.html">timer_event</a>* tevent;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <a class="code" href="uniontimeval__t.html">timeval_t</a> expires_next, now, temp_time, time_diff;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    expires_next.<a class="code" href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">tval64</a> = <a class="code" href="sw__timer_8h.html#a35b2fd1a5f6b88bf3842ba3663e6f85e">TIMEVAL_MAX</a>;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="preprocessor">#ifdef TIMER_DBG</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="preprocessor"></span>    <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: Inside timer interrupt\n&quot;</span>);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    clock_info = &amp;<a class="code" href="structtimer__cpu__info.html">timer_cpu_info</a>.<a class="code" href="structtimer__cpu__info.html#ac4ab45439b1a9387b3813053907dbc05">clock_info</a>[<a class="code" href="sw__timer_8c.html#a8672374dcfaf2638029c194d6a89824c">SW_TICKTIMER</a>];</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keywordflow">while</span>((node = timer_queue_getnext(&amp;clock_info-&gt;<a class="code" href="structtimer__clock__info.html#a297fe3a0fc7efdc467d0b534bd5c8aae">active</a>))){</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        tevent = <a class="code" href="sw__list_8h.html#a26c976b7f654e70df318c1843e5094de">list_entry</a>(node, <span class="keyword">struct</span> <a class="code" href="structtimer__event.html">timer_event</a>, node);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        temp_time.<a class="code" href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">tval64</a> = timer_get_expire(tevent);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        now.<a class="code" href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">tval64</a> = <a class="code" href="sw__timer_8c.html#a26ea71463f065aaa1db5e341990adc7d">read_timestamp</a>();</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        time_diff.<a class="code" href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">tval64</a> = timeval_sub(&amp;temp_time, &amp;now);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="preprocessor">#ifdef TIMER_DBG</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="preprocessor"></span>        <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: current 0x%x:0x%x and expires 0x%x:0x%x and diff 0x%x:0x%x\n&quot;</span>, </div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                now.<a class="code" href="uniontimeval__t.html#a744c01516c3a376cb67bfa8a0a3d0900">tval</a>.<a class="code" href="uniontimeval__t.html#a9c6a9d36de22b39f398f77325ee07539">sec</a>, now.<a class="code" href="uniontimeval__t.html#a744c01516c3a376cb67bfa8a0a3d0900">tval</a>.<a class="code" href="uniontimeval__t.html#a85f38542a8fa84ce968e2297bf8f7487">nsec</a>, </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                temp_time.<a class="code" href="uniontimeval__t.html#a744c01516c3a376cb67bfa8a0a3d0900">tval</a>.<a class="code" href="uniontimeval__t.html#a9c6a9d36de22b39f398f77325ee07539">sec</a>, temp_time.<a class="code" href="uniontimeval__t.html#a744c01516c3a376cb67bfa8a0a3d0900">tval</a>.<a class="code" href="uniontimeval__t.html#a85f38542a8fa84ce968e2297bf8f7487">nsec</a>,</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                time_diff.<a class="code" href="uniontimeval__t.html#a744c01516c3a376cb67bfa8a0a3d0900">tval</a>.<a class="code" href="uniontimeval__t.html#a9c6a9d36de22b39f398f77325ee07539">sec</a>, time_diff.<a class="code" href="uniontimeval__t.html#a744c01516c3a376cb67bfa8a0a3d0900">tval</a>.<a class="code" href="uniontimeval__t.html#a85f38542a8fa84ce968e2297bf8f7487">nsec</a>);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <span class="keywordflow">if</span>((time_diff.<a class="code" href="uniontimeval__t.html#a744c01516c3a376cb67bfa8a0a3d0900">tval</a>.<a class="code" href="uniontimeval__t.html#a9c6a9d36de22b39f398f77325ee07539">sec</a> &gt; 0) || </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            ((time_diff.<a class="code" href="uniontimeval__t.html#a744c01516c3a376cb67bfa8a0a3d0900">tval</a>.<a class="code" href="uniontimeval__t.html#a9c6a9d36de22b39f398f77325ee07539">sec</a> == 0) &amp;&amp; time_diff.<a class="code" href="uniontimeval__t.html#a744c01516c3a376cb67bfa8a0a3d0900">tval</a>.<a class="code" href="uniontimeval__t.html#a85f38542a8fa84ce968e2297bf8f7487">nsec</a> &gt; 1000)) { </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment">/*        if( now.tval64 &lt; temp_time.tval64){ */</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;            <a class="code" href="uniontimeval__t.html">timeval_t</a> <a class="code" href="structtimer__event.html#a485beddab325bc129d6f64ef095b42ba">expires</a>;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            expires = temp_time;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            <span class="keywordflow">if</span>( expires.<a class="code" href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">tval64</a> &lt; expires_next.<a class="code" href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">tval64</a>) </div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                expires_next = <a class="code" href="structtimer__event.html#a485beddab325bc129d6f64ef095b42ba">expires</a>;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            program_tick_for_event(expires_next.<a class="code" href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">tval64</a>);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        }</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        tevent-&gt;<a class="code" href="structtimer__event.html#a0dab1a530fdd4a8af6a1979afac45614">state</a> = <a class="code" href="sw__timer_8h.html#a0744ace9008c6b1ef132f350120ac579">TIMER_STATE_EXECUTING</a>;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        __run_timer_handler(tevent);</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    }</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <a class="code" href="structtimer__cpu__info.html">timer_cpu_info</a>.<a class="code" href="structtimer__cpu__info.html#aa79880aaf690b1462cd9dc48d196079d">expires_next</a>.<a class="code" href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">tval64</a> = <a class="code" href="sw__timer_8h.html#a35b2fd1a5f6b88bf3842ba3663e6f85e">TIMEVAL_MAX</a>;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;}</div>
<div class="ttc" id="sw__timer_8h_html_a0744ace9008c6b1ef132f350120ac579"><div class="ttname"><a href="sw__timer_8h.html#a0744ace9008c6b1ef132f350120ac579">TIMER_STATE_EXECUTING</a></div><div class="ttdeci">#define TIMER_STATE_EXECUTING</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00045">sw_timer.h:45</a></div></div>
<div class="ttc" id="structtimer__clock__info_html_a297fe3a0fc7efdc467d0b534bd5c8aae"><div class="ttname"><a href="structtimer__clock__info.html#a297fe3a0fc7efdc467d0b534bd5c8aae">timer_clock_info::active</a></div><div class="ttdeci">struct list active</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00089">sw_timer.h:89</a></div></div>
<div class="ttc" id="uniontimeval__t_html"><div class="ttname"><a href="uniontimeval__t.html">timeval_t</a></div><div class="ttdoc">Structure to represent the time in High resolution format( Resolution in Nano seconds) ...</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00053">sw_timer.h:53</a></div></div>
<div class="ttc" id="sw__timer_8c_html_a26ea71463f065aaa1db5e341990adc7d"><div class="ttname"><a href="sw__timer_8c.html#a26ea71463f065aaa1db5e341990adc7d">read_timestamp</a></div><div class="ttdeci">u64 read_timestamp(void)</div><div class="ttdoc">It updates and returns the current timestamp value. </div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8c_source.html#l00304">sw_timer.c:304</a></div></div>
<div class="ttc" id="uniontimeval__t_html_ad2bd856b9918d0953976ccb75ba2cbe2"><div class="ttname"><a href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">timeval_t::tval64</a></div><div class="ttdeci">s64 tval64</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00054">sw_timer.h:54</a></div></div>
<div class="ttc" id="structtimer__cpu__info_html_aa79880aaf690b1462cd9dc48d196079d"><div class="ttname"><a href="structtimer__cpu__info.html#aa79880aaf690b1462cd9dc48d196079d">timer_cpu_info::expires_next</a></div><div class="ttdeci">timeval_t expires_next</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00103">sw_timer.h:103</a></div></div>
<div class="ttc" id="sw__timer_8h_html_a35b2fd1a5f6b88bf3842ba3663e6f85e"><div class="ttname"><a href="sw__timer_8h.html#a35b2fd1a5f6b88bf3842ba3663e6f85e">TIMEVAL_MAX</a></div><div class="ttdeci">#define TIMEVAL_MAX</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00035">sw_timer.h:35</a></div></div>
<div class="ttc" id="sw__list_8h_html_a26c976b7f654e70df318c1843e5094de"><div class="ttname"><a href="sw__list_8h.html#a26c976b7f654e70df318c1843e5094de">list_entry</a></div><div class="ttdeci">#define list_entry(ptr, type, member)</div><div class="ttdef"><b>Definition:</b> <a href="sw__list_8h_source.html#l00044">sw_list.h:44</a></div></div>
<div class="ttc" id="structtimer__event_html_a0dab1a530fdd4a8af6a1979afac45614"><div class="ttname"><a href="structtimer__event.html#a0dab1a530fdd4a8af6a1979afac45614">timer_event::state</a></div><div class="ttdeci">int state</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00123">sw_timer.h:123</a></div></div>
<div class="ttc" id="structtimer__clock__info_html"><div class="ttname"><a href="structtimer__clock__info.html">timer_clock_info</a></div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00084">sw_timer.h:84</a></div></div>
<div class="ttc" id="structtimer__event_html_a485beddab325bc129d6f64ef095b42ba"><div class="ttname"><a href="structtimer__event.html#a485beddab325bc129d6f64ef095b42ba">timer_event::expires</a></div><div class="ttdeci">timeval_t expires</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00120">sw_timer.h:120</a></div></div>
<div class="ttc" id="uniontimeval__t_html_a744c01516c3a376cb67bfa8a0a3d0900"><div class="ttname"><a href="uniontimeval__t.html#a744c01516c3a376cb67bfa8a0a3d0900">timeval_t::tval</a></div><div class="ttdeci">struct timeval_t::@10 tval</div></div>
<div class="ttc" id="structtimer__cpu__info_html_ac4ab45439b1a9387b3813053907dbc05"><div class="ttname"><a href="structtimer__cpu__info.html#ac4ab45439b1a9387b3813053907dbc05">timer_cpu_info::clock_info</a></div><div class="ttdeci">struct timer_clock_info clock_info[MAX_NUM_OF_TIMERS]</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00101">sw_timer.h:101</a></div></div>
<div class="ttc" id="uniontimeval__t_html_a9c6a9d36de22b39f398f77325ee07539"><div class="ttname"><a href="uniontimeval__t.html#a9c6a9d36de22b39f398f77325ee07539">timeval_t::sec</a></div><div class="ttdeci">s32 sec</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00056">sw_timer.h:56</a></div></div>
<div class="ttc" id="structtimer__event_html"><div class="ttname"><a href="structtimer__event.html">timer_event</a></div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00116">sw_timer.h:116</a></div></div>
<div class="ttc" id="sw__debug_8h_html_a501cc8c07cf94dc1a6269c0d3ba5a234"><div class="ttname"><a href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a></div><div class="ttdeci">u32 sw_printf(const char *fmt,...)</div><div class="ttdoc">Print Function. </div><div class="ttdef"><b>Definition:</b> <a href="sw__debug_8c_source.html#l00046">sw_debug.c:46</a></div></div>
<div class="ttc" id="structtimer__cpu__info_html"><div class="ttname"><a href="structtimer__cpu__info.html">timer_cpu_info</a></div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00100">sw_timer.h:100</a></div></div>
<div class="ttc" id="structlist_html"><div class="ttname"><a href="structlist.html">list</a></div><div class="ttdef"><b>Definition:</b> <a href="sw__list_8h_source.html#l00034">sw_list.h:34</a></div></div>
<div class="ttc" id="sw__timer_8c_html_a8672374dcfaf2638029c194d6a89824c"><div class="ttname"><a href="sw__timer_8c.html#a8672374dcfaf2638029c194d6a89824c">SW_TICKTIMER</a></div><div class="ttdeci">#define SW_TICKTIMER</div></div>
<div class="ttc" id="uniontimeval__t_html_a85f38542a8fa84ce968e2297bf8f7487"><div class="ttname"><a href="uniontimeval__t.html#a85f38542a8fa84ce968e2297bf8f7487">timeval_t::nsec</a></div><div class="ttdeci">s32 nsec</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00056">sw_timer.h:56</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a80a9cef76712fd40db49dba06813eb3f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int timeval_after </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="uniontimeval__t.html">timeval_t</a> *&#160;</td>
          <td class="paramname"><em>value1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="uniontimeval__t.html">timeval_t</a> *&#160;</td>
          <td class="paramname"><em>value2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks whether value 1 comes after value2 If yes returns 1 else returns 0. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">value1</td><td>Time value1 </td></tr>
    <tr><td class="paramname">value2</td><td>Time value 2 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 - If value1 comes after value2 0 - If value2 comes after value1 </dd></dl>

<p>Definition at line <a class="el" href="sw__timer_8c_source.html#l00159">159</a> of file <a class="el" href="sw__timer_8c_source.html">sw_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;{   </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <a class="code" href="uniontimeval__t.html">timeval_t</a> diff;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    diff.<a class="code" href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">tval64</a>  = timeval_sub(value1, value2);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">if</span>(diff.<a class="code" href="uniontimeval__t.html#a744c01516c3a376cb67bfa8a0a3d0900">tval</a>.<a class="code" href="uniontimeval__t.html#a9c6a9d36de22b39f398f77325ee07539">sec</a> &gt; 0 ||</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            ((diff.<a class="code" href="uniontimeval__t.html#a744c01516c3a376cb67bfa8a0a3d0900">tval</a>.<a class="code" href="uniontimeval__t.html#a9c6a9d36de22b39f398f77325ee07539">sec</a> == 0) &amp;&amp; (diff.<a class="code" href="uniontimeval__t.html#a744c01516c3a376cb67bfa8a0a3d0900">tval</a>.<a class="code" href="uniontimeval__t.html#a85f38542a8fa84ce968e2297bf8f7487">nsec</a> &gt; 1000)))</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;}</div>
<div class="ttc" id="uniontimeval__t_html"><div class="ttname"><a href="uniontimeval__t.html">timeval_t</a></div><div class="ttdoc">Structure to represent the time in High resolution format( Resolution in Nano seconds) ...</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00053">sw_timer.h:53</a></div></div>
<div class="ttc" id="uniontimeval__t_html_ad2bd856b9918d0953976ccb75ba2cbe2"><div class="ttname"><a href="uniontimeval__t.html#ad2bd856b9918d0953976ccb75ba2cbe2">timeval_t::tval64</a></div><div class="ttdeci">s64 tval64</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00054">sw_timer.h:54</a></div></div>
<div class="ttc" id="uniontimeval__t_html_a744c01516c3a376cb67bfa8a0a3d0900"><div class="ttname"><a href="uniontimeval__t.html#a744c01516c3a376cb67bfa8a0a3d0900">timeval_t::tval</a></div><div class="ttdeci">struct timeval_t::@10 tval</div></div>
<div class="ttc" id="uniontimeval__t_html_a9c6a9d36de22b39f398f77325ee07539"><div class="ttname"><a href="uniontimeval__t.html#a9c6a9d36de22b39f398f77325ee07539">timeval_t::sec</a></div><div class="ttdeci">s32 sec</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00056">sw_timer.h:56</a></div></div>
<div class="ttc" id="uniontimeval__t_html_a85f38542a8fa84ce968e2297bf8f7487"><div class="ttname"><a href="uniontimeval__t.html#a85f38542a8fa84ce968e2297bf8f7487">timeval_t::nsec</a></div><div class="ttdeci">s32 nsec</div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8h_source.html#l00056">sw_timer.h:56</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2bef445ffa8cb61c179fcd5f70d4e2df"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int timeval_before </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="uniontimeval__t.html">timeval_t</a> *&#160;</td>
          <td class="paramname"><em>value1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="uniontimeval__t.html">timeval_t</a> *&#160;</td>
          <td class="paramname"><em>value2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks whether value 1 comes before value2 If yes returns 1 else returns 0. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">value1</td><td>Time value 1 </td></tr>
    <tr><td class="paramname">value2</td><td>Time value 2 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 - If value1 comes before value2 0 - If value2 comes before value1 </dd></dl>

<p>Definition at line <a class="el" href="sw__timer_8c_source.html#l00184">184</a> of file <a class="el" href="sw__timer_8c_source.html">sw_timer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;{</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="sw__timer_8c.html#a80a9cef76712fd40db49dba06813eb3f">timeval_after</a>(value1,value2))</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;}</div>
<div class="ttc" id="sw__timer_8c_html_a80a9cef76712fd40db49dba06813eb3f"><div class="ttname"><a href="sw__timer_8c.html#a80a9cef76712fd40db49dba06813eb3f">timeval_after</a></div><div class="ttdeci">int timeval_after(const timeval_t *value1, const timeval_t *value2)</div><div class="ttdoc">Checks whether value 1 comes after value2 If yes returns 1 else returns 0. </div><div class="ttdef"><b>Definition:</b> <a href="sw__timer_8c_source.html#l00159">sw_timer.c:159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a0c89d2e15ec3253dc8b4c3da918aa080"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structtimer__cpu__info.html">timer_cpu_info</a> <a class="el" href="structtimer__cpu__info.html">timer_cpu_info</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sw__timer_8c_source.html#l00039">39</a> of file <a class="el" href="sw__timer_8c_source.html">sw_timer.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat May 3 2014 13:35:45 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
