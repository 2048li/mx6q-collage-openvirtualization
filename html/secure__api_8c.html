<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>secure_api.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_6aeebb853ebd8c514e6186653c592c82.html">otzone</a></li><li class="navelem"><a class="el" href="dir_fb44076c8b62c63869cf8a830933e50d.html">src</a></li><li class="navelem"><a class="el" href="dir_ae72a19de923b7f4b595b906221fc8f6.html">core</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">secure_api.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="elf__loader_8h_source.html">elf_loader.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="sw__types_8h_source.html">sw_types.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="sw__debug_8h_source.html">sw_debug.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="sw__mem__functions_8h_source.html">sw_mem_functions.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="sw__string__functions_8h_source.html">sw_string_functions.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="cpu__data_8h_source.html">cpu_data.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="page__table_8h_source.html">page_table.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="secure__api_8h_source.html">secure_api.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="otz__common_8h_source.html">otz_common.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="otz__id_8h_source.html">otz_id.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="task_8h_source.html">task.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="elf__loader__app_8h_source.html">elf_loader_app.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="dispatcher__task_8h_source.html">dispatcher_task.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="echo__task_8h_source.html">echo_task.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="drm__task_8h_source.html">drm_task.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="crypto__task_8h_source.html">crypto_task.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="mutex__test__task_8h_source.html">mutex_test_task.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="cpu__mmu_8h_source.html">cpu_mmu.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="cpu_8h_source.html">cpu.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="virtual__keyboard__task_8h_source.html">virtual_keyboard_task.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="sw__syscall_8h_source.html">sw_syscall.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="unused_8h_source.html">unused.h</a>&gt;</code><br/>
</div>
<p><a href="secure__api_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aaa4b8adf40809cef80a99bf7ffc6bfa0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="secure__api_8c.html#aaa4b8adf40809cef80a99bf7ffc6bfa0">open_session_from_ns</a> (void *param)</td></tr>
<tr class="memdesc:aaa4b8adf40809cef80a99bf7ffc6bfa0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dispatcher command function to handle the Open session request from non-secure world.  <a href="#aaa4b8adf40809cef80a99bf7ffc6bfa0">More...</a><br/></td></tr>
<tr class="separator:aaa4b8adf40809cef80a99bf7ffc6bfa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e72a02ade28f959d9a7c86982a3b6c6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="secure__api_8c.html#a2e72a02ade28f959d9a7c86982a3b6c6">close_session_from_ns</a> (void *param)</td></tr>
<tr class="memdesc:a2e72a02ade28f959d9a7c86982a3b6c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dispatcher command function to handle the Close session request from non-secure world.  <a href="#a2e72a02ade28f959d9a7c86982a3b6c6">More...</a><br/></td></tr>
<tr class="separator:a2e72a02ade28f959d9a7c86982a3b6c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14068d1f0e3ae583b55fdae60b67dc4a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="secure__api_8c.html#a14068d1f0e3ae583b55fdae60b67dc4a">open_session_from_secure</a> (int svc_id, int *session_id)</td></tr>
<tr class="memdesc:a14068d1f0e3ae583b55fdae60b67dc4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open session request from secure application task.  <a href="#a14068d1f0e3ae583b55fdae60b67dc4a">More...</a><br/></td></tr>
<tr class="separator:a14068d1f0e3ae583b55fdae60b67dc4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a642950c4c6a9120136fed4774be3eeea"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="secure__api_8c.html#a642950c4c6a9120136fed4774be3eeea">close_session_from_secure</a> (int svc_id, int session_id)</td></tr>
<tr class="memdesc:a642950c4c6a9120136fed4774be3eeea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close session request which is got initiated from secure task.  <a href="#a642950c4c6a9120136fed4774be3eeea">More...</a><br/></td></tr>
<tr class="separator:a642950c4c6a9120136fed4774be3eeea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4e7d606b3dba5159d3c3a7a9f1d7511"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="secure__api_8c.html#ac4e7d606b3dba5159d3c3a7a9f1d7511">sa_create_entry_point</a> (int svc_id, <a class="el" href="structsa__config__t.html">sa_config_t</a> *psa_config)</td></tr>
<tr class="memdesc:ac4e7d606b3dba5159d3c3a7a9f1d7511"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invokes the init function of the service task.  <a href="#ac4e7d606b3dba5159d3c3a7a9f1d7511">More...</a><br/></td></tr>
<tr class="separator:ac4e7d606b3dba5159d3c3a7a9f1d7511"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90a30e0965553d5de2a7fc03b5cd1412"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="secure__api_8c.html#a90a30e0965553d5de2a7fc03b5cd1412">sa_destroy_entry_point</a> (int svc_id, void *<a class="el" href="fat32_8c.html#a40767ad71451f60885c01f28dd2a4b47">data</a>, int elf_flag)</td></tr>
<tr class="memdesc:a90a30e0965553d5de2a7fc03b5cd1412"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invokes the exit function of the service task.  <a href="#a90a30e0965553d5de2a7fc03b5cd1412">More...</a><br/></td></tr>
<tr class="separator:a90a30e0965553d5de2a7fc03b5cd1412"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af39d5aab76117e76cecf6d911cdaefb6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="secure__api_8c.html#af39d5aab76117e76cecf6d911cdaefb6">sa_open_session</a> (<a class="el" href="structsa__config__t.html">sa_config_t</a> *psa_config, void *session_context)</td></tr>
<tr class="memdesc:af39d5aab76117e76cecf6d911cdaefb6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open Session.  <a href="#af39d5aab76117e76cecf6d911cdaefb6">More...</a><br/></td></tr>
<tr class="separator:af39d5aab76117e76cecf6d911cdaefb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab005498bb644293762a2f577d0eb7eb3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="secure__api_8c.html#ab005498bb644293762a2f577d0eb7eb3">sa_close_session</a> (void *session_context)</td></tr>
<tr class="memdesc:ab005498bb644293762a2f577d0eb7eb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close Session.  <a href="#ab005498bb644293762a2f577d0eb7eb3">More...</a><br/></td></tr>
<tr class="separator:ab005498bb644293762a2f577d0eb7eb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7da7eccdc2978a23daa6327050f67771"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="secure__api_8c.html#a7da7eccdc2978a23daa6327050f67771">get_api_context</a> (int *svc_id, int *task_id, int *cmd_id, int *cmd_type)</td></tr>
<tr class="memdesc:a7da7eccdc2978a23daa6327050f67771"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to return the service id, session id and command id from the smc command parameter.  <a href="#a7da7eccdc2978a23daa6327050f67771">More...</a><br/></td></tr>
<tr class="separator:a7da7eccdc2978a23daa6327050f67771"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06ef145ca0003d92a7a5b503318c3a5c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="secure__api_8c.html#a06ef145ca0003d92a7a5b503318c3a5c">decode_data</a> (void *<a class="el" href="fat32_8c.html#a40767ad71451f60885c01f28dd2a4b47">data</a>, struct <a class="el" href="structotzc__encode__meta.html">otzc_encode_meta</a> *meta_data, int *type, int *offset, int *pos, int *mapped, void **out_data, int *out_len)</td></tr>
<tr class="memdesc:a06ef145ca0003d92a7a5b503318c3a5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to decode the data which got passed from non-secure world.  <a href="#a06ef145ca0003d92a7a5b503318c3a5c">More...</a><br/></td></tr>
<tr class="separator:a06ef145ca0003d92a7a5b503318c3a5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ac5322fa2810707415597d9f67fcf8d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="secure__api_8c.html#a3ac5322fa2810707415597d9f67fcf8d">EXPORT_SYMBOL</a> (<a class="el" href="secure__api_8c.html#a06ef145ca0003d92a7a5b503318c3a5c">decode_data</a>)</td></tr>
<tr class="separator:a3ac5322fa2810707415597d9f67fcf8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8f0513b045f36061fdeb940681a6824"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="secure__api_8c.html#af8f0513b045f36061fdeb940681a6824">decode_ipi_out_data</a> (void *<a class="el" href="fat32_8c.html#a40767ad71451f60885c01f28dd2a4b47">data</a>, struct <a class="el" href="structotzc__encode__meta.html">otzc_encode_meta</a> *meta_data, int *type, int *offset, int *pos, void **out_data, int *out_len)</td></tr>
<tr class="memdesc:af8f0513b045f36061fdeb940681a6824"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to decode the response data for IPI.  <a href="#af8f0513b045f36061fdeb940681a6824">More...</a><br/></td></tr>
<tr class="separator:af8f0513b045f36061fdeb940681a6824"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bd892045df93e29b38e8744cb151c6b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="secure__api_8c.html#a9bd892045df93e29b38e8744cb151c6b">update_response_len</a> (struct <a class="el" href="structotzc__encode__meta.html">otzc_encode_meta</a> *meta_data, int pos, int len)</td></tr>
<tr class="memdesc:a9bd892045df93e29b38e8744cb151c6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to update the response length.  <a href="#a9bd892045df93e29b38e8744cb151c6b">More...</a><br/></td></tr>
<tr class="separator:a9bd892045df93e29b38e8744cb151c6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ede7347c25ddffa7a3524d9f5df5d96"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="secure__api_8c.html#a5ede7347c25ddffa7a3524d9f5df5d96">EXPORT_SYMBOL</a> (<a class="el" href="secure__api_8c.html#a9bd892045df93e29b38e8744cb151c6b">update_response_len</a>)</td></tr>
<tr class="separator:a5ede7347c25ddffa7a3524d9f5df5d96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf1c653d9a96132b4c7b150420aedc2f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="secure__api_8c.html#adf1c653d9a96132b4c7b150420aedc2f">otz_encode_data</a> (struct <a class="el" href="structotz__secure__encode__cmd.html">otz_secure_encode_cmd</a> *enc, struct <a class="el" href="structotzc__encode__meta.html">otzc_encode_meta</a> **pmeta_data, struct <a class="el" href="structotz__secure__encode__ctx.html">otz_secure_encode_ctx</a> **penc_context, int encode_type)</td></tr>
<tr class="memdesc:adf1c653d9a96132b4c7b150420aedc2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to encode the data which originate from secure application.  <a href="#adf1c653d9a96132b4c7b150420aedc2f">More...</a><br/></td></tr>
<tr class="separator:adf1c653d9a96132b4c7b150420aedc2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeac54a699cee6c80d67865a35ce71752"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="secure__api_8c.html#aeac54a699cee6c80d67865a35ce71752">otz_release_data</a> (struct <a class="el" href="structotz__secure__encode__ctx.html">otz_secure_encode_ctx</a> *enc_context, struct <a class="el" href="structotzc__encode__meta.html">otzc_encode_meta</a> *meta_data)</td></tr>
<tr class="memdesc:aeac54a699cee6c80d67865a35ce71752"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release the encoded data.  <a href="#aeac54a699cee6c80d67865a35ce71752">More...</a><br/></td></tr>
<tr class="separator:aeac54a699cee6c80d67865a35ce71752"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1087c61b30162b1eb3d53ea9aac5b31"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="secure__api_8c.html#ad1087c61b30162b1eb3d53ea9aac5b31">ipc_connect</a> (int svc_id, int *session_id)</td></tr>
<tr class="memdesc:ad1087c61b30162b1eb3d53ea9aac5b31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Establish session between two tasks.  <a href="#ad1087c61b30162b1eb3d53ea9aac5b31">More...</a><br/></td></tr>
<tr class="separator:ad1087c61b30162b1eb3d53ea9aac5b31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cbece2e460aa22770a15b50da729e7f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="secure__api_8c.html#a5cbece2e460aa22770a15b50da729e7f">ipc_disconnect</a> (int svc_id, int session_id)</td></tr>
<tr class="memdesc:a5cbece2e460aa22770a15b50da729e7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disconnect the previously established session between two tasks.  <a href="#a5cbece2e460aa22770a15b50da729e7f">More...</a><br/></td></tr>
<tr class="separator:a5cbece2e460aa22770a15b50da729e7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c2660a9763c58ac43854d69d87ed435"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="secure__api_8c.html#a9c2660a9763c58ac43854d69d87ed435">ipc_send</a> (int src_svc_id, int src_context, int svc_id, int session_id, int cmd_id, struct <a class="el" href="structotz__secure__encode__ctx.html">otz_secure_encode_ctx</a> *enc_ctx, struct <a class="el" href="structotzc__encode__meta.html">otzc_encode_meta</a> *meta_data)</td></tr>
<tr class="memdesc:a9c2660a9763c58ac43854d69d87ed435"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send the data between two tasks.  <a href="#a9c2660a9763c58ac43854d69d87ed435">More...</a><br/></td></tr>
<tr class="separator:a9c2660a9763c58ac43854d69d87ed435"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c4a917abcf6dcc2ac7153df6ba0f8bc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="secure__api_8c.html#a7c4a917abcf6dcc2ac7153df6ba0f8bc">ipc_api</a> (int src_svc_id, int src_session_id, int target_svc_id, int target_cmd_id, void *req_buf, int req_buf_len, void *res_buf, int res_buf_len, int *ret_res_buf_len)</td></tr>
<tr class="memdesc:a7c4a917abcf6dcc2ac7153df6ba0f8bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to send the data between two tasks for single request and single response buffer.  <a href="#a7c4a917abcf6dcc2ac7153df6ba0f8bc">More...</a><br/></td></tr>
<tr class="separator:a7c4a917abcf6dcc2ac7153df6ba0f8bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89a0b95e0f4f917575c88b224252875e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="secure__api_8c.html#a89a0b95e0f4f917575c88b224252875e">ipc_test_crypto</a> (int src_svc_id, int src_session_id)</td></tr>
<tr class="memdesc:a89a0b95e0f4f917575c88b224252875e"><td class="mdescLeft">&#160;</td><td class="mdescRight">: Test IPC command for crypto operation  <a href="#a89a0b95e0f4f917575c88b224252875e">More...</a><br/></td></tr>
<tr class="separator:a89a0b95e0f4f917575c88b224252875e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fed76f3db2128740b11375c0e6e3441"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="secure__api_8c.html#a8fed76f3db2128740b11375c0e6e3441">ipc_test_echo</a> (int src_svc_id, int src_session_id)</td></tr>
<tr class="memdesc:a8fed76f3db2128740b11375c0e6e3441"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test IPC command for echo operation.  <a href="#a8fed76f3db2128740b11375c0e6e3441">More...</a><br/></td></tr>
<tr class="separator:a8fed76f3db2128740b11375c0e6e3441"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac096f6a930db56c0b4b2e467cf9b6e03"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="secure__api_8c.html#ac096f6a930db56c0b4b2e467cf9b6e03">EXPORT_SYMBOL</a> (<a class="el" href="secure__api_8c.html#a8fed76f3db2128740b11375c0e6e3441">ipc_test_echo</a>)</td></tr>
<tr class="separator:ac096f6a930db56c0b4b2e467cf9b6e03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a885e01bc2776574f654df4b1b2f18302"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="secure__api_8c.html#a885e01bc2776574f654df4b1b2f18302">handle_task_return</a> (int task_id, <a class="el" href="structsw__tls.html">sw_tls</a> *tls)</td></tr>
<tr class="memdesc:a885e01bc2776574f654df4b1b2f18302"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to handle the task return.  <a href="#a885e01bc2776574f654df4b1b2f18302">More...</a><br/></td></tr>
<tr class="separator:a885e01bc2776574f654df4b1b2f18302"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5160020dec9de5e5cd17a123d313ba00"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="secure__api_8c.html#a5160020dec9de5e5cd17a123d313ba00">EXPORT_SYMBOL</a> (<a class="el" href="secure__api_8c.html#a885e01bc2776574f654df4b1b2f18302">handle_task_return</a>)</td></tr>
<tr class="separator:a5160020dec9de5e5cd17a123d313ba00"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a2e72a02ade28f959d9a7c86982a3b6c6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int close_session_from_ns </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>param</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dispatcher command function to handle the Close session request from non-secure world. </p>
<p>This function invokes the close session API and its get called from dispatcher task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">param</td><td>pointer to struct <a class="el" href="structotz__smc__cmd.html" title="SMC command structure. ">otz_smc_cmd</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>otz_return_t: OTZ_OK - Session established successfully<br/>
OTZ_* - An implementation-defined error code for any other error.<br/>
</dd></dl>

<p>Definition at line <a class="el" href="secure__api_8c_source.html#l00142">142</a> of file <a class="el" href="secure__api_8c_source.html">secure_api.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;{</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="keywordtype">int</span> ret_val;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordtype">int</span> *svc_id = <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <a class="code" href="sw__types_8h.html#a009592c6ee2118c3c17cfb90f22efde3">pa_t</a> cmd_phy;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="keyword">struct </span><a class="code" href="structotz__smc__cmd.html">otz_smc_cmd</a> *cmd = <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="keywordtype">void</span> *session_context = <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <a class="code" href="structsw__tls.html">sw_tls</a> *tls;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        cmd_phy = (<a class="code" href="sw__types_8h.html#a009592c6ee2118c3c17cfb90f22efde3">pa_t</a>) param;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="page__table_8h.html#a5fc63d641c4d938c6bcf4768203afffe">map_to_ns</a>(cmd_phy, (<a class="code" href="sw__types_8h.html#a8a8f44dda695920b3f7210c1c28ff23b">va_t</a>*) &amp;cmd)) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                ret_val = <a class="code" href="sw__types_8h.html#a0e40f13f8595fceec45f6f8a0c35cf7c">OTZ_ENOMEM</a>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                <span class="keywordflow">goto</span> ret_func;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="keywordflow">if</span>(cmd-&gt;<a class="code" href="structotz__smc__cmd.html#a425aa2252caa3208fd4d96fedeeb68be">req_buf_len</a> == 0) {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                ret_val = <a class="code" href="sw__types_8h.html#ade5dde89d25481cc2f1ebe77a8d0d85b">OTZ_EFAIL</a>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                <span class="keywordflow">goto</span> ret_func;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="page__table_8h.html#a5fc63d641c4d938c6bcf4768203afffe">map_to_ns</a>(cmd-&gt;<a class="code" href="structotz__smc__cmd.html#a2b2fe0686ca90f3d4a1b7ff5a36972da">req_buf_phys</a>, (<a class="code" href="sw__types_8h.html#a8a8f44dda695920b3f7210c1c28ff23b">va_t</a>*)&amp;svc_id) != 0) {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                ret_val = <a class="code" href="sw__types_8h.html#a0e40f13f8595fceec45f6f8a0c35cf7c">OTZ_ENOMEM</a>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                <span class="keywordflow">goto</span> ret_func;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="page__table_8h.html#a5fc63d641c4d938c6bcf4768203afffe">map_to_ns</a>(cmd-&gt;<a class="code" href="structotz__smc__cmd.html#a46df7a184130350e3ea4492f60517a2d">resp_buf_phys</a>, (<a class="code" href="sw__types_8h.html#a8a8f44dda695920b3f7210c1c28ff23b">va_t</a>*)&amp;session_context) != 0) {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                ret_val = <a class="code" href="sw__types_8h.html#a0e40f13f8595fceec45f6f8a0c35cf7c">OTZ_ENOMEM</a>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                <span class="keywordflow">goto</span> ret_func;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        }</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        tls = <a class="code" href="task_8h.html#a907dd681ca27bfa3e3f7fe503f2b931b">get_task_tls</a>(*((<a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>*)session_context));</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <a class="code" href="secure__api_8c.html#a90a30e0965553d5de2a7fc03b5cd1412">sa_destroy_entry_point</a>(*svc_id, tls-&gt;<a class="code" href="structsw__tls.html#a526fc8f2513d096197f56576c5cd0869">private_data</a>,tls-&gt;<a class="code" href="structsw__tls.html#aac344a62cf2cfe96650af27176c2a66c">elf_flag</a>);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <a class="code" href="secure__api_8c.html#ab005498bb644293762a2f577d0eb7eb3">sa_close_session</a>(session_context);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        cmd-&gt;<a class="code" href="structotz__smc__cmd.html#af7d2eb383125d6902dd2c47f827ef689">cmd_status</a> = <a class="code" href="otz__common_8h.html#abd4c55771a07a0fe1a3d212cbc96f030abe1b9c787ad33e4a1faf1a8c06ac3f1d">OTZ_STATUS_COMPLETE</a>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;ret_func:</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keywordflow">if</span>(svc_id)</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                <a class="code" href="page__table_8h.html#aca3f6249157b4ed2c5c62e862bde4eee">unmap_from_ns</a>((<a class="code" href="sw__types_8h.html#a8a8f44dda695920b3f7210c1c28ff23b">va_t</a>)svc_id);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">if</span>(session_context)</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                <a class="code" href="page__table_8h.html#aca3f6249157b4ed2c5c62e862bde4eee">unmap_from_ns</a>((<a class="code" href="sw__types_8h.html#a8a8f44dda695920b3f7210c1c28ff23b">va_t</a>)session_context);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keywordflow">if</span>(cmd)</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                <a class="code" href="page__table_8h.html#aca3f6249157b4ed2c5c62e862bde4eee">unmap_from_ns</a>((<a class="code" href="sw__types_8h.html#a8a8f44dda695920b3f7210c1c28ff23b">va_t</a>)cmd);    </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="keywordflow">return</span> ret_val;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;}</div>
<div class="ttc" id="sw__types_8h_html_a8a8f44dda695920b3f7210c1c28ff23b"><div class="ttname"><a href="sw__types_8h.html#a8a8f44dda695920b3f7210c1c28ff23b">va_t</a></div><div class="ttdeci">u32 va_t</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00084">sw_types.h:84</a></div></div>
<div class="ttc" id="structsw__tls_html"><div class="ttname"><a href="structsw__tls.html">sw_tls</a></div><div class="ttdoc">Task local storage. </div><div class="ttdef"><b>Definition:</b> <a href="task_8h_source.html#l00077">task.h:77</a></div></div>
<div class="ttc" id="secure__api_8c_html_ab005498bb644293762a2f577d0eb7eb3"><div class="ttname"><a href="secure__api_8c.html#ab005498bb644293762a2f577d0eb7eb3">sa_close_session</a></div><div class="ttdeci">int sa_close_session(void *session_context)</div><div class="ttdoc">Close Session. </div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8c_source.html#l00395">secure_api.c:395</a></div></div>
<div class="ttc" id="structsw__tls_html_a526fc8f2513d096197f56576c5cd0869"><div class="ttname"><a href="structsw__tls.html#a526fc8f2513d096197f56576c5cd0869">sw_tls::private_data</a></div><div class="ttdeci">void * private_data</div><div class="ttdef"><b>Definition:</b> <a href="task_8h_source.html#l00092">task.h:92</a></div></div>
<div class="ttc" id="structotz__smc__cmd_html_a46df7a184130350e3ea4492f60517a2d"><div class="ttname"><a href="structotz__smc__cmd.html#a46df7a184130350e3ea4492f60517a2d">otz_smc_cmd::resp_buf_phys</a></div><div class="ttdeci">unsigned int resp_buf_phys</div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00114">otz_common.h:114</a></div></div>
<div class="ttc" id="page__table_8h_html_a5fc63d641c4d938c6bcf4768203afffe"><div class="ttname"><a href="page__table_8h.html#a5fc63d641c4d938c6bcf4768203afffe">map_to_ns</a></div><div class="ttdeci">int map_to_ns(pa_t phy_addr, va_t *va_addr)</div><div class="ttdoc">Wrapper function for __map_to_ns. </div><div class="ttdef"><b>Definition:</b> <a href="page__table_8c_source.html#l00159">page_table.c:159</a></div></div>
<div class="ttc" id="sw__types_8h_html_ade5dde89d25481cc2f1ebe77a8d0d85b"><div class="ttname"><a href="sw__types_8h.html#ade5dde89d25481cc2f1ebe77a8d0d85b">OTZ_EFAIL</a></div><div class="ttdeci">#define OTZ_EFAIL</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00044">sw_types.h:44</a></div></div>
<div class="ttc" id="structotz__smc__cmd_html"><div class="ttname"><a href="structotz__smc__cmd.html">otz_smc_cmd</a></div><div class="ttdoc">SMC command structure. </div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00101">otz_common.h:101</a></div></div>
<div class="ttc" id="sw__types_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00039">sw_types.h:39</a></div></div>
<div class="ttc" id="task_8h_html_a907dd681ca27bfa3e3f7fe503f2b931b"><div class="ttname"><a href="task_8h.html#a907dd681ca27bfa3e3f7fe503f2b931b">get_task_tls</a></div><div class="ttdeci">sw_tls * get_task_tls(int task_id)</div><div class="ttdoc">Get task local storage. </div><div class="ttdef"><b>Definition:</b> <a href="task_8c_source.html#l00386">task.c:386</a></div></div>
<div class="ttc" id="structotz__smc__cmd_html_a425aa2252caa3208fd4d96fedeeb68be"><div class="ttname"><a href="structotz__smc__cmd.html#a425aa2252caa3208fd4d96fedeeb68be">otz_smc_cmd::req_buf_len</a></div><div class="ttdeci">unsigned int req_buf_len</div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00109">otz_common.h:109</a></div></div>
<div class="ttc" id="page__table_8h_html_aca3f6249157b4ed2c5c62e862bde4eee"><div class="ttname"><a href="page__table_8h.html#aca3f6249157b4ed2c5c62e862bde4eee">unmap_from_ns</a></div><div class="ttdeci">int unmap_from_ns(va_t va_addr)</div><div class="ttdoc">Wrapper function for __unmap_from_ns. </div><div class="ttdef"><b>Definition:</b> <a href="page__table_8c_source.html#l00739">page_table.c:739</a></div></div>
<div class="ttc" id="secure__api_8c_html_a90a30e0965553d5de2a7fc03b5cd1412"><div class="ttname"><a href="secure__api_8c.html#a90a30e0965553d5de2a7fc03b5cd1412">sa_destroy_entry_point</a></div><div class="ttdeci">int sa_destroy_entry_point(int svc_id, void *data, int elf_flag)</div><div class="ttdoc">Invokes the exit function of the service task. </div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8c_source.html#l00324">secure_api.c:324</a></div></div>
<div class="ttc" id="sw__types_8h_html_a10e94b422ef0c20dcdec20d31a1f5049"><div class="ttname"><a href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a></div><div class="ttdeci">unsigned int u32</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00061">sw_types.h:61</a></div></div>
<div class="ttc" id="structotz__smc__cmd_html_a2b2fe0686ca90f3d4a1b7ff5a36972da"><div class="ttname"><a href="structotz__smc__cmd.html#a2b2fe0686ca90f3d4a1b7ff5a36972da">otz_smc_cmd::req_buf_phys</a></div><div class="ttdeci">unsigned int req_buf_phys</div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00113">otz_common.h:113</a></div></div>
<div class="ttc" id="otz__common_8h_html_abd4c55771a07a0fe1a3d212cbc96f030abe1b9c787ad33e4a1faf1a8c06ac3f1d"><div class="ttname"><a href="otz__common_8h.html#abd4c55771a07a0fe1a3d212cbc96f030abe1b9c787ad33e4a1faf1a8c06ac3f1d">OTZ_STATUS_COMPLETE</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00054">otz_common.h:54</a></div></div>
<div class="ttc" id="sw__types_8h_html_a009592c6ee2118c3c17cfb90f22efde3"><div class="ttname"><a href="sw__types_8h.html#a009592c6ee2118c3c17cfb90f22efde3">pa_t</a></div><div class="ttdeci">u32 pa_t</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00083">sw_types.h:83</a></div></div>
<div class="ttc" id="structotz__smc__cmd_html_af7d2eb383125d6902dd2c47f827ef689"><div class="ttname"><a href="structotz__smc__cmd.html#af7d2eb383125d6902dd2c47f827ef689">otz_smc_cmd::cmd_status</a></div><div class="ttdeci">unsigned int cmd_status</div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00112">otz_common.h:112</a></div></div>
<div class="ttc" id="sw__types_8h_html_a0e40f13f8595fceec45f6f8a0c35cf7c"><div class="ttname"><a href="sw__types_8h.html#a0e40f13f8595fceec45f6f8a0c35cf7c">OTZ_ENOMEM</a></div><div class="ttdeci">#define OTZ_ENOMEM</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00045">sw_types.h:45</a></div></div>
<div class="ttc" id="structsw__tls_html_aac344a62cf2cfe96650af27176c2a66c"><div class="ttname"><a href="structsw__tls.html#aac344a62cf2cfe96650af27176c2a66c">sw_tls::elf_flag</a></div><div class="ttdeci">int elf_flag</div><div class="ttdef"><b>Definition:</b> <a href="task_8h_source.html#l00086">task.h:86</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a642950c4c6a9120136fed4774be3eeea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int close_session_from_secure </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>svc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>session_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close session request which is got initiated from secure task. </p>
<p>This function invokes the close session API and its get called from secure application task. This is to close the request from secure application, either for IPI or secure to non-secure world communication.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">svc_id</td><td>Service ID </td></tr>
    <tr><td class="paramname">session_id</td><td>Session ID</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>otz_return_t: OTZ_OK - Session established successfully<br/>
OTZ_* - An implementation-defined error code for any other error.<br/>
</dd></dl>

<p>Definition at line <a class="el" href="secure__api_8c_source.html#l00249">249</a> of file <a class="el" href="secure__api_8c_source.html">secure_api.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;{</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <a class="code" href="structsw__tls.html">sw_tls</a> *tls;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        tls = <a class="code" href="task_8h.html#a907dd681ca27bfa3e3f7fe503f2b931b">get_task_tls</a>(session_id);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <a class="code" href="secure__api_8c.html#a90a30e0965553d5de2a7fc03b5cd1412">sa_destroy_entry_point</a>(svc_id, tls-&gt;<a class="code" href="structsw__tls.html#a526fc8f2513d096197f56576c5cd0869">private_data</a>,tls-&gt;<a class="code" href="structsw__tls.html#aac344a62cf2cfe96650af27176c2a66c">elf_flag</a>);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <a class="code" href="secure__api_8c.html#ab005498bb644293762a2f577d0eb7eb3">sa_close_session</a>((<span class="keywordtype">void</span>*)&amp;session_id);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;}</div>
<div class="ttc" id="structsw__tls_html"><div class="ttname"><a href="structsw__tls.html">sw_tls</a></div><div class="ttdoc">Task local storage. </div><div class="ttdef"><b>Definition:</b> <a href="task_8h_source.html#l00077">task.h:77</a></div></div>
<div class="ttc" id="secure__api_8c_html_ab005498bb644293762a2f577d0eb7eb3"><div class="ttname"><a href="secure__api_8c.html#ab005498bb644293762a2f577d0eb7eb3">sa_close_session</a></div><div class="ttdeci">int sa_close_session(void *session_context)</div><div class="ttdoc">Close Session. </div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8c_source.html#l00395">secure_api.c:395</a></div></div>
<div class="ttc" id="structsw__tls_html_a526fc8f2513d096197f56576c5cd0869"><div class="ttname"><a href="structsw__tls.html#a526fc8f2513d096197f56576c5cd0869">sw_tls::private_data</a></div><div class="ttdeci">void * private_data</div><div class="ttdef"><b>Definition:</b> <a href="task_8h_source.html#l00092">task.h:92</a></div></div>
<div class="ttc" id="sw__semaphores_8h_html_aad472a601abac5aab18d6afddeab7de5"><div class="ttname"><a href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a></div><div class="ttdeci">#define OTZ_OK</div><div class="ttdef"><b>Definition:</b> <a href="sw__semaphores_8h_source.html#l00038">sw_semaphores.h:38</a></div></div>
<div class="ttc" id="task_8h_html_a907dd681ca27bfa3e3f7fe503f2b931b"><div class="ttname"><a href="task_8h.html#a907dd681ca27bfa3e3f7fe503f2b931b">get_task_tls</a></div><div class="ttdeci">sw_tls * get_task_tls(int task_id)</div><div class="ttdoc">Get task local storage. </div><div class="ttdef"><b>Definition:</b> <a href="task_8c_source.html#l00386">task.c:386</a></div></div>
<div class="ttc" id="secure__api_8c_html_a90a30e0965553d5de2a7fc03b5cd1412"><div class="ttname"><a href="secure__api_8c.html#a90a30e0965553d5de2a7fc03b5cd1412">sa_destroy_entry_point</a></div><div class="ttdeci">int sa_destroy_entry_point(int svc_id, void *data, int elf_flag)</div><div class="ttdoc">Invokes the exit function of the service task. </div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8c_source.html#l00324">secure_api.c:324</a></div></div>
<div class="ttc" id="structsw__tls_html_aac344a62cf2cfe96650af27176c2a66c"><div class="ttname"><a href="structsw__tls.html#aac344a62cf2cfe96650af27176c2a66c">sw_tls::elf_flag</a></div><div class="ttdeci">int elf_flag</div><div class="ttdef"><b>Definition:</b> <a href="task_8h_source.html#l00086">task.h:86</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a06ef145ca0003d92a7a5b503318c3a5c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int decode_data </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structotzc__encode__meta.html">otzc_encode_meta</a> *&#160;</td>
          <td class="paramname"><em>meta_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>mapped</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>out_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>out_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper function to decode the data which got passed from non-secure world. </p>
<p>This helper function decodes the data which got encoded from non-secure or secure application.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Encoded data </td></tr>
    <tr><td class="paramname">meta_data</td><td>Meta data helps to identify the encoded data </td></tr>
    <tr><td class="paramname">type</td><td>Data type of the decoded data as output parameter </td></tr>
    <tr><td class="paramname">offset</td><td>Current offset as input parameter and Next offset as output parameter </td></tr>
    <tr><td class="paramname">pos</td><td>Current position as input parameter and Next position as output parameter </td></tr>
    <tr><td class="paramname">mapped</td><td>Decoded data is shared memory or not as output parameter </td></tr>
    <tr><td class="paramname">out_data</td><td>Decoded data as output parameter </td></tr>
    <tr><td class="paramname">out_len</td><td>Decoded data length as output parameter</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>otz_return_t: OTZ_OK - Decoded data successfully<br/>
OTZ_* - An implementation-defined error code for any other error.<br/>
</dd></dl>

<p>Definition at line <a class="el" href="secure__api_8c_source.html#l00474">474</a> of file <a class="el" href="secure__api_8c_source.html">secure_api.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;{</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="keywordtype">int</span> ret = 0;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <span class="keywordtype">int</span> temp_offset = *offset, temp_pos = *pos;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        *mapped = 0;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <span class="keywordflow">switch</span>(meta_data[temp_pos].type) {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beacafbe80d88442cff08f386a74daf8bb9c8">OTZ_ENC_UINT32</a>: {</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                                             *offset = temp_offset + <span class="keyword">sizeof</span>(<a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                                             *pos = temp_pos + 1;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                                             *type = <a class="code" href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beacafbe80d88442cff08f386a74daf8bb9c8">OTZ_ENC_UINT32</a>;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                                             *out_data = (<span class="keywordtype">char</span>*)<a class="code" href="fat32_8c.html#a40767ad71451f60885c01f28dd2a4b47">data</a> + temp_offset;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                                             *out_len =  meta_data[temp_pos].<a class="code" href="structotzc__encode__meta.html#a9ed5f89cd7e766cfbcc92af753e13a8b">len</a>;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                                             <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                                     }</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beaca5ecfa72c778a2f9613acbfe530866856">OTZ_ENC_ARRAY</a>: {</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                                            *offset = temp_offset + meta_data[temp_pos].<a class="code" href="structotzc__encode__meta.html#a9ed5f89cd7e766cfbcc92af753e13a8b">len</a>;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                                            *pos = temp_pos + 1;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                                            *type = <a class="code" href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beaca5ecfa72c778a2f9613acbfe530866856">OTZ_ENC_ARRAY</a>;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                                            *out_data = (<span class="keywordtype">char</span>*)<a class="code" href="fat32_8c.html#a40767ad71451f60885c01f28dd2a4b47">data</a> + temp_offset;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                                            *out_len =  meta_data[temp_pos].<a class="code" href="structotzc__encode__meta.html#a9ed5f89cd7e766cfbcc92af753e13a8b">len</a>;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                                    }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beaca12d03340e4613f9875953e9a2ea969f5">OTZ_MEM_REF</a>: {</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                                          <span class="keywordflow">if</span>(<a class="code" href="page__table_8h.html#a5fc63d641c4d938c6bcf4768203afffe">map_to_ns</a>((<a class="code" href="sw__types_8h.html#a009592c6ee2118c3c17cfb90f22efde3">pa_t</a>)(*((<a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>*)<a class="code" href="fat32_8c.html#a40767ad71451f60885c01f28dd2a4b47">data</a> + temp_offset)), (<a class="code" href="sw__types_8h.html#a8a8f44dda695920b3f7210c1c28ff23b">va_t</a>*)out_data) != 0)</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                                                  <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                                          *offset = temp_offset + <span class="keyword">sizeof</span>(<a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                                          *type = <a class="code" href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beaca12d03340e4613f9875953e9a2ea969f5">OTZ_MEM_REF</a>;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                                          *pos = temp_pos + 1;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                                          *mapped = 1;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                                          *out_len =  meta_data[temp_pos].<a class="code" href="structotzc__encode__meta.html#a9ed5f89cd7e766cfbcc92af753e13a8b">len</a>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                                          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                                  }</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beaca96c21c8682cab91130f619cb860602ed">OTZ_SECURE_MEM_REF</a>: {</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                                                 *out_data = (<span class="keywordtype">void</span>*)(*((<a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>*)<a class="code" href="fat32_8c.html#a40767ad71451f60885c01f28dd2a4b47">data</a> + temp_offset));</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                                                 *offset = temp_offset + <span class="keyword">sizeof</span>(<a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                                                 *type = <a class="code" href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beaca12d03340e4613f9875953e9a2ea969f5">OTZ_MEM_REF</a>;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                                                 *pos = temp_pos + 1;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                                                 *mapped = 0;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                                                 *out_len =  meta_data[temp_pos].<a class="code" href="structotzc__encode__meta.html#a9ed5f89cd7e766cfbcc92af753e13a8b">len</a>;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                                                 <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                                         }</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                                         ret = -1;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                                         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        }</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;}</div>
<div class="ttc" id="sw__types_8h_html_a8a8f44dda695920b3f7210c1c28ff23b"><div class="ttname"><a href="sw__types_8h.html#a8a8f44dda695920b3f7210c1c28ff23b">va_t</a></div><div class="ttdeci">u32 va_t</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00084">sw_types.h:84</a></div></div>
<div class="ttc" id="structotzc__encode__meta_html_a9ed5f89cd7e766cfbcc92af753e13a8b"><div class="ttname"><a href="structotzc__encode__meta.html#a9ed5f89cd7e766cfbcc92af753e13a8b">otzc_encode_meta::len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00093">otz_common.h:93</a></div></div>
<div class="ttc" id="page__table_8h_html_a5fc63d641c4d938c6bcf4768203afffe"><div class="ttname"><a href="page__table_8h.html#a5fc63d641c4d938c6bcf4768203afffe">map_to_ns</a></div><div class="ttdeci">int map_to_ns(pa_t phy_addr, va_t *va_addr)</div><div class="ttdoc">Wrapper function for __map_to_ns. </div><div class="ttdef"><b>Definition:</b> <a href="page__table_8c_source.html#l00159">page_table.c:159</a></div></div>
<div class="ttc" id="otz__id_8h_html_a3d6ef0f9d032e84e0b1cb1d4abc9beaca12d03340e4613f9875953e9a2ea969f5"><div class="ttname"><a href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beaca12d03340e4613f9875953e9a2ea969f5">OTZ_MEM_REF</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00044">otz_id.h:44</a></div></div>
<div class="ttc" id="otz__id_8h_html_a3d6ef0f9d032e84e0b1cb1d4abc9beacafbe80d88442cff08f386a74daf8bb9c8"><div class="ttname"><a href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beacafbe80d88442cff08f386a74daf8bb9c8">OTZ_ENC_UINT32</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00042">otz_id.h:42</a></div></div>
<div class="ttc" id="fat32_8c_html_a40767ad71451f60885c01f28dd2a4b47"><div class="ttname"><a href="fat32_8c.html#a40767ad71451f60885c01f28dd2a4b47">data</a></div><div class="ttdeci">u8 * data</div><div class="ttdef"><b>Definition:</b> <a href="fat32_8c_source.html#l00038">fat32.c:38</a></div></div>
<div class="ttc" id="sw__types_8h_html_a10e94b422ef0c20dcdec20d31a1f5049"><div class="ttname"><a href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a></div><div class="ttdeci">unsigned int u32</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00061">sw_types.h:61</a></div></div>
<div class="ttc" id="otz__id_8h_html_a3d6ef0f9d032e84e0b1cb1d4abc9beaca96c21c8682cab91130f619cb860602ed"><div class="ttname"><a href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beaca96c21c8682cab91130f619cb860602ed">OTZ_SECURE_MEM_REF</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00045">otz_id.h:45</a></div></div>
<div class="ttc" id="sw__types_8h_html_a009592c6ee2118c3c17cfb90f22efde3"><div class="ttname"><a href="sw__types_8h.html#a009592c6ee2118c3c17cfb90f22efde3">pa_t</a></div><div class="ttdeci">u32 pa_t</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00083">sw_types.h:83</a></div></div>
<div class="ttc" id="otz__id_8h_html_a3d6ef0f9d032e84e0b1cb1d4abc9beaca5ecfa72c778a2f9613acbfe530866856"><div class="ttname"><a href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beaca5ecfa72c778a2f9613acbfe530866856">OTZ_ENC_ARRAY</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00043">otz_id.h:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af8f0513b045f36061fdeb940681a6824"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int decode_ipi_out_data </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structotzc__encode__meta.html">otzc_encode_meta</a> *&#160;</td>
          <td class="paramname"><em>meta_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>out_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>out_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper function to decode the response data for IPI. </p>
<p>This helper function decodes the data which got returned from target secure application.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Encoded data </td></tr>
    <tr><td class="paramname">meta_data</td><td>Meta data helps to identify the encoded data </td></tr>
    <tr><td class="paramname">type</td><td>Data type of the decoded data as output parameter </td></tr>
    <tr><td class="paramname">offset</td><td>Current offset as input parameter and Next offset as output parameter </td></tr>
    <tr><td class="paramname">pos</td><td>Current position as input parameter and Next position as output parameter </td></tr>
    <tr><td class="paramname">out_data</td><td>Decoded data as output parameter </td></tr>
    <tr><td class="paramname">out_len</td><td>Decoded data length as output parameter</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>otz_return_t: OTZ_OK - Decoded data successfully<br/>
OTZ_* - An implementation-defined error code for any other error.<br/>
</dd></dl>

<p>Definition at line <a class="el" href="secure__api_8c_source.html#l00547">547</a> of file <a class="el" href="secure__api_8c_source.html">secure_api.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;{</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <span class="keywordtype">int</span> ret = 0;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <span class="keywordtype">int</span> temp_offset = *offset, temp_pos = *pos;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <span class="keywordflow">switch</span>(meta_data[temp_pos].type) {</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beacafbe80d88442cff08f386a74daf8bb9c8">OTZ_ENC_UINT32</a>: {</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                                             *offset = temp_offset + <span class="keyword">sizeof</span>(<a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                                             *pos = temp_pos + 1;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                                             *type = <a class="code" href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beacafbe80d88442cff08f386a74daf8bb9c8">OTZ_ENC_UINT32</a>;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                                             *out_data = (<span class="keywordtype">char</span>*)<a class="code" href="fat32_8c.html#a40767ad71451f60885c01f28dd2a4b47">data</a> + temp_offset;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                                             *out_len =  meta_data[temp_pos].<a class="code" href="structotzc__encode__meta.html#a9ed5f89cd7e766cfbcc92af753e13a8b">len</a>;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                                             <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                                     }</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beaca96c21c8682cab91130f619cb860602ed">OTZ_SECURE_MEM_REF</a>: {</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                                                 *out_data = (<span class="keywordtype">void</span>*)(*((<a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>*)<a class="code" href="fat32_8c.html#a40767ad71451f60885c01f28dd2a4b47">data</a> + temp_offset));</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                                                 *offset = temp_offset + <span class="keyword">sizeof</span>(<a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                                                 *type = <a class="code" href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beaca12d03340e4613f9875953e9a2ea969f5">OTZ_MEM_REF</a>;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                                                 *pos = temp_pos + 1;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                                                 *out_len =  meta_data[temp_pos].<a class="code" href="structotzc__encode__meta.html#a2962366827a8abcb92fb657cbd232fb1">ret_len</a>;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                                                 <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                                         }</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                                         ret = -1;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                                         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        }</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;}</div>
<div class="ttc" id="structotzc__encode__meta_html_a9ed5f89cd7e766cfbcc92af753e13a8b"><div class="ttname"><a href="structotzc__encode__meta.html#a9ed5f89cd7e766cfbcc92af753e13a8b">otzc_encode_meta::len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00093">otz_common.h:93</a></div></div>
<div class="ttc" id="structotzc__encode__meta_html_a2962366827a8abcb92fb657cbd232fb1"><div class="ttname"><a href="structotzc__encode__meta.html#a2962366827a8abcb92fb657cbd232fb1">otzc_encode_meta::ret_len</a></div><div class="ttdeci">int ret_len</div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00095">otz_common.h:95</a></div></div>
<div class="ttc" id="otz__id_8h_html_a3d6ef0f9d032e84e0b1cb1d4abc9beaca12d03340e4613f9875953e9a2ea969f5"><div class="ttname"><a href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beaca12d03340e4613f9875953e9a2ea969f5">OTZ_MEM_REF</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00044">otz_id.h:44</a></div></div>
<div class="ttc" id="otz__id_8h_html_a3d6ef0f9d032e84e0b1cb1d4abc9beacafbe80d88442cff08f386a74daf8bb9c8"><div class="ttname"><a href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beacafbe80d88442cff08f386a74daf8bb9c8">OTZ_ENC_UINT32</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00042">otz_id.h:42</a></div></div>
<div class="ttc" id="fat32_8c_html_a40767ad71451f60885c01f28dd2a4b47"><div class="ttname"><a href="fat32_8c.html#a40767ad71451f60885c01f28dd2a4b47">data</a></div><div class="ttdeci">u8 * data</div><div class="ttdef"><b>Definition:</b> <a href="fat32_8c_source.html#l00038">fat32.c:38</a></div></div>
<div class="ttc" id="sw__types_8h_html_a10e94b422ef0c20dcdec20d31a1f5049"><div class="ttname"><a href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a></div><div class="ttdeci">unsigned int u32</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00061">sw_types.h:61</a></div></div>
<div class="ttc" id="otz__id_8h_html_a3d6ef0f9d032e84e0b1cb1d4abc9beaca96c21c8682cab91130f619cb860602ed"><div class="ttname"><a href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beaca96c21c8682cab91130f619cb860602ed">OTZ_SECURE_MEM_REF</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00045">otz_id.h:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3ac5322fa2810707415597d9f67fcf8d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="secure__api_8c.html#a06ef145ca0003d92a7a5b503318c3a5c">decode_data</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a5ede7347c25ddffa7a3524d9f5df5d96"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="secure__api_8c.html#a9bd892045df93e29b38e8744cb151c6b">update_response_len</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ac096f6a930db56c0b4b2e467cf9b6e03"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="secure__api_8c.html#a8fed76f3db2128740b11375c0e6e3441">ipc_test_echo</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a5160020dec9de5e5cd17a123d313ba00"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="secure__api_8c.html#a885e01bc2776574f654df4b1b2f18302">handle_task_return</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a7da7eccdc2978a23daa6327050f67771"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void get_api_context </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>svc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>task_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>cmd_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>cmd_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper function to return the service id, session id and command id from the smc command parameter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">svc_id</td><td>service identifier as output parameter </td></tr>
    <tr><td class="paramname">task_id</td><td>session context as output parameter </td></tr>
    <tr><td class="paramname">cmd_id</td><td>command identifier as output parameter </td></tr>
    <tr><td class="paramname">cmd_type</td><td>command type as output parameter </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="secure__api_8c_source.html#l00412">412</a> of file <a class="el" href="secure__api_8c_source.html">secure_api.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;{</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <a class="code" href="sw__types_8h.html#a009592c6ee2118c3c17cfb90f22efde3">pa_t</a> cmd_phy;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <span class="keyword">struct </span><a class="code" href="structotz__smc__cmd.html">otz_smc_cmd</a> *cmd = <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        *svc_id = <a class="code" href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aa3f46aad753a2d88ce91ecf2b3393d8b0">OTZ_SVC_INVALID</a>;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        *task_id = 0;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        *cmd_id = <a class="code" href="otz__id_8h.html#a58ef1488a338b26f3b4786bfac1cdedfa34ecc649f4b8343e81d81b4de45b885b">OTZ_GLOBAL_CMD_ID_INVALID</a>;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        *cmd_type = <a class="code" href="cpu__data_8h.html#af7dace657e83fbc88c3d8196bd0f5c41">params_stack</a>[2];</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="keywordflow">if</span>(*cmd_type == <a class="code" href="otz__common_8h.html#a77964e56914e3eec4558c784e6ecb182a16898843ae9a7c021855a14d79c6016f">OTZ_CMD_TYPE_NS_TO_SECURE</a>) {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                cmd_phy = (<a class="code" href="sw__types_8h.html#a009592c6ee2118c3c17cfb90f22efde3">pa_t</a>) <a class="code" href="cpu__data_8h.html#af7dace657e83fbc88c3d8196bd0f5c41">params_stack</a>[1];</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                <span class="keywordflow">if</span>(!cmd) {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                        <span class="keywordflow">if</span>(<a class="code" href="page__table_8h.html#a5fc63d641c4d938c6bcf4768203afffe">map_to_ns</a>(cmd_phy, (<a class="code" href="sw__types_8h.html#a8a8f44dda695920b3f7210c1c28ff23b">va_t</a>*) &amp;cmd))</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                }</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                cmd = (<span class="keyword">struct </span><a class="code" href="structotz__smc__cmd.html">otz_smc_cmd</a> *)<a class="code" href="cpu__data_8h.html#af7dace657e83fbc88c3d8196bd0f5c41">params_stack</a>[1];</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        }</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="preprocessor">#ifdef SECURE_API_DBG</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="preprocessor"></span>        <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: get_api_context: cmd va 0x%x cmd pa 0x%x\n&quot;</span>, </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                        cmd, <a class="code" href="cpu__mmu_8c.html#a9fa84b9a460d1939baad42d45e74e0ab">va_to_pa_ns</a>(cmd));</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: get_api_context: cmd va 0x%x cmd pa 0x%x\n&quot;</span>, </div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                        cmd, <a class="code" href="cpu__mmu_8c.html#a8ba6341ba7949867e814a83e1699982c">va_to_pa</a>(cmd));</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        *svc_id = ((cmd-&gt;<a class="code" href="structotz__smc__cmd.html#aec3d520f96c3964b678afc8959e39de3">id</a> &gt;&gt; 10) &amp; (0x3ff));</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        *cmd_id = (cmd-&gt;<a class="code" href="structotz__smc__cmd.html#aec3d520f96c3964b678afc8959e39de3">id</a> &amp; 0x3ff);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        *task_id = cmd-&gt;<a class="code" href="structotz__smc__cmd.html#a8895c4e7e5cc988930da43529d4c4cbe">context</a>;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keywordflow">if</span>(*cmd_type == <a class="code" href="otz__common_8h.html#a77964e56914e3eec4558c784e6ecb182a16898843ae9a7c021855a14d79c6016f">OTZ_CMD_TYPE_NS_TO_SECURE</a>) {</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                <a class="code" href="page__table_8h.html#aca3f6249157b4ed2c5c62e862bde4eee">unmap_from_ns</a>((<a class="code" href="sw__types_8h.html#a8a8f44dda695920b3f7210c1c28ff23b">va_t</a>)cmd);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        }</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;}</div>
<div class="ttc" id="sw__types_8h_html_a8a8f44dda695920b3f7210c1c28ff23b"><div class="ttname"><a href="sw__types_8h.html#a8a8f44dda695920b3f7210c1c28ff23b">va_t</a></div><div class="ttdeci">u32 va_t</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00084">sw_types.h:84</a></div></div>
<div class="ttc" id="structotz__smc__cmd_html_aec3d520f96c3964b678afc8959e39de3"><div class="ttname"><a href="structotz__smc__cmd.html#aec3d520f96c3964b678afc8959e39de3">otz_smc_cmd::id</a></div><div class="ttdeci">unsigned int id</div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00102">otz_common.h:102</a></div></div>
<div class="ttc" id="page__table_8h_html_a5fc63d641c4d938c6bcf4768203afffe"><div class="ttname"><a href="page__table_8h.html#a5fc63d641c4d938c6bcf4768203afffe">map_to_ns</a></div><div class="ttdeci">int map_to_ns(pa_t phy_addr, va_t *va_addr)</div><div class="ttdoc">Wrapper function for __map_to_ns. </div><div class="ttdef"><b>Definition:</b> <a href="page__table_8c_source.html#l00159">page_table.c:159</a></div></div>
<div class="ttc" id="structotz__smc__cmd_html"><div class="ttname"><a href="structotz__smc__cmd.html">otz_smc_cmd</a></div><div class="ttdoc">SMC command structure. </div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00101">otz_common.h:101</a></div></div>
<div class="ttc" id="otz__common_8h_html_a77964e56914e3eec4558c784e6ecb182a16898843ae9a7c021855a14d79c6016f"><div class="ttname"><a href="otz__common_8h.html#a77964e56914e3eec4558c784e6ecb182a16898843ae9a7c021855a14d79c6016f">OTZ_CMD_TYPE_NS_TO_SECURE</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00063">otz_common.h:63</a></div></div>
<div class="ttc" id="sw__types_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00039">sw_types.h:39</a></div></div>
<div class="ttc" id="sw__debug_8h_html_a501cc8c07cf94dc1a6269c0d3ba5a234"><div class="ttname"><a href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a></div><div class="ttdeci">u32 sw_printf(const char *fmt,...)</div><div class="ttdoc">Print Function. </div><div class="ttdef"><b>Definition:</b> <a href="sw__debug_8c_source.html#l00046">sw_debug.c:46</a></div></div>
<div class="ttc" id="structotz__smc__cmd_html_a8895c4e7e5cc988930da43529d4c4cbe"><div class="ttname"><a href="structotz__smc__cmd.html#a8895c4e7e5cc988930da43529d4c4cbe">otz_smc_cmd::context</a></div><div class="ttdeci">unsigned int context</div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00103">otz_common.h:103</a></div></div>
<div class="ttc" id="otz__id_8h_html_a58ef1488a338b26f3b4786bfac1cdedfa34ecc649f4b8343e81d81b4de45b885b"><div class="ttname"><a href="otz__id_8h.html#a58ef1488a338b26f3b4786bfac1cdedfa34ecc649f4b8343e81d81b4de45b885b">OTZ_GLOBAL_CMD_ID_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00065">otz_id.h:65</a></div></div>
<div class="ttc" id="cpu__mmu_8c_html_a9fa84b9a460d1939baad42d45e74e0ab"><div class="ttname"><a href="cpu__mmu_8c.html#a9fa84b9a460d1939baad42d45e74e0ab">va_to_pa_ns</a></div><div class="ttdeci">pa_t va_to_pa_ns(va_t va)</div><div class="ttdoc">Returns the physical address of virtual address based on non-secure world page table. </div><div class="ttdef"><b>Definition:</b> <a href="cpu__mmu_8c_source.html#l00186">cpu_mmu.c:186</a></div></div>
<div class="ttc" id="page__table_8h_html_aca3f6249157b4ed2c5c62e862bde4eee"><div class="ttname"><a href="page__table_8h.html#aca3f6249157b4ed2c5c62e862bde4eee">unmap_from_ns</a></div><div class="ttdeci">int unmap_from_ns(va_t va_addr)</div><div class="ttdoc">Wrapper function for __unmap_from_ns. </div><div class="ttdef"><b>Definition:</b> <a href="page__table_8c_source.html#l00739">page_table.c:739</a></div></div>
<div class="ttc" id="cpu__mmu_8c_html_a8ba6341ba7949867e814a83e1699982c"><div class="ttname"><a href="cpu__mmu_8c.html#a8ba6341ba7949867e814a83e1699982c">va_to_pa</a></div><div class="ttdeci">pa_t va_to_pa(va_t va)</div><div class="ttdoc">Returns the physical address of virtual address based on secure world page table. ...</div><div class="ttdef"><b>Definition:</b> <a href="cpu__mmu_8c_source.html#l00166">cpu_mmu.c:166</a></div></div>
<div class="ttc" id="cpu__data_8h_html_af7dace657e83fbc88c3d8196bd0f5c41"><div class="ttname"><a href="cpu__data_8h.html#af7dace657e83fbc88c3d8196bd0f5c41">params_stack</a></div><div class="ttdeci">u32 params_stack[PARAM_STACK_SIZE]</div><div class="ttdoc">Parameters stack which is used to SMC call parameters. </div></div>
<div class="ttc" id="otz__id_8h_html_afbdebb53d1ef45ed1b498899088b4f7aa3f46aad753a2d88ce91ecf2b3393d8b0"><div class="ttname"><a href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aa3f46aad753a2d88ce91ecf2b3393d8b0">OTZ_SVC_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00052">otz_id.h:52</a></div></div>
<div class="ttc" id="sw__types_8h_html_a009592c6ee2118c3c17cfb90f22efde3"><div class="ttname"><a href="sw__types_8h.html#a009592c6ee2118c3c17cfb90f22efde3">pa_t</a></div><div class="ttdeci">u32 pa_t</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00083">sw_types.h:83</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a885e01bc2776574f654df4b1b2f18302"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handle_task_return </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>task_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsw__tls.html">sw_tls</a> *&#160;</td>
          <td class="paramname"><em>tls</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper function to handle the task return. </p>
<p>This function helps to handle the return functionality of task. This function puts the task in to wait or suspend state based on the return value and also helps to set the return value of secure call or IPC call.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task_id</td><td>Task ID </td></tr>
    <tr><td class="paramname">tls</td><td>Task local storage </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="secure__api_8c_source.html#l01180">1180</a> of file <a class="el" href="secure__api_8c_source.html">secure_api.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;{</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;        <a class="code" href="global_8c.html#a79f94efec61544a5c91b1b89eeb8bfd3">suspend_task</a>(task_id, <a class="code" href="task_8h.html#a6924eb4ed00ed119294b1f2d81a8d7ddaf8ca49e6d76377501e1d7bb631334aee">TASK_STATE_SUSPEND</a>);</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        <span class="keywordflow">if</span>(tls-&gt;<a class="code" href="structsw__tls.html#ac7e1df9c1c1dc72c35eea5082bb0fd32">params</a>[2] == <a class="code" href="otz__common_8h.html#a77964e56914e3eec4558c784e6ecb182a16898843ae9a7c021855a14d79c6016f">OTZ_CMD_TYPE_NS_TO_SECURE</a>){</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                <a class="code" href="dispatcher__task_8c.html#a6cf26b507d5212bcc38a1dda0fb44a0a">set_secure_api_ret</a>(tls-&gt;<a class="code" href="structsw__tls.html#a7eb62f98975f80eadc293c778c259348">ret_val</a>);</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        }</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(tls-&gt;<a class="code" href="structsw__tls.html#ac7e1df9c1c1dc72c35eea5082bb0fd32">params</a>[2] == <a class="code" href="otz__common_8h.html#a77964e56914e3eec4558c784e6ecb182a1f6b81d7cb278746b802e4954257aa91">OTZ_CMD_TYPE_SECURE_TO_SECURE</a>)</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                <a class="code" href="cpu__ipi_8c.html#a468df6d87a321a197f874e3a07d3b31d">otz_ipi_return</a>((<span class="keyword">struct</span> <a class="code" href="structotz__smc__cmd.html">otz_smc_cmd</a> *)tls-&gt;<a class="code" href="structsw__tls.html#ac7e1df9c1c1dc72c35eea5082bb0fd32">params</a>[1], tls-&gt;<a class="code" href="structsw__tls.html#a7eb62f98975f80eadc293c778c259348">ret_val</a>);</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;        <a class="code" href="cpu__api_8c.html#ac48128e72b303ea22d8ec641a9516b15">schedule</a>();</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;}</div>
<div class="ttc" id="cpu__api_8c_html_ac48128e72b303ea22d8ec641a9516b15"><div class="ttname"><a href="cpu__api_8c.html#ac48128e72b303ea22d8ec641a9516b15">schedule</a></div><div class="ttdeci">void schedule(void)</div><div class="ttdoc">Invoke scheduler. </div><div class="ttdef"><b>Definition:</b> <a href="cpu__api_8c_source.html#l00220">cpu_api.c:220</a></div></div>
<div class="ttc" id="structotz__smc__cmd_html"><div class="ttname"><a href="structotz__smc__cmd.html">otz_smc_cmd</a></div><div class="ttdoc">SMC command structure. </div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00101">otz_common.h:101</a></div></div>
<div class="ttc" id="structsw__tls_html_ac7e1df9c1c1dc72c35eea5082bb0fd32"><div class="ttname"><a href="structsw__tls.html#ac7e1df9c1c1dc72c35eea5082bb0fd32">sw_tls::params</a></div><div class="ttdeci">u32 params[4]</div><div class="ttdef"><b>Definition:</b> <a href="task_8h_source.html#l00080">task.h:80</a></div></div>
<div class="ttc" id="otz__common_8h_html_a77964e56914e3eec4558c784e6ecb182a16898843ae9a7c021855a14d79c6016f"><div class="ttname"><a href="otz__common_8h.html#a77964e56914e3eec4558c784e6ecb182a16898843ae9a7c021855a14d79c6016f">OTZ_CMD_TYPE_NS_TO_SECURE</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00063">otz_common.h:63</a></div></div>
<div class="ttc" id="structsw__tls_html_a7eb62f98975f80eadc293c778c259348"><div class="ttname"><a href="structsw__tls.html#a7eb62f98975f80eadc293c778c259348">sw_tls::ret_val</a></div><div class="ttdeci">u32 ret_val</div><div class="ttdef"><b>Definition:</b> <a href="task_8h_source.html#l00082">task.h:82</a></div></div>
<div class="ttc" id="task_8h_html_a6924eb4ed00ed119294b1f2d81a8d7ddaf8ca49e6d76377501e1d7bb631334aee"><div class="ttname"><a href="task_8h.html#a6924eb4ed00ed119294b1f2d81a8d7ddaf8ca49e6d76377501e1d7bb631334aee">TASK_STATE_SUSPEND</a></div><div class="ttdef"><b>Definition:</b> <a href="task_8h_source.html#l00068">task.h:68</a></div></div>
<div class="ttc" id="global_8c_html_a79f94efec61544a5c91b1b89eeb8bfd3"><div class="ttname"><a href="global_8c.html#a79f94efec61544a5c91b1b89eeb8bfd3">suspend_task</a></div><div class="ttdeci">void suspend_task(int task_id, int state)</div><div class="ttdoc">Suspends the task. </div><div class="ttdef"><b>Definition:</b> <a href="global_8c_source.html#l00116">global.c:116</a></div></div>
<div class="ttc" id="dispatcher__task_8c_html_a6cf26b507d5212bcc38a1dda0fb44a0a"><div class="ttname"><a href="dispatcher__task_8c.html#a6cf26b507d5212bcc38a1dda0fb44a0a">set_secure_api_ret</a></div><div class="ttdeci">void set_secure_api_ret(int ret_val)</div><div class="ttdoc">Task return value notification. </div><div class="ttdef"><b>Definition:</b> <a href="dispatcher__task_8c_source.html#l00172">dispatcher_task.c:172</a></div></div>
<div class="ttc" id="otz__common_8h_html_a77964e56914e3eec4558c784e6ecb182a1f6b81d7cb278746b802e4954257aa91"><div class="ttname"><a href="otz__common_8h.html#a77964e56914e3eec4558c784e6ecb182a1f6b81d7cb278746b802e4954257aa91">OTZ_CMD_TYPE_SECURE_TO_SECURE</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00065">otz_common.h:65</a></div></div>
<div class="ttc" id="cpu__ipi_8c_html_a468df6d87a321a197f874e3a07d3b31d"><div class="ttname"><a href="cpu__ipi_8c.html#a468df6d87a321a197f874e3a07d3b31d">otz_ipi_return</a></div><div class="ttdeci">void otz_ipi_return(struct otz_smc_cmd *smc_cmd, int ret_val)</div><div class="ttdoc">Return for IPI. </div><div class="ttdef"><b>Definition:</b> <a href="cpu__ipi_8c_source.html#l00067">cpu_ipi.c:67</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7c4a917abcf6dcc2ac7153df6ba0f8bc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ipc_api </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>src_svc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>src_session_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>target_svc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>target_cmd_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>req_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>req_buf_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>res_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>res_buf_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>ret_res_buf_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper function to send the data between two tasks for single request and single response buffer. </p>
<p>This function helps to send the data between two task of single request and single response. This takes care of session establishment, encoding, sending and decoding of data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">src_svc_id</td><td>Source service ID </td></tr>
    <tr><td class="paramname">src_session_id</td><td>Source session ID </td></tr>
    <tr><td class="paramname">target_svc_id</td><td>Target service ID </td></tr>
    <tr><td class="paramname">target_cmd_id</td><td>Target command ID </td></tr>
    <tr><td class="paramname">req_buf</td><td>Request buffer </td></tr>
    <tr><td class="paramname">req_buf_len</td><td>Request buffer length </td></tr>
    <tr><td class="paramname">res_buf</td><td>Response buffer </td></tr>
    <tr><td class="paramname">res_buf_len</td><td>Response buffer length </td></tr>
    <tr><td class="paramname">ret_res_buf_len</td><td>Return response buffer length</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>otz_return_t: OTZ_OK - API success<br/>
OTZ_* - An implementation-defined error code for any other error.<br/>
</dd></dl>

<p>Definition at line <a class="el" href="secure__api_8c_source.html#l00892">892</a> of file <a class="el" href="secure__api_8c_source.html">secure_api.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;{</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        <span class="keywordtype">int</span> ret_val, session_id;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        <span class="keyword">struct </span><a class="code" href="structotz__secure__encode__cmd.html">otz_secure_encode_cmd</a> enc;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        <span class="keyword">struct </span><a class="code" href="structotzc__encode__meta.html">otzc_encode_meta</a> *meta_data = <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        <span class="keyword">struct </span><a class="code" href="structotz__secure__encode__ctx.html">otz_secure_encode_ctx</a> *enc_ctx = <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        <span class="keywordtype">void</span> *decode_out;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        <span class="keywordtype">int</span> offset = 0, pos = <a class="code" href="otz__common_8h.html#af68d1342e11ec79eb995c40ad0e1303d">OTZ_MAX_REQ_PARAMS</a>, type;</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        ret_val = <a class="code" href="secure__api_8c.html#ad1087c61b30162b1eb3d53ea9aac5b31">ipc_connect</a>(target_svc_id, &amp;session_id);</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        <span class="keywordflow">if</span>(ret_val != <a class="code" href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a>) {</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: ipc api: connect failed\n&quot;</span>);</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                <span class="keywordflow">goto</span> ret_func;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        }</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        enc.len = req_buf_len;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        enc.data = req_buf;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        enc.param_type = <a class="code" href="otz__common_8h.html#a792f9d4615b444fce1b56b3c7b6e8052af60016bf7987a1ce074d83f028f07614">OTZC_PARAM_IN</a>;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        ret_val = <a class="code" href="secure__api_8c.html#adf1c653d9a96132b4c7b150420aedc2f">otz_encode_data</a>(&amp;enc, &amp;meta_data, &amp;enc_ctx, <a class="code" href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beaca96c21c8682cab91130f619cb860602ed">OTZ_SECURE_MEM_REF</a>);</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <span class="keywordflow">if</span>(ret_val != <a class="code" href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a>) {</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: ipc api: encode data failed\n&quot;</span>);</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                <span class="keywordflow">goto</span> handler_err1;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        }</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        enc.len = res_buf_len;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        enc.data = res_buf;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        enc.param_type = <a class="code" href="otz__common_8h.html#a792f9d4615b444fce1b56b3c7b6e8052a53a3f6b1183de5cf3cf9c9d564b164bc">OTZC_PARAM_OUT</a>;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        ret_val = <a class="code" href="secure__api_8c.html#adf1c653d9a96132b4c7b150420aedc2f">otz_encode_data</a>(&amp;enc, &amp;meta_data, &amp;enc_ctx, <a class="code" href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beaca96c21c8682cab91130f619cb860602ed">OTZ_SECURE_MEM_REF</a>);</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        <span class="keywordflow">if</span>(ret_val != <a class="code" href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a>) {</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: ipc api: encode data failed\n&quot;</span>);</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;                <span class="keywordflow">goto</span> handler_err1;</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        }</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        ret_val = <a class="code" href="secure__api_8c.html#a9c2660a9763c58ac43854d69d87ed435">ipc_send</a>(src_svc_id, src_session_id, target_svc_id, session_id, </div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;                        target_cmd_id, enc_ctx, meta_data);</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        <span class="keywordflow">if</span>(ret_val != <a class="code" href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a>) {</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;                <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: ipc api: send failed\n&quot;</span>);</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                <span class="keywordflow">goto</span> handler_err1;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;        }</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="task_8h.html#a907dd681ca27bfa3e3f7fe503f2b931b">get_task_tls</a>(src_session_id)-&gt;ipi_ret_val == <a class="code" href="otz__id_8h.html#a0ff602930cf5bf825ab83d78ba06ae32">SMC_SUCCESS</a>) {</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="secure__api_8c.html#af8f0513b045f36061fdeb940681a6824">decode_ipi_out_data</a>(enc_ctx-&gt;<a class="code" href="structotz__secure__encode__ctx.html#abcd7fbec6df74d8b939c0a97947717b7">res_addr</a>, meta_data, </div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                                        &amp;type, &amp;offset, &amp;pos,(<span class="keywordtype">void</span>**)&amp;decode_out, ret_res_buf_len)) {</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;                        <a class="code" href="secure__api_8c.html#aeac54a699cee6c80d67865a35ce71752">otz_release_data</a>(enc_ctx, meta_data);</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;                        <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: ipc api: decode data failed\n&quot;</span>);</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                        <span class="keywordflow">goto</span> handler_err1;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;                }</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                <span class="keywordflow">if</span>(decode_out != res_buf) {</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                        <a class="code" href="secure__api_8c.html#aeac54a699cee6c80d67865a35ce71752">otz_release_data</a>(enc_ctx, meta_data);</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                        <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: ipc api: wrong response buffer\n&quot;</span>);</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                        <span class="keywordflow">goto</span> handler_err1;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;                }</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        }</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;                <a class="code" href="secure__api_8c.html#aeac54a699cee6c80d67865a35ce71752">otz_release_data</a>(enc_ctx, meta_data);</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: ipc api: target service returns error 0x%x\n&quot;</span>, </div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                                <a class="code" href="task_8h.html#a907dd681ca27bfa3e3f7fe503f2b931b">get_task_tls</a>(src_session_id)-&gt;ipi_ret_val);</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                <span class="keywordflow">goto</span> handler_err1;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        }    </div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        <a class="code" href="secure__api_8c.html#aeac54a699cee6c80d67865a35ce71752">otz_release_data</a>(enc_ctx, meta_data);</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;handler_err1:</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        <a class="code" href="secure__api_8c.html#a5cbece2e460aa22770a15b50da729e7f">ipc_disconnect</a>(<a class="code" href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aaffa07fe76b99c8529f2a5a3661257800">OTZ_SVC_CRYPT</a>, session_id);</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;ret_func:</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        <span class="keywordflow">return</span> ret_val;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;}</div>
<div class="ttc" id="otz__common_8h_html_af68d1342e11ec79eb995c40ad0e1303d"><div class="ttname"><a href="otz__common_8h.html#af68d1342e11ec79eb995c40ad0e1303d">OTZ_MAX_REQ_PARAMS</a></div><div class="ttdeci">#define OTZ_MAX_REQ_PARAMS</div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00029">otz_common.h:29</a></div></div>
<div class="ttc" id="secure__api_8c_html_af8f0513b045f36061fdeb940681a6824"><div class="ttname"><a href="secure__api_8c.html#af8f0513b045f36061fdeb940681a6824">decode_ipi_out_data</a></div><div class="ttdeci">int decode_ipi_out_data(void *data, struct otzc_encode_meta *meta_data, int *type, int *offset, int *pos, void **out_data, int *out_len)</div><div class="ttdoc">Helper function to decode the response data for IPI. </div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8c_source.html#l00547">secure_api.c:547</a></div></div>
<div class="ttc" id="structotz__secure__encode__cmd_html"><div class="ttname"><a href="structotz__secure__encode__cmd.html">otz_secure_encode_cmd</a></div><div class="ttdoc">Encode command structure. </div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8h_source.html#l00035">secure_api.h:35</a></div></div>
<div class="ttc" id="sw__semaphores_8h_html_aad472a601abac5aab18d6afddeab7de5"><div class="ttname"><a href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a></div><div class="ttdeci">#define OTZ_OK</div><div class="ttdef"><b>Definition:</b> <a href="sw__semaphores_8h_source.html#l00038">sw_semaphores.h:38</a></div></div>
<div class="ttc" id="otz__common_8h_html_a792f9d4615b444fce1b56b3c7b6e8052a53a3f6b1183de5cf3cf9c9d564b164bc"><div class="ttname"><a href="otz__common_8h.html#a792f9d4615b444fce1b56b3c7b6e8052a53a3f6b1183de5cf3cf9c9d564b164bc">OTZC_PARAM_OUT</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00074">otz_common.h:74</a></div></div>
<div class="ttc" id="secure__api_8c_html_a5cbece2e460aa22770a15b50da729e7f"><div class="ttname"><a href="secure__api_8c.html#a5cbece2e460aa22770a15b50da729e7f">ipc_disconnect</a></div><div class="ttdeci">int ipc_disconnect(int svc_id, int session_id)</div><div class="ttdoc">Disconnect the previously established session between two tasks. </div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8c_source.html#l00811">secure_api.c:811</a></div></div>
<div class="ttc" id="otz__common_8h_html_a792f9d4615b444fce1b56b3c7b6e8052af60016bf7987a1ce074d83f028f07614"><div class="ttname"><a href="otz__common_8h.html#a792f9d4615b444fce1b56b3c7b6e8052af60016bf7987a1ce074d83f028f07614">OTZC_PARAM_IN</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00073">otz_common.h:73</a></div></div>
<div class="ttc" id="structotz__secure__encode__ctx_html"><div class="ttname"><a href="structotz__secure__encode__ctx.html">otz_secure_encode_ctx</a></div><div class="ttdoc">Encode context. </div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8h_source.html#l00044">secure_api.h:44</a></div></div>
<div class="ttc" id="secure__api_8c_html_a9c2660a9763c58ac43854d69d87ed435"><div class="ttname"><a href="secure__api_8c.html#a9c2660a9763c58ac43854d69d87ed435">ipc_send</a></div><div class="ttdeci">int ipc_send(int src_svc_id, int src_context, int svc_id, int session_id, int cmd_id, struct otz_secure_encode_ctx *enc_ctx, struct otzc_encode_meta *meta_data)</div><div class="ttdoc">Send the data between two tasks. </div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8c_source.html#l00836">secure_api.c:836</a></div></div>
<div class="ttc" id="secure__api_8c_html_aeac54a699cee6c80d67865a35ce71752"><div class="ttname"><a href="secure__api_8c.html#aeac54a699cee6c80d67865a35ce71752">otz_release_data</a></div><div class="ttdeci">void otz_release_data(struct otz_secure_encode_ctx *enc_context, struct otzc_encode_meta *meta_data)</div><div class="ttdoc">Release the encoded data. </div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8c_source.html#l00761">secure_api.c:761</a></div></div>
<div class="ttc" id="secure__api_8c_html_ad1087c61b30162b1eb3d53ea9aac5b31"><div class="ttname"><a href="secure__api_8c.html#ad1087c61b30162b1eb3d53ea9aac5b31">ipc_connect</a></div><div class="ttdeci">int ipc_connect(int svc_id, int *session_id)</div><div class="ttdoc">Establish session between two tasks. </div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8c_source.html#l00793">secure_api.c:793</a></div></div>
<div class="ttc" id="structotzc__encode__meta_html"><div class="ttname"><a href="structotzc__encode__meta.html">otzc_encode_meta</a></div><div class="ttdoc">Metadata used for encoding/decoding. </div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00091">otz_common.h:91</a></div></div>
<div class="ttc" id="otz__id_8h_html_afbdebb53d1ef45ed1b498899088b4f7aaffa07fe76b99c8529f2a5a3661257800"><div class="ttname"><a href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aaffa07fe76b99c8529f2a5a3661257800">OTZ_SVC_CRYPT</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00056">otz_id.h:56</a></div></div>
<div class="ttc" id="sw__types_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00039">sw_types.h:39</a></div></div>
<div class="ttc" id="otz__id_8h_html_a0ff602930cf5bf825ab83d78ba06ae32"><div class="ttname"><a href="otz__id_8h.html#a0ff602930cf5bf825ab83d78ba06ae32">SMC_SUCCESS</a></div><div class="ttdeci">#define SMC_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00035">otz_id.h:35</a></div></div>
<div class="ttc" id="task_8h_html_a907dd681ca27bfa3e3f7fe503f2b931b"><div class="ttname"><a href="task_8h.html#a907dd681ca27bfa3e3f7fe503f2b931b">get_task_tls</a></div><div class="ttdeci">sw_tls * get_task_tls(int task_id)</div><div class="ttdoc">Get task local storage. </div><div class="ttdef"><b>Definition:</b> <a href="task_8c_source.html#l00386">task.c:386</a></div></div>
<div class="ttc" id="secure__api_8c_html_adf1c653d9a96132b4c7b150420aedc2f"><div class="ttname"><a href="secure__api_8c.html#adf1c653d9a96132b4c7b150420aedc2f">otz_encode_data</a></div><div class="ttdeci">int otz_encode_data(struct otz_secure_encode_cmd *enc, struct otzc_encode_meta **pmeta_data, struct otz_secure_encode_ctx **penc_context, int encode_type)</div><div class="ttdoc">Helper function to encode the data which originate from secure application. </div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8c_source.html#l00619">secure_api.c:619</a></div></div>
<div class="ttc" id="sw__debug_8h_html_a501cc8c07cf94dc1a6269c0d3ba5a234"><div class="ttname"><a href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a></div><div class="ttdeci">u32 sw_printf(const char *fmt,...)</div><div class="ttdoc">Print Function. </div><div class="ttdef"><b>Definition:</b> <a href="sw__debug_8c_source.html#l00046">sw_debug.c:46</a></div></div>
<div class="ttc" id="structotz__secure__encode__ctx_html_abcd7fbec6df74d8b939c0a97947717b7"><div class="ttname"><a href="structotz__secure__encode__ctx.html#abcd7fbec6df74d8b939c0a97947717b7">otz_secure_encode_ctx::res_addr</a></div><div class="ttdeci">void * res_addr</div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8h_source.html#l00047">secure_api.h:47</a></div></div>
<div class="ttc" id="otz__id_8h_html_a3d6ef0f9d032e84e0b1cb1d4abc9beaca96c21c8682cab91130f619cb860602ed"><div class="ttname"><a href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beaca96c21c8682cab91130f619cb860602ed">OTZ_SECURE_MEM_REF</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00045">otz_id.h:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad1087c61b30162b1eb3d53ea9aac5b31"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ipc_connect </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>svc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>session_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Establish session between two tasks. </p>
<p>This function used in IPC functionality to establish session between two tasks.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">svc_id</td><td>Target service ID </td></tr>
    <tr><td class="paramname">session_id</td><td>Session ID as output parameter</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>otz_return_t: OTZ_OK - Session established successfully<br/>
OTZ_* - An implementation-defined error code for any other error.<br/>
</dd></dl>

<p>Definition at line <a class="el" href="secure__api_8c_source.html#l00793">793</a> of file <a class="el" href="secure__api_8c_source.html">secure_api.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;{</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="secure__api_8c.html#a14068d1f0e3ae583b55fdae60b67dc4a">open_session_from_secure</a>(svc_id, session_id);</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;}</div>
<div class="ttc" id="secure__api_8c_html_a14068d1f0e3ae583b55fdae60b67dc4a"><div class="ttname"><a href="secure__api_8c.html#a14068d1f0e3ae583b55fdae60b67dc4a">open_session_from_secure</a></div><div class="ttdeci">int open_session_from_secure(int svc_id, int *session_id)</div><div class="ttdoc">Open session request from secure application task. </div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8c_source.html#l00209">secure_api.c:209</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5cbece2e460aa22770a15b50da729e7f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ipc_disconnect </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>svc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>session_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disconnect the previously established session between two tasks. </p>
<p>This function used in IPC functionality to close the session which got established between two tasks.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">svc_id</td><td>Target service ID </td></tr>
    <tr><td class="paramname">session_id</td><td>Session ID need to be closed</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>otz_return_t: OTZ_OK - Session closed successfully<br/>
OTZ_* - An implementation-defined error code for any other error.<br/>
</dd></dl>

<p>Definition at line <a class="el" href="secure__api_8c_source.html#l00811">811</a> of file <a class="el" href="secure__api_8c_source.html">secure_api.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;{</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="secure__api_8c.html#a642950c4c6a9120136fed4774be3eeea">close_session_from_secure</a>(svc_id, session_id);</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;}</div>
<div class="ttc" id="secure__api_8c_html_a642950c4c6a9120136fed4774be3eeea"><div class="ttname"><a href="secure__api_8c.html#a642950c4c6a9120136fed4774be3eeea">close_session_from_secure</a></div><div class="ttdeci">int close_session_from_secure(int svc_id, int session_id)</div><div class="ttdoc">Close session request which is got initiated from secure task. </div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8c_source.html#l00249">secure_api.c:249</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9c2660a9763c58ac43854d69d87ed435"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ipc_send </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>src_svc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>src_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>svc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>session_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structotz__secure__encode__ctx.html">otz_secure_encode_ctx</a> *&#160;</td>
          <td class="paramname"><em>enc_ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structotzc__encode__meta.html">otzc_encode_meta</a> *&#160;</td>
          <td class="paramname"><em>meta_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send the data between two tasks. </p>
<p>This function used to send the data between two tasks. We need to call this function after the session establishment.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">src_svc_id</td><td>Source service ID </td></tr>
    <tr><td class="paramname">src_context</td><td>Source session ID </td></tr>
    <tr><td class="paramname">svc_id</td><td>Target service ID </td></tr>
    <tr><td class="paramname">session_id</td><td>Target session ID </td></tr>
    <tr><td class="paramname">cmd_id</td><td>Target command ID </td></tr>
    <tr><td class="paramname">enc_ctx</td><td>Encode context </td></tr>
    <tr><td class="paramname">meta_data</td><td>Meta data</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>otz_return_t: OTZ_OK - Data sent successfully<br/>
OTZ_* - An implementation-defined error code for any other error.<br/>
</dd></dl>

<p>Definition at line <a class="el" href="secure__api_8c_source.html#l00836">836</a> of file <a class="el" href="secure__api_8c_source.html">secure_api.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;{</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        <span class="keyword">struct </span><a class="code" href="structotz__smc__cmd.html">otz_smc_cmd</a> smc_cmd;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        smc_cmd.<a class="code" href="structotz__smc__cmd.html#a08074a22f5eb44648e9d2cd7531e8577">src_id</a> = (src_svc_id &lt;&lt; 10);</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        smc_cmd.src_context = <a class="code" href="structotz__smc__cmd.html#a12a6bd3f7ff1c4a86df9773636fbec46">src_context</a>;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        smc_cmd.id = (svc_id &lt;&lt; 10) | cmd_id;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        smc_cmd.context = session_id;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        smc_cmd.req_buf_len = enc_ctx-&gt;<a class="code" href="structotz__secure__encode__ctx.html#aa7b1f5a4b1c8a14610cc9cc8efd7b81b">enc_req_offset</a>;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        smc_cmd.resp_buf_len = enc_ctx-&gt;<a class="code" href="structotz__secure__encode__ctx.html#a07e5a3ad08eb9a072f5a622a532c6278">enc_res_offset</a>;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        smc_cmd.ret_resp_buf_len = 0;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        <span class="keywordflow">if</span>(enc_ctx-&gt;<a class="code" href="structotz__secure__encode__ctx.html#a7513d2246199ffe6feb1c29661df9d83">req_addr</a>)</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                smc_cmd.req_buf_phys = (<a class="code" href="sw__types_8h.html#a009592c6ee2118c3c17cfb90f22efde3">pa_t</a>)enc_ctx-&gt;<a class="code" href="structotz__secure__encode__ctx.html#a7513d2246199ffe6feb1c29661df9d83">req_addr</a>;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                smc_cmd.req_buf_phys = 0;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        <span class="keywordflow">if</span>(enc_ctx-&gt;<a class="code" href="structotz__secure__encode__ctx.html#abcd7fbec6df74d8b939c0a97947717b7">res_addr</a>)</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                smc_cmd.resp_buf_phys = (<a class="code" href="sw__types_8h.html#a009592c6ee2118c3c17cfb90f22efde3">pa_t</a>)enc_ctx-&gt;<a class="code" href="structotz__secure__encode__ctx.html#abcd7fbec6df74d8b939c0a97947717b7">res_addr</a>;</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                smc_cmd.resp_buf_phys = 0;</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        <span class="keywordflow">if</span>(meta_data)</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                smc_cmd.meta_data_phys = (<a class="code" href="sw__types_8h.html#a009592c6ee2118c3c17cfb90f22efde3">pa_t</a>)meta_data;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                smc_cmd.meta_data_phys = 0;       </div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        <a class="code" href="cpu__ipi_8c.html#ad87d6051e9afef51225b61095495b00d">otz_ipi</a>(&amp;smc_cmd);</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a>;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;}</div>
<div class="ttc" id="structotz__secure__encode__ctx_html_a7513d2246199ffe6feb1c29661df9d83"><div class="ttname"><a href="structotz__secure__encode__ctx.html#a7513d2246199ffe6feb1c29661df9d83">otz_secure_encode_ctx::req_addr</a></div><div class="ttdeci">void * req_addr</div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8h_source.html#l00045">secure_api.h:45</a></div></div>
<div class="ttc" id="sw__semaphores_8h_html_aad472a601abac5aab18d6afddeab7de5"><div class="ttname"><a href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a></div><div class="ttdeci">#define OTZ_OK</div><div class="ttdef"><b>Definition:</b> <a href="sw__semaphores_8h_source.html#l00038">sw_semaphores.h:38</a></div></div>
<div class="ttc" id="structotz__smc__cmd_html"><div class="ttname"><a href="structotz__smc__cmd.html">otz_smc_cmd</a></div><div class="ttdoc">SMC command structure. </div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00101">otz_common.h:101</a></div></div>
<div class="ttc" id="structotz__secure__encode__ctx_html_a07e5a3ad08eb9a072f5a622a532c6278"><div class="ttname"><a href="structotz__secure__encode__ctx.html#a07e5a3ad08eb9a072f5a622a532c6278">otz_secure_encode_ctx::enc_res_offset</a></div><div class="ttdeci">u32 enc_res_offset</div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8h_source.html#l00051">secure_api.h:51</a></div></div>
<div class="ttc" id="structotz__smc__cmd_html_a12a6bd3f7ff1c4a86df9773636fbec46"><div class="ttname"><a href="structotz__smc__cmd.html#a12a6bd3f7ff1c4a86df9773636fbec46">otz_smc_cmd::src_context</a></div><div class="ttdeci">unsigned int src_context</div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00107">otz_common.h:107</a></div></div>
<div class="ttc" id="structotz__secure__encode__ctx_html_aa7b1f5a4b1c8a14610cc9cc8efd7b81b"><div class="ttname"><a href="structotz__secure__encode__ctx.html#aa7b1f5a4b1c8a14610cc9cc8efd7b81b">otz_secure_encode_ctx::enc_req_offset</a></div><div class="ttdeci">u32 enc_req_offset</div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8h_source.html#l00050">secure_api.h:50</a></div></div>
<div class="ttc" id="structotz__smc__cmd_html_a08074a22f5eb44648e9d2cd7531e8577"><div class="ttname"><a href="structotz__smc__cmd.html#a08074a22f5eb44648e9d2cd7531e8577">otz_smc_cmd::src_id</a></div><div class="ttdeci">unsigned int src_id</div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00106">otz_common.h:106</a></div></div>
<div class="ttc" id="structotz__secure__encode__ctx_html_abcd7fbec6df74d8b939c0a97947717b7"><div class="ttname"><a href="structotz__secure__encode__ctx.html#abcd7fbec6df74d8b939c0a97947717b7">otz_secure_encode_ctx::res_addr</a></div><div class="ttdeci">void * res_addr</div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8h_source.html#l00047">secure_api.h:47</a></div></div>
<div class="ttc" id="sw__types_8h_html_a009592c6ee2118c3c17cfb90f22efde3"><div class="ttname"><a href="sw__types_8h.html#a009592c6ee2118c3c17cfb90f22efde3">pa_t</a></div><div class="ttdeci">u32 pa_t</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00083">sw_types.h:83</a></div></div>
<div class="ttc" id="cpu__ipi_8c_html_ad87d6051e9afef51225b61095495b00d"><div class="ttname"><a href="cpu__ipi_8c.html#ad87d6051e9afef51225b61095495b00d">otz_ipi</a></div><div class="ttdeci">void otz_ipi(struct otz_smc_cmd *smc_cmd)</div><div class="ttdoc">Invoke IPI. </div><div class="ttdef"><b>Definition:</b> <a href="cpu__ipi_8c_source.html#l00041">cpu_ipi.c:41</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a89a0b95e0f4f917575c88b224252875e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ipc_test_crypto </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>src_svc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>src_session_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>: Test IPC command for crypto operation </p>
<p>This function helps to test the IPC functionality by invoking crypto operation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">src_svc_id</td><td>Source service ID </td></tr>
    <tr><td class="paramname">src_session_id</td><td>Source session ID </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="secure__api_8c_source.html#l00979">979</a> of file <a class="el" href="secure__api_8c_source.html">secure_api.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;{</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        <span class="keywordtype">int</span> ret_val, session_id, loop_cntr;</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        <span class="keyword">struct </span><a class="code" href="structotz__secure__encode__cmd.html">otz_secure_encode_cmd</a> enc;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;        <span class="keyword">struct </span><a class="code" href="structotzc__encode__meta.html">otzc_encode_meta</a> *meta_data = <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;        <span class="keyword">struct </span><a class="code" href="structotz__secure__encode__ctx.html">otz_secure_encode_ctx</a> *enc_ctx = <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;        <span class="keywordtype">char</span> *input_string = <span class="stringliteral">&quot;This is a test for IPC encryption/decryption&quot;</span>;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;        <span class="keywordtype">char</span> output_buf[256], *decode_out;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;        <span class="keywordtype">int</span> output_buf_len = 256;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        <span class="keywordtype">char</span> decrypt_output_buf[256];</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        <span class="keywordtype">int</span> decrypt_output_buf_len = 256;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        <span class="keywordtype">int</span> offset = 0, pos = <a class="code" href="otz__common_8h.html#af68d1342e11ec79eb995c40ad0e1303d">OTZ_MAX_REQ_PARAMS</a>, type;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        <a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a> input_buf_len = <a class="code" href="sw__string__functions_8h.html#a67166a224e2739d54a617403135fa7f9">sw_strlen</a>(input_string)+1;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;        ret_val = <a class="code" href="secure__api_8c.html#ad1087c61b30162b1eb3d53ea9aac5b31">ipc_connect</a>(<a class="code" href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aaffa07fe76b99c8529f2a5a3661257800">OTZ_SVC_CRYPT</a>, &amp;session_id);</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        <span class="keywordflow">if</span>(ret_val != <a class="code" href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a>) {</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: ipc test cmd: connect failed\n&quot;</span>);</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;                <span class="keywordflow">goto</span> ret_func;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;        }</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        enc.len = <span class="keyword">sizeof</span>(<a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>);</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        enc.data = (<span class="keywordtype">void</span>*)input_buf_len;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        enc.param_type = <a class="code" href="otz__common_8h.html#a792f9d4615b444fce1b56b3c7b6e8052af60016bf7987a1ce074d83f028f07614">OTZC_PARAM_IN</a>;</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;        ret_val = <a class="code" href="secure__api_8c.html#adf1c653d9a96132b4c7b150420aedc2f">otz_encode_data</a>(&amp;enc, &amp;meta_data, &amp;enc_ctx, <a class="code" href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beacafbe80d88442cff08f386a74daf8bb9c8">OTZ_ENC_UINT32</a>);</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        <span class="keywordflow">if</span>(ret_val != <a class="code" href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a>) {</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: ipc test cmd: encode data failed\n&quot;</span>);</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;                <span class="keywordflow">goto</span> handler_err1;</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        }</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        enc.len = input_buf_len;</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        enc.data = input_string;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        enc.param_type = <a class="code" href="otz__common_8h.html#a792f9d4615b444fce1b56b3c7b6e8052af60016bf7987a1ce074d83f028f07614">OTZC_PARAM_IN</a>;</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        ret_val = <a class="code" href="secure__api_8c.html#adf1c653d9a96132b4c7b150420aedc2f">otz_encode_data</a>(&amp;enc, &amp;meta_data, &amp;enc_ctx, <a class="code" href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beaca96c21c8682cab91130f619cb860602ed">OTZ_SECURE_MEM_REF</a>);</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;        <span class="keywordflow">if</span>(ret_val != <a class="code" href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a>) {</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;                <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: ipc test cmd: encode data failed\n&quot;</span>);</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                <span class="keywordflow">goto</span> handler_err1;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        }</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        enc.len = output_buf_len;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        enc.data = output_buf;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        enc.param_type = <a class="code" href="otz__common_8h.html#a792f9d4615b444fce1b56b3c7b6e8052a53a3f6b1183de5cf3cf9c9d564b164bc">OTZC_PARAM_OUT</a>;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        ret_val = <a class="code" href="secure__api_8c.html#adf1c653d9a96132b4c7b150420aedc2f">otz_encode_data</a>(&amp;enc, &amp;meta_data, &amp;enc_ctx, <a class="code" href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beaca96c21c8682cab91130f619cb860602ed">OTZ_SECURE_MEM_REF</a>);</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        <span class="keywordflow">if</span>(ret_val != <a class="code" href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a>) {</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;                <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: ipc test cmd: encode data failed\n&quot;</span>);</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;                <span class="keywordflow">goto</span> handler_err1;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        }</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        ret_val = <a class="code" href="secure__api_8c.html#a9c2660a9763c58ac43854d69d87ed435">ipc_send</a>(src_svc_id, src_session_id, <a class="code" href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aaffa07fe76b99c8529f2a5a3661257800">OTZ_SVC_CRYPT</a>, </div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;                        session_id, <a class="code" href="otz__id_8h.html#aa198051a37dd7b750bf536accf5a4010aabc2aab03b1ee4347b56c75d4ebfbf30">OTZ_CRYPT_CMD_ID_ENCRYPT</a>, </div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;                        enc_ctx, meta_data);</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        <span class="keywordflow">if</span>(ret_val != <a class="code" href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a>) {</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: ipc test cmd: send failed\n&quot;</span>);</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;                <span class="keywordflow">goto</span> handler_err1;</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        }</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="task_8h.html#a907dd681ca27bfa3e3f7fe503f2b931b">get_task_tls</a>(src_session_id)-&gt;ipi_ret_val == <a class="code" href="otz__id_8h.html#a0ff602930cf5bf825ab83d78ba06ae32">SMC_SUCCESS</a>) {</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="secure__api_8c.html#af8f0513b045f36061fdeb940681a6824">decode_ipi_out_data</a>(enc_ctx-&gt;<a class="code" href="structotz__secure__encode__ctx.html#abcd7fbec6df74d8b939c0a97947717b7">res_addr</a>, meta_data, </div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                                        &amp;type, &amp;offset, &amp;pos,(<span class="keywordtype">void</span>**)&amp;decode_out, &amp;output_buf_len)) {</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                        <a class="code" href="secure__api_8c.html#aeac54a699cee6c80d67865a35ce71752">otz_release_data</a>(enc_ctx, meta_data);</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                        <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: ipc test cmd: decode data failed\n&quot;</span>);</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;                        <span class="keywordflow">goto</span> handler_err1;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                }</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                <span class="keywordflow">if</span>(decode_out != output_buf) {</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;                        <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: ipc test cmd: wrong out buffer\n&quot;</span>);</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;                }</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: IPC Encrypted string is &quot;</span>);</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                <span class="keywordflow">for</span>(loop_cntr=0;loop_cntr&lt;output_buf_len;loop_cntr++) {</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;                        <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: 0x%x &quot;</span>,output_buf[loop_cntr]);</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;                }</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;        }</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;                <a class="code" href="secure__api_8c.html#aeac54a699cee6c80d67865a35ce71752">otz_release_data</a>(enc_ctx, meta_data);</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: ipc test cmd: service returns error 0x%x failed\n&quot;</span>, </div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;                                <a class="code" href="task_8h.html#a907dd681ca27bfa3e3f7fe503f2b931b">get_task_tls</a>(src_session_id)-&gt;ipi_ret_val);</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                <span class="keywordflow">goto</span> handler_err1;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        }    </div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;        <a class="code" href="secure__api_8c.html#aeac54a699cee6c80d67865a35ce71752">otz_release_data</a>(enc_ctx, meta_data);</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        meta_data = <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        enc_ctx = <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        enc.len = <span class="keyword">sizeof</span>(<a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>);</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        enc.data = (<span class="keywordtype">void</span>*)output_buf_len;</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        enc.param_type = <a class="code" href="otz__common_8h.html#a792f9d4615b444fce1b56b3c7b6e8052af60016bf7987a1ce074d83f028f07614">OTZC_PARAM_IN</a>;</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        ret_val = <a class="code" href="secure__api_8c.html#adf1c653d9a96132b4c7b150420aedc2f">otz_encode_data</a>(&amp;enc, &amp;meta_data, &amp;enc_ctx, <a class="code" href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beacafbe80d88442cff08f386a74daf8bb9c8">OTZ_ENC_UINT32</a>);</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        <span class="keywordflow">if</span>(ret_val != <a class="code" href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a>) {</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;                <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: ipc test cmd: encode data failed\n&quot;</span>);</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                <span class="keywordflow">goto</span> handler_err1;</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;        }</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        enc.len = output_buf_len;</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        enc.data = output_buf;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        enc.param_type = <a class="code" href="otz__common_8h.html#a792f9d4615b444fce1b56b3c7b6e8052af60016bf7987a1ce074d83f028f07614">OTZC_PARAM_IN</a>;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        ret_val = <a class="code" href="secure__api_8c.html#adf1c653d9a96132b4c7b150420aedc2f">otz_encode_data</a>(&amp;enc, &amp;meta_data, &amp;enc_ctx, <a class="code" href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beaca96c21c8682cab91130f619cb860602ed">OTZ_SECURE_MEM_REF</a>);</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;        <span class="keywordflow">if</span>(ret_val != <a class="code" href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a>) {</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: ipc test cmd: encode data failed\n&quot;</span>);</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                <span class="keywordflow">goto</span> handler_err1;</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;        }</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;        enc.len = decrypt_output_buf_len;</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;        enc.data = decrypt_output_buf;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        enc.param_type = <a class="code" href="otz__common_8h.html#a792f9d4615b444fce1b56b3c7b6e8052a53a3f6b1183de5cf3cf9c9d564b164bc">OTZC_PARAM_OUT</a>;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        ret_val = <a class="code" href="secure__api_8c.html#adf1c653d9a96132b4c7b150420aedc2f">otz_encode_data</a>(&amp;enc, &amp;meta_data, &amp;enc_ctx, <a class="code" href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beaca96c21c8682cab91130f619cb860602ed">OTZ_SECURE_MEM_REF</a>);</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        <span class="keywordflow">if</span>(ret_val != <a class="code" href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a>) {</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;                <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: ipc test cmd: encode data failed\n&quot;</span>);</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;                <span class="keywordflow">goto</span> handler_err1;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        }</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        ret_val = <a class="code" href="secure__api_8c.html#a9c2660a9763c58ac43854d69d87ed435">ipc_send</a>(src_svc_id, src_session_id, <a class="code" href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aaffa07fe76b99c8529f2a5a3661257800">OTZ_SVC_CRYPT</a>, session_id, </div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;                        <a class="code" href="otz__id_8h.html#aa198051a37dd7b750bf536accf5a4010a2379b254e188628371e61fa52a0bd4d2">OTZ_CRYPT_CMD_ID_DECRYPT</a>, </div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;                        enc_ctx, meta_data);</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        <span class="keywordflow">if</span>(ret_val != <a class="code" href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a>) {</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;                <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: ipc test cmd: send failed\n&quot;</span>);</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;                <span class="keywordflow">goto</span> handler_err1;</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        }</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="task_8h.html#a907dd681ca27bfa3e3f7fe503f2b931b">get_task_tls</a>(src_session_id)-&gt;ipi_ret_val == <a class="code" href="otz__id_8h.html#a0ff602930cf5bf825ab83d78ba06ae32">SMC_SUCCESS</a>) {</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="secure__api_8c.html#af8f0513b045f36061fdeb940681a6824">decode_ipi_out_data</a>(enc_ctx-&gt;<a class="code" href="structotz__secure__encode__ctx.html#abcd7fbec6df74d8b939c0a97947717b7">res_addr</a>, meta_data, </div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;                                        &amp;type, &amp;offset, &amp;pos, (<span class="keywordtype">void</span>**)&amp;decode_out, </div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;                                        &amp;decrypt_output_buf_len)) {</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;                        <a class="code" href="secure__api_8c.html#aeac54a699cee6c80d67865a35ce71752">otz_release_data</a>(enc_ctx, meta_data);</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;                        <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: ipc test cmd: decode data failed\n&quot;</span>);</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;                        <span class="keywordflow">goto</span> handler_err1;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;                }</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                <span class="keywordflow">if</span>(decode_out != decrypt_output_buf) {</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;                        <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: ipc test cmd: wrong out buffer\n&quot;</span>);</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;                }</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;                <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: IPC: decrypted output %s\n&quot;</span>, decrypt_output_buf);</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        }</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;                <a class="code" href="secure__api_8c.html#aeac54a699cee6c80d67865a35ce71752">otz_release_data</a>(enc_ctx, meta_data);</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;                <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: ipc test cmd: service returns error 0x%x failed\n&quot;</span>, </div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;                                <a class="code" href="task_8h.html#a907dd681ca27bfa3e3f7fe503f2b931b">get_task_tls</a>(src_session_id)-&gt;ipi_ret_val);</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;                <span class="keywordflow">goto</span> handler_err1;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;        }</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;        <a class="code" href="secure__api_8c.html#aeac54a699cee6c80d67865a35ce71752">otz_release_data</a>(enc_ctx, meta_data);</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;handler_err1:</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;        <a class="code" href="secure__api_8c.html#a5cbece2e460aa22770a15b50da729e7f">ipc_disconnect</a>(<a class="code" href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aaffa07fe76b99c8529f2a5a3661257800">OTZ_SVC_CRYPT</a>, session_id);</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;ret_func:</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;}</div>
<div class="ttc" id="otz__common_8h_html_af68d1342e11ec79eb995c40ad0e1303d"><div class="ttname"><a href="otz__common_8h.html#af68d1342e11ec79eb995c40ad0e1303d">OTZ_MAX_REQ_PARAMS</a></div><div class="ttdeci">#define OTZ_MAX_REQ_PARAMS</div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00029">otz_common.h:29</a></div></div>
<div class="ttc" id="secure__api_8c_html_af8f0513b045f36061fdeb940681a6824"><div class="ttname"><a href="secure__api_8c.html#af8f0513b045f36061fdeb940681a6824">decode_ipi_out_data</a></div><div class="ttdeci">int decode_ipi_out_data(void *data, struct otzc_encode_meta *meta_data, int *type, int *offset, int *pos, void **out_data, int *out_len)</div><div class="ttdoc">Helper function to decode the response data for IPI. </div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8c_source.html#l00547">secure_api.c:547</a></div></div>
<div class="ttc" id="structotz__secure__encode__cmd_html"><div class="ttname"><a href="structotz__secure__encode__cmd.html">otz_secure_encode_cmd</a></div><div class="ttdoc">Encode command structure. </div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8h_source.html#l00035">secure_api.h:35</a></div></div>
<div class="ttc" id="sw__semaphores_8h_html_aad472a601abac5aab18d6afddeab7de5"><div class="ttname"><a href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a></div><div class="ttdeci">#define OTZ_OK</div><div class="ttdef"><b>Definition:</b> <a href="sw__semaphores_8h_source.html#l00038">sw_semaphores.h:38</a></div></div>
<div class="ttc" id="otz__common_8h_html_a792f9d4615b444fce1b56b3c7b6e8052a53a3f6b1183de5cf3cf9c9d564b164bc"><div class="ttname"><a href="otz__common_8h.html#a792f9d4615b444fce1b56b3c7b6e8052a53a3f6b1183de5cf3cf9c9d564b164bc">OTZC_PARAM_OUT</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00074">otz_common.h:74</a></div></div>
<div class="ttc" id="otz__id_8h_html_aa198051a37dd7b750bf536accf5a4010a2379b254e188628371e61fa52a0bd4d2"><div class="ttname"><a href="otz__id_8h.html#aa198051a37dd7b750bf536accf5a4010a2379b254e188628371e61fa52a0bd4d2">OTZ_CRYPT_CMD_ID_DECRYPT</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00086">otz_id.h:86</a></div></div>
<div class="ttc" id="sw__string__functions_8h_html_a67166a224e2739d54a617403135fa7f9"><div class="ttname"><a href="sw__string__functions_8h.html#a67166a224e2739d54a617403135fa7f9">sw_strlen</a></div><div class="ttdeci">u32 sw_strlen(char *s)</div><div class="ttdoc">strlen - Find the length of a string </div><div class="ttdef"><b>Definition:</b> <a href="sw__string__functions_8c_source.html#l00093">sw_string_functions.c:93</a></div></div>
<div class="ttc" id="secure__api_8c_html_a5cbece2e460aa22770a15b50da729e7f"><div class="ttname"><a href="secure__api_8c.html#a5cbece2e460aa22770a15b50da729e7f">ipc_disconnect</a></div><div class="ttdeci">int ipc_disconnect(int svc_id, int session_id)</div><div class="ttdoc">Disconnect the previously established session between two tasks. </div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8c_source.html#l00811">secure_api.c:811</a></div></div>
<div class="ttc" id="otz__common_8h_html_a792f9d4615b444fce1b56b3c7b6e8052af60016bf7987a1ce074d83f028f07614"><div class="ttname"><a href="otz__common_8h.html#a792f9d4615b444fce1b56b3c7b6e8052af60016bf7987a1ce074d83f028f07614">OTZC_PARAM_IN</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00073">otz_common.h:73</a></div></div>
<div class="ttc" id="structotz__secure__encode__ctx_html"><div class="ttname"><a href="structotz__secure__encode__ctx.html">otz_secure_encode_ctx</a></div><div class="ttdoc">Encode context. </div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8h_source.html#l00044">secure_api.h:44</a></div></div>
<div class="ttc" id="secure__api_8c_html_a9c2660a9763c58ac43854d69d87ed435"><div class="ttname"><a href="secure__api_8c.html#a9c2660a9763c58ac43854d69d87ed435">ipc_send</a></div><div class="ttdeci">int ipc_send(int src_svc_id, int src_context, int svc_id, int session_id, int cmd_id, struct otz_secure_encode_ctx *enc_ctx, struct otzc_encode_meta *meta_data)</div><div class="ttdoc">Send the data between two tasks. </div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8c_source.html#l00836">secure_api.c:836</a></div></div>
<div class="ttc" id="secure__api_8c_html_aeac54a699cee6c80d67865a35ce71752"><div class="ttname"><a href="secure__api_8c.html#aeac54a699cee6c80d67865a35ce71752">otz_release_data</a></div><div class="ttdeci">void otz_release_data(struct otz_secure_encode_ctx *enc_context, struct otzc_encode_meta *meta_data)</div><div class="ttdoc">Release the encoded data. </div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8c_source.html#l00761">secure_api.c:761</a></div></div>
<div class="ttc" id="otz__id_8h_html_a3d6ef0f9d032e84e0b1cb1d4abc9beacafbe80d88442cff08f386a74daf8bb9c8"><div class="ttname"><a href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beacafbe80d88442cff08f386a74daf8bb9c8">OTZ_ENC_UINT32</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00042">otz_id.h:42</a></div></div>
<div class="ttc" id="secure__api_8c_html_ad1087c61b30162b1eb3d53ea9aac5b31"><div class="ttname"><a href="secure__api_8c.html#ad1087c61b30162b1eb3d53ea9aac5b31">ipc_connect</a></div><div class="ttdeci">int ipc_connect(int svc_id, int *session_id)</div><div class="ttdoc">Establish session between two tasks. </div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8c_source.html#l00793">secure_api.c:793</a></div></div>
<div class="ttc" id="otz__id_8h_html_aa198051a37dd7b750bf536accf5a4010aabc2aab03b1ee4347b56c75d4ebfbf30"><div class="ttname"><a href="otz__id_8h.html#aa198051a37dd7b750bf536accf5a4010aabc2aab03b1ee4347b56c75d4ebfbf30">OTZ_CRYPT_CMD_ID_ENCRYPT</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00085">otz_id.h:85</a></div></div>
<div class="ttc" id="structotzc__encode__meta_html"><div class="ttname"><a href="structotzc__encode__meta.html">otzc_encode_meta</a></div><div class="ttdoc">Metadata used for encoding/decoding. </div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00091">otz_common.h:91</a></div></div>
<div class="ttc" id="otz__id_8h_html_afbdebb53d1ef45ed1b498899088b4f7aaffa07fe76b99c8529f2a5a3661257800"><div class="ttname"><a href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aaffa07fe76b99c8529f2a5a3661257800">OTZ_SVC_CRYPT</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00056">otz_id.h:56</a></div></div>
<div class="ttc" id="sw__types_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00039">sw_types.h:39</a></div></div>
<div class="ttc" id="otz__id_8h_html_a0ff602930cf5bf825ab83d78ba06ae32"><div class="ttname"><a href="otz__id_8h.html#a0ff602930cf5bf825ab83d78ba06ae32">SMC_SUCCESS</a></div><div class="ttdeci">#define SMC_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00035">otz_id.h:35</a></div></div>
<div class="ttc" id="task_8h_html_a907dd681ca27bfa3e3f7fe503f2b931b"><div class="ttname"><a href="task_8h.html#a907dd681ca27bfa3e3f7fe503f2b931b">get_task_tls</a></div><div class="ttdeci">sw_tls * get_task_tls(int task_id)</div><div class="ttdoc">Get task local storage. </div><div class="ttdef"><b>Definition:</b> <a href="task_8c_source.html#l00386">task.c:386</a></div></div>
<div class="ttc" id="secure__api_8c_html_adf1c653d9a96132b4c7b150420aedc2f"><div class="ttname"><a href="secure__api_8c.html#adf1c653d9a96132b4c7b150420aedc2f">otz_encode_data</a></div><div class="ttdeci">int otz_encode_data(struct otz_secure_encode_cmd *enc, struct otzc_encode_meta **pmeta_data, struct otz_secure_encode_ctx **penc_context, int encode_type)</div><div class="ttdoc">Helper function to encode the data which originate from secure application. </div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8c_source.html#l00619">secure_api.c:619</a></div></div>
<div class="ttc" id="sw__debug_8h_html_a501cc8c07cf94dc1a6269c0d3ba5a234"><div class="ttname"><a href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a></div><div class="ttdeci">u32 sw_printf(const char *fmt,...)</div><div class="ttdoc">Print Function. </div><div class="ttdef"><b>Definition:</b> <a href="sw__debug_8c_source.html#l00046">sw_debug.c:46</a></div></div>
<div class="ttc" id="sw__types_8h_html_a10e94b422ef0c20dcdec20d31a1f5049"><div class="ttname"><a href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a></div><div class="ttdeci">unsigned int u32</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00061">sw_types.h:61</a></div></div>
<div class="ttc" id="structotz__secure__encode__ctx_html_abcd7fbec6df74d8b939c0a97947717b7"><div class="ttname"><a href="structotz__secure__encode__ctx.html#abcd7fbec6df74d8b939c0a97947717b7">otz_secure_encode_ctx::res_addr</a></div><div class="ttdeci">void * res_addr</div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8h_source.html#l00047">secure_api.h:47</a></div></div>
<div class="ttc" id="otz__id_8h_html_a3d6ef0f9d032e84e0b1cb1d4abc9beaca96c21c8682cab91130f619cb860602ed"><div class="ttname"><a href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beaca96c21c8682cab91130f619cb860602ed">OTZ_SECURE_MEM_REF</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00045">otz_id.h:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8fed76f3db2128740b11375c0e6e3441"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ipc_test_echo </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>src_svc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>src_session_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Test IPC command for echo operation. </p>
<p>This function helps to test IPC command of echo service.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">src_svc_id</td><td>Source service ID </td></tr>
    <tr><td class="paramname">src_session_id</td><td>Source session ID </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="secure__api_8c_source.html#l01152">1152</a> of file <a class="el" href="secure__api_8c_source.html">secure_api.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;{</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        <span class="keywordtype">char</span>* req_buf = <span class="stringliteral">&quot;Test IPI echo cmd&quot;</span>;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        <span class="keywordtype">int</span>   req_buf_len = <a class="code" href="sw__string__functions_8h.html#a67166a224e2739d54a617403135fa7f9">sw_strlen</a>(req_buf) + 1;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        <span class="keywordtype">char</span> res_buf[256];</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        <span class="keywordtype">int</span>  res_buf_len = 256;</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        <span class="keywordtype">int</span>  ret_val;</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        ret_val = <a class="code" href="secure__api_8c.html#a7c4a917abcf6dcc2ac7153df6ba0f8bc">ipc_api</a>(src_svc_id, src_session_id, <a class="code" href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aa2cb1d1aee99cb072f3c2e5928ffbf65c">OTZ_SVC_ECHO</a>,  </div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;                        <a class="code" href="otz__id_8h.html#a37531dc6bfb63de7471c123bf53a84c5a270d9a21da6ec4767fe5f77db91b01a6">OTZ_ECHO_CMD_ID_IPI_SEND_CMD</a>, req_buf, req_buf_len, </div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;                        res_buf, res_buf_len, &amp;res_buf_len);</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;        <span class="keywordflow">if</span>(ret_val == <a class="code" href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a>) {</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: ipc echo test: %s\n&quot;</span>, res_buf);</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;        }</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;}</div>
<div class="ttc" id="sw__semaphores_8h_html_aad472a601abac5aab18d6afddeab7de5"><div class="ttname"><a href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a></div><div class="ttdeci">#define OTZ_OK</div><div class="ttdef"><b>Definition:</b> <a href="sw__semaphores_8h_source.html#l00038">sw_semaphores.h:38</a></div></div>
<div class="ttc" id="secure__api_8c_html_a7c4a917abcf6dcc2ac7153df6ba0f8bc"><div class="ttname"><a href="secure__api_8c.html#a7c4a917abcf6dcc2ac7153df6ba0f8bc">ipc_api</a></div><div class="ttdeci">int ipc_api(int src_svc_id, int src_session_id, int target_svc_id, int target_cmd_id, void *req_buf, int req_buf_len, void *res_buf, int res_buf_len, int *ret_res_buf_len)</div><div class="ttdoc">Helper function to send the data between two tasks for single request and single response buffer...</div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8c_source.html#l00892">secure_api.c:892</a></div></div>
<div class="ttc" id="sw__string__functions_8h_html_a67166a224e2739d54a617403135fa7f9"><div class="ttname"><a href="sw__string__functions_8h.html#a67166a224e2739d54a617403135fa7f9">sw_strlen</a></div><div class="ttdeci">u32 sw_strlen(char *s)</div><div class="ttdoc">strlen - Find the length of a string </div><div class="ttdef"><b>Definition:</b> <a href="sw__string__functions_8c_source.html#l00093">sw_string_functions.c:93</a></div></div>
<div class="ttc" id="sw__debug_8h_html_a501cc8c07cf94dc1a6269c0d3ba5a234"><div class="ttname"><a href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a></div><div class="ttdeci">u32 sw_printf(const char *fmt,...)</div><div class="ttdoc">Print Function. </div><div class="ttdef"><b>Definition:</b> <a href="sw__debug_8c_source.html#l00046">sw_debug.c:46</a></div></div>
<div class="ttc" id="otz__id_8h_html_afbdebb53d1ef45ed1b498899088b4f7aa2cb1d1aee99cb072f3c2e5928ffbf65c"><div class="ttname"><a href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aa2cb1d1aee99cb072f3c2e5928ffbf65c">OTZ_SVC_ECHO</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00054">otz_id.h:54</a></div></div>
<div class="ttc" id="otz__id_8h_html_a37531dc6bfb63de7471c123bf53a84c5a270d9a21da6ec4767fe5f77db91b01a6"><div class="ttname"><a href="otz__id_8h.html#a37531dc6bfb63de7471c123bf53a84c5a270d9a21da6ec4767fe5f77db91b01a6">OTZ_ECHO_CMD_ID_IPI_SEND_CMD</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00153">otz_id.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aaa4b8adf40809cef80a99bf7ffc6bfa0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int open_session_from_ns </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>param</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dispatcher command function to handle the Open session request from non-secure world. </p>
<p>This function invokes the open session API and its get called from dispatcher task.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">param</td><td>pointer to struct <a class="el" href="structotz__smc__cmd.html" title="SMC command structure. ">otz_smc_cmd</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>otz_return_t: OTZ_OK - Session established successfully<br/>
OTZ_* - An implementation-defined error code for any other error.<br/>
</dd></dl>

<p>Definition at line <a class="el" href="secure__api_8c_source.html#l00062">62</a> of file <a class="el" href="secure__api_8c_source.html">secure_api.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;{</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <span class="keywordtype">int</span> ret_val;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="keywordtype">int</span> *svc_id = <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <a class="code" href="structsa__config__t.html">sa_config_t</a> sa_config;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <a class="code" href="sw__types_8h.html#a009592c6ee2118c3c17cfb90f22efde3">pa_t</a> cmd_phy;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <span class="keyword">struct </span><a class="code" href="structotz__smc__cmd.html">otz_smc_cmd</a> *cmd = <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="keywordtype">void</span> *session_context = <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        cmd_phy = (<a class="code" href="sw__types_8h.html#a009592c6ee2118c3c17cfb90f22efde3">pa_t</a>) param;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="page__table_8h.html#a5fc63d641c4d938c6bcf4768203afffe">map_to_ns</a>(cmd_phy, (<a class="code" href="sw__types_8h.html#a8a8f44dda695920b3f7210c1c28ff23b">va_t</a>*) &amp;cmd)) {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                ret_val = <a class="code" href="sw__types_8h.html#a0e40f13f8595fceec45f6f8a0c35cf7c">OTZ_ENOMEM</a>;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                <span class="keywordflow">goto</span> ret_func;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        }</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="keywordflow">if</span>(cmd-&gt;<a class="code" href="structotz__smc__cmd.html#a140bcb490f4a917d056dd1466e80601a">resp_buf_len</a> == 0) {</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                ret_val = <a class="code" href="sw__types_8h.html#ade5dde89d25481cc2f1ebe77a8d0d85b">OTZ_EFAIL</a>;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                <span class="keywordflow">goto</span> ret_func;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        }</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="page__table_8h.html#a5fc63d641c4d938c6bcf4768203afffe">map_to_ns</a>(cmd-&gt;<a class="code" href="structotz__smc__cmd.html#a46df7a184130350e3ea4492f60517a2d">resp_buf_phys</a>, (<a class="code" href="sw__types_8h.html#a8a8f44dda695920b3f7210c1c28ff23b">va_t</a>*)&amp;session_context) != 0) {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                ret_val = <a class="code" href="sw__types_8h.html#a0e40f13f8595fceec45f6f8a0c35cf7c">OTZ_ENOMEM</a>;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                <span class="keywordflow">goto</span> ret_func;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        }</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="page__table_8h.html#a5fc63d641c4d938c6bcf4768203afffe">map_to_ns</a>(cmd-&gt;<a class="code" href="structotz__smc__cmd.html#a2b2fe0686ca90f3d4a1b7ff5a36972da">req_buf_phys</a>, (<a class="code" href="sw__types_8h.html#a8a8f44dda695920b3f7210c1c28ff23b">va_t</a>*)&amp;svc_id) != 0) {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                ret_val = <a class="code" href="sw__types_8h.html#a0e40f13f8595fceec45f6f8a0c35cf7c">OTZ_ENOMEM</a>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                <span class="keywordflow">goto</span> ret_func;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        }</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <span class="keywordflow">if</span>(*svc_id == <a class="code" href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aa3f46aad753a2d88ce91ecf2b3393d8b0">OTZ_SVC_INVALID</a>) {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                ret_val = <a class="code" href="sw__types_8h.html#ade5dde89d25481cc2f1ebe77a8d0d85b">OTZ_EFAIL</a>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                <span class="keywordflow">goto</span> ret_func;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        }</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        ret_val = <a class="code" href="secure__api_8c.html#ac4e7d606b3dba5159d3c3a7a9f1d7511">sa_create_entry_point</a>(*svc_id, &amp;sa_config);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="keywordflow">if</span>(ret_val == <a class="code" href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a>) {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                ret_val = <a class="code" href="secure__api_8c.html#af39d5aab76117e76cecf6d911cdaefb6">sa_open_session</a>(&amp;sa_config, session_context);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        }</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="keywordflow">if</span>(ret_val != <a class="code" href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a>) {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                <a class="code" href="secure__api_8c.html#a90a30e0965553d5de2a7fc03b5cd1412">sa_destroy_entry_point</a>(*svc_id,</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                                sa_config.<a class="code" href="structsa__config__t.html#af0628d17593288b2f6cc0c70a5103b77">data</a>,sa_config.<a class="code" href="structsa__config__t.html#aaf22a3f2509c5b4b1c7eeccc4be71a10">elf_flag</a>);   </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                cmd-&gt;<a class="code" href="structotz__smc__cmd.html#af7d2eb383125d6902dd2c47f827ef689">cmd_status</a> = <a class="code" href="otz__common_8h.html#abd4c55771a07a0fe1a3d212cbc96f030a256b0cd8fb859d02f0b74116616c10f4">OTZ_STATUS_INCOMPLETE</a>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        }</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: session context %x\n&quot;</span>, *((<span class="keywordtype">int</span>*)session_context));</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                cmd-&gt;<a class="code" href="structotz__smc__cmd.html#a30619044c5aa254692aa0c3309c447c0">ret_resp_buf_len</a> = <span class="keyword">sizeof</span>(int);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                cmd-&gt;<a class="code" href="structotz__smc__cmd.html#af7d2eb383125d6902dd2c47f827ef689">cmd_status</a> = <a class="code" href="otz__common_8h.html#abd4c55771a07a0fe1a3d212cbc96f030abe1b9c787ad33e4a1faf1a8c06ac3f1d">OTZ_STATUS_COMPLETE</a>;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;ret_func:</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keywordflow">if</span>(svc_id)</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                <a class="code" href="page__table_8h.html#aca3f6249157b4ed2c5c62e862bde4eee">unmap_from_ns</a>((<a class="code" href="sw__types_8h.html#a8a8f44dda695920b3f7210c1c28ff23b">va_t</a>)svc_id);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keywordflow">if</span>(session_context)</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                <a class="code" href="page__table_8h.html#aca3f6249157b4ed2c5c62e862bde4eee">unmap_from_ns</a>((<a class="code" href="sw__types_8h.html#a8a8f44dda695920b3f7210c1c28ff23b">va_t</a>)session_context);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="keywordflow">if</span>(cmd)    </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                <a class="code" href="page__table_8h.html#aca3f6249157b4ed2c5c62e862bde4eee">unmap_from_ns</a>((<a class="code" href="sw__types_8h.html#a8a8f44dda695920b3f7210c1c28ff23b">va_t</a>)cmd);    </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="keywordflow">return</span> ret_val;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;}</div>
<div class="ttc" id="structotz__smc__cmd_html_a30619044c5aa254692aa0c3309c447c0"><div class="ttname"><a href="structotz__smc__cmd.html#a30619044c5aa254692aa0c3309c447c0">otz_smc_cmd::ret_resp_buf_len</a></div><div class="ttdeci">unsigned int ret_resp_buf_len</div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00111">otz_common.h:111</a></div></div>
<div class="ttc" id="sw__types_8h_html_a8a8f44dda695920b3f7210c1c28ff23b"><div class="ttname"><a href="sw__types_8h.html#a8a8f44dda695920b3f7210c1c28ff23b">va_t</a></div><div class="ttdeci">u32 va_t</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00084">sw_types.h:84</a></div></div>
<div class="ttc" id="sw__semaphores_8h_html_aad472a601abac5aab18d6afddeab7de5"><div class="ttname"><a href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a></div><div class="ttdeci">#define OTZ_OK</div><div class="ttdef"><b>Definition:</b> <a href="sw__semaphores_8h_source.html#l00038">sw_semaphores.h:38</a></div></div>
<div class="ttc" id="structotz__smc__cmd_html_a46df7a184130350e3ea4492f60517a2d"><div class="ttname"><a href="structotz__smc__cmd.html#a46df7a184130350e3ea4492f60517a2d">otz_smc_cmd::resp_buf_phys</a></div><div class="ttdeci">unsigned int resp_buf_phys</div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00114">otz_common.h:114</a></div></div>
<div class="ttc" id="structsa__config__t_html"><div class="ttname"><a href="structsa__config__t.html">sa_config_t</a></div><div class="ttdoc">Secure API configuration details for task. </div><div class="ttdef"><b>Definition:</b> <a href="task_8h_source.html#l00038">task.h:38</a></div></div>
<div class="ttc" id="page__table_8h_html_a5fc63d641c4d938c6bcf4768203afffe"><div class="ttname"><a href="page__table_8h.html#a5fc63d641c4d938c6bcf4768203afffe">map_to_ns</a></div><div class="ttdeci">int map_to_ns(pa_t phy_addr, va_t *va_addr)</div><div class="ttdoc">Wrapper function for __map_to_ns. </div><div class="ttdef"><b>Definition:</b> <a href="page__table_8c_source.html#l00159">page_table.c:159</a></div></div>
<div class="ttc" id="sw__types_8h_html_ade5dde89d25481cc2f1ebe77a8d0d85b"><div class="ttname"><a href="sw__types_8h.html#ade5dde89d25481cc2f1ebe77a8d0d85b">OTZ_EFAIL</a></div><div class="ttdeci">#define OTZ_EFAIL</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00044">sw_types.h:44</a></div></div>
<div class="ttc" id="structotz__smc__cmd_html_a140bcb490f4a917d056dd1466e80601a"><div class="ttname"><a href="structotz__smc__cmd.html#a140bcb490f4a917d056dd1466e80601a">otz_smc_cmd::resp_buf_len</a></div><div class="ttdeci">unsigned int resp_buf_len</div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00110">otz_common.h:110</a></div></div>
<div class="ttc" id="otz__common_8h_html_abd4c55771a07a0fe1a3d212cbc96f030a256b0cd8fb859d02f0b74116616c10f4"><div class="ttname"><a href="otz__common_8h.html#abd4c55771a07a0fe1a3d212cbc96f030a256b0cd8fb859d02f0b74116616c10f4">OTZ_STATUS_INCOMPLETE</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00053">otz_common.h:53</a></div></div>
<div class="ttc" id="structotz__smc__cmd_html"><div class="ttname"><a href="structotz__smc__cmd.html">otz_smc_cmd</a></div><div class="ttdoc">SMC command structure. </div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00101">otz_common.h:101</a></div></div>
<div class="ttc" id="secure__api_8c_html_ac4e7d606b3dba5159d3c3a7a9f1d7511"><div class="ttname"><a href="secure__api_8c.html#ac4e7d606b3dba5159d3c3a7a9f1d7511">sa_create_entry_point</a></div><div class="ttdeci">int sa_create_entry_point(int svc_id, sa_config_t *psa_config)</div><div class="ttdoc">Invokes the init function of the service task. </div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8c_source.html#l00271">secure_api.c:271</a></div></div>
<div class="ttc" id="secure__api_8c_html_af39d5aab76117e76cecf6d911cdaefb6"><div class="ttname"><a href="secure__api_8c.html#af39d5aab76117e76cecf6d911cdaefb6">sa_open_session</a></div><div class="ttdeci">int sa_open_session(sa_config_t *psa_config, void *session_context)</div><div class="ttdoc">Open Session. </div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8c_source.html#l00373">secure_api.c:373</a></div></div>
<div class="ttc" id="sw__types_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00039">sw_types.h:39</a></div></div>
<div class="ttc" id="sw__debug_8h_html_a501cc8c07cf94dc1a6269c0d3ba5a234"><div class="ttname"><a href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a></div><div class="ttdeci">u32 sw_printf(const char *fmt,...)</div><div class="ttdoc">Print Function. </div><div class="ttdef"><b>Definition:</b> <a href="sw__debug_8c_source.html#l00046">sw_debug.c:46</a></div></div>
<div class="ttc" id="structsa__config__t_html_af0628d17593288b2f6cc0c70a5103b77"><div class="ttname"><a href="structsa__config__t.html#af0628d17593288b2f6cc0c70a5103b77">sa_config_t::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="task_8h_source.html#l00060">task.h:60</a></div></div>
<div class="ttc" id="structsa__config__t_html_aaf22a3f2509c5b4b1c7eeccc4be71a10"><div class="ttname"><a href="structsa__config__t.html#aaf22a3f2509c5b4b1c7eeccc4be71a10">sa_config_t::elf_flag</a></div><div class="ttdeci">u32 elf_flag</div><div class="ttdef"><b>Definition:</b> <a href="task_8h_source.html#l00052">task.h:52</a></div></div>
<div class="ttc" id="page__table_8h_html_aca3f6249157b4ed2c5c62e862bde4eee"><div class="ttname"><a href="page__table_8h.html#aca3f6249157b4ed2c5c62e862bde4eee">unmap_from_ns</a></div><div class="ttdeci">int unmap_from_ns(va_t va_addr)</div><div class="ttdoc">Wrapper function for __unmap_from_ns. </div><div class="ttdef"><b>Definition:</b> <a href="page__table_8c_source.html#l00739">page_table.c:739</a></div></div>
<div class="ttc" id="secure__api_8c_html_a90a30e0965553d5de2a7fc03b5cd1412"><div class="ttname"><a href="secure__api_8c.html#a90a30e0965553d5de2a7fc03b5cd1412">sa_destroy_entry_point</a></div><div class="ttdeci">int sa_destroy_entry_point(int svc_id, void *data, int elf_flag)</div><div class="ttdoc">Invokes the exit function of the service task. </div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8c_source.html#l00324">secure_api.c:324</a></div></div>
<div class="ttc" id="structotz__smc__cmd_html_a2b2fe0686ca90f3d4a1b7ff5a36972da"><div class="ttname"><a href="structotz__smc__cmd.html#a2b2fe0686ca90f3d4a1b7ff5a36972da">otz_smc_cmd::req_buf_phys</a></div><div class="ttdeci">unsigned int req_buf_phys</div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00113">otz_common.h:113</a></div></div>
<div class="ttc" id="otz__common_8h_html_abd4c55771a07a0fe1a3d212cbc96f030abe1b9c787ad33e4a1faf1a8c06ac3f1d"><div class="ttname"><a href="otz__common_8h.html#abd4c55771a07a0fe1a3d212cbc96f030abe1b9c787ad33e4a1faf1a8c06ac3f1d">OTZ_STATUS_COMPLETE</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00054">otz_common.h:54</a></div></div>
<div class="ttc" id="otz__id_8h_html_afbdebb53d1ef45ed1b498899088b4f7aa3f46aad753a2d88ce91ecf2b3393d8b0"><div class="ttname"><a href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aa3f46aad753a2d88ce91ecf2b3393d8b0">OTZ_SVC_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00052">otz_id.h:52</a></div></div>
<div class="ttc" id="sw__types_8h_html_a009592c6ee2118c3c17cfb90f22efde3"><div class="ttname"><a href="sw__types_8h.html#a009592c6ee2118c3c17cfb90f22efde3">pa_t</a></div><div class="ttdeci">u32 pa_t</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00083">sw_types.h:83</a></div></div>
<div class="ttc" id="structotz__smc__cmd_html_af7d2eb383125d6902dd2c47f827ef689"><div class="ttname"><a href="structotz__smc__cmd.html#af7d2eb383125d6902dd2c47f827ef689">otz_smc_cmd::cmd_status</a></div><div class="ttdeci">unsigned int cmd_status</div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00112">otz_common.h:112</a></div></div>
<div class="ttc" id="sw__types_8h_html_a0e40f13f8595fceec45f6f8a0c35cf7c"><div class="ttname"><a href="sw__types_8h.html#a0e40f13f8595fceec45f6f8a0c35cf7c">OTZ_ENOMEM</a></div><div class="ttdeci">#define OTZ_ENOMEM</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00045">sw_types.h:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a14068d1f0e3ae583b55fdae60b67dc4a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int open_session_from_secure </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>svc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>session_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open session request from secure application task. </p>
<p>This function invokes the open session API and its get called from secure application task. This is to initiate the request from secure application, either for IPI or secure to non-secure world communication.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">svc_id</td><td>Service ID </td></tr>
    <tr><td class="paramname">session_id</td><td>Pointer to session ID as an output parameter</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>otz_return_t: OTZ_OK - Session established successfully<br/>
OTZ_* - An implementation-defined error code for any other error.<br/>
</dd></dl>

<p>Definition at line <a class="el" href="secure__api_8c_source.html#l00209">209</a> of file <a class="el" href="secure__api_8c_source.html">secure_api.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;{</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="keywordtype">int</span> ret_val;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <a class="code" href="structsa__config__t.html">sa_config_t</a> sa_config;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="keywordflow">if</span>(svc_id == <a class="code" href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aa3f46aad753a2d88ce91ecf2b3393d8b0">OTZ_SVC_INVALID</a>) {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                ret_val = <a class="code" href="sw__types_8h.html#ade5dde89d25481cc2f1ebe77a8d0d85b">OTZ_EFAIL</a>;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                <span class="keywordflow">goto</span> ret_func;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        }</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        ret_val = <a class="code" href="secure__api_8c.html#ac4e7d606b3dba5159d3c3a7a9f1d7511">sa_create_entry_point</a>(svc_id, &amp;sa_config);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="keywordflow">if</span>(ret_val == <a class="code" href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a>) {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                ret_val = <a class="code" href="secure__api_8c.html#af39d5aab76117e76cecf6d911cdaefb6">sa_open_session</a>(&amp;sa_config, session_id);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="keywordflow">if</span>(ret_val == <a class="code" href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a>) {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: session context %x\n&quot;</span>, *((<span class="keywordtype">int</span>*)session_id));</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        }</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                <a class="code" href="secure__api_8c.html#a90a30e0965553d5de2a7fc03b5cd1412">sa_destroy_entry_point</a>(svc_id, sa_config.<a class="code" href="structsa__config__t.html#af0628d17593288b2f6cc0c70a5103b77">data</a>,</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                                sa_config.<a class="code" href="structsa__config__t.html#aaf22a3f2509c5b4b1c7eeccc4be71a10">elf_flag</a>);   </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;ret_func:</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="keywordflow">return</span> ret_val;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;}</div>
<div class="ttc" id="sw__semaphores_8h_html_aad472a601abac5aab18d6afddeab7de5"><div class="ttname"><a href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a></div><div class="ttdeci">#define OTZ_OK</div><div class="ttdef"><b>Definition:</b> <a href="sw__semaphores_8h_source.html#l00038">sw_semaphores.h:38</a></div></div>
<div class="ttc" id="structsa__config__t_html"><div class="ttname"><a href="structsa__config__t.html">sa_config_t</a></div><div class="ttdoc">Secure API configuration details for task. </div><div class="ttdef"><b>Definition:</b> <a href="task_8h_source.html#l00038">task.h:38</a></div></div>
<div class="ttc" id="sw__types_8h_html_ade5dde89d25481cc2f1ebe77a8d0d85b"><div class="ttname"><a href="sw__types_8h.html#ade5dde89d25481cc2f1ebe77a8d0d85b">OTZ_EFAIL</a></div><div class="ttdeci">#define OTZ_EFAIL</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00044">sw_types.h:44</a></div></div>
<div class="ttc" id="secure__api_8c_html_ac4e7d606b3dba5159d3c3a7a9f1d7511"><div class="ttname"><a href="secure__api_8c.html#ac4e7d606b3dba5159d3c3a7a9f1d7511">sa_create_entry_point</a></div><div class="ttdeci">int sa_create_entry_point(int svc_id, sa_config_t *psa_config)</div><div class="ttdoc">Invokes the init function of the service task. </div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8c_source.html#l00271">secure_api.c:271</a></div></div>
<div class="ttc" id="secure__api_8c_html_af39d5aab76117e76cecf6d911cdaefb6"><div class="ttname"><a href="secure__api_8c.html#af39d5aab76117e76cecf6d911cdaefb6">sa_open_session</a></div><div class="ttdeci">int sa_open_session(sa_config_t *psa_config, void *session_context)</div><div class="ttdoc">Open Session. </div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8c_source.html#l00373">secure_api.c:373</a></div></div>
<div class="ttc" id="sw__debug_8h_html_a501cc8c07cf94dc1a6269c0d3ba5a234"><div class="ttname"><a href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a></div><div class="ttdeci">u32 sw_printf(const char *fmt,...)</div><div class="ttdoc">Print Function. </div><div class="ttdef"><b>Definition:</b> <a href="sw__debug_8c_source.html#l00046">sw_debug.c:46</a></div></div>
<div class="ttc" id="structsa__config__t_html_af0628d17593288b2f6cc0c70a5103b77"><div class="ttname"><a href="structsa__config__t.html#af0628d17593288b2f6cc0c70a5103b77">sa_config_t::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="task_8h_source.html#l00060">task.h:60</a></div></div>
<div class="ttc" id="structsa__config__t_html_aaf22a3f2509c5b4b1c7eeccc4be71a10"><div class="ttname"><a href="structsa__config__t.html#aaf22a3f2509c5b4b1c7eeccc4be71a10">sa_config_t::elf_flag</a></div><div class="ttdeci">u32 elf_flag</div><div class="ttdef"><b>Definition:</b> <a href="task_8h_source.html#l00052">task.h:52</a></div></div>
<div class="ttc" id="secure__api_8c_html_a90a30e0965553d5de2a7fc03b5cd1412"><div class="ttname"><a href="secure__api_8c.html#a90a30e0965553d5de2a7fc03b5cd1412">sa_destroy_entry_point</a></div><div class="ttdeci">int sa_destroy_entry_point(int svc_id, void *data, int elf_flag)</div><div class="ttdoc">Invokes the exit function of the service task. </div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8c_source.html#l00324">secure_api.c:324</a></div></div>
<div class="ttc" id="otz__id_8h_html_afbdebb53d1ef45ed1b498899088b4f7aa3f46aad753a2d88ce91ecf2b3393d8b0"><div class="ttname"><a href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aa3f46aad753a2d88ce91ecf2b3393d8b0">OTZ_SVC_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00052">otz_id.h:52</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adf1c653d9a96132b4c7b150420aedc2f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int otz_encode_data </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structotz__secure__encode__cmd.html">otz_secure_encode_cmd</a> *&#160;</td>
          <td class="paramname"><em>enc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structotzc__encode__meta.html">otzc_encode_meta</a> **&#160;</td>
          <td class="paramname"><em>pmeta_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structotz__secure__encode__ctx.html">otz_secure_encode_ctx</a> **&#160;</td>
          <td class="paramname"><em>penc_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>encode_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper function to encode the data which originate from secure application. </p>
<p>This function encodes the data into a encoder stream and this function gets called from secure application. This will be used for IPI or secure to non-secure communication.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">enc</td><td>Encode command structure </td></tr>
    <tr><td class="paramname">pmeta_data</td><td>Meta data which get populated based on the encoding </td></tr>
    <tr><td class="paramname">penc_context</td><td>Encoder context which contains the encoded stream for request and response buffer and its details. </td></tr>
    <tr><td class="paramname">encode_type</td><td>Encoding data type - UINT32 or Shared memory</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>otz_return_t: OTZ_OK - Encoded data successfully<br/>
OTZ_* - An implementation-defined error code for any other error.<br/>
</dd></dl>

<p>Definition at line <a class="el" href="secure__api_8c_source.html#l00619">619</a> of file <a class="el" href="secure__api_8c_source.html">secure_api.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;{</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        <span class="keywordtype">int</span> ret_val = <a class="code" href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a>;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        <span class="keyword">struct </span><a class="code" href="structotzc__encode__meta.html">otzc_encode_meta</a> *meta_data = <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <span class="keyword">struct </span><a class="code" href="structotz__secure__encode__ctx.html">otz_secure_encode_ctx</a> *enc_context = <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        meta_data = *pmeta_data;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        enc_context = *penc_context;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <span class="keywordflow">if</span>(enc == <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                ret_val = <a class="code" href="sw__types_8h.html#a73a2d1613cea88f93fbb8830b2fe857a">OTZ_ILLEGAL_ARGUMENT</a>;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                <span class="keywordflow">goto</span> ret_func;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        }</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        <span class="keywordflow">if</span>(encode_type != <a class="code" href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beacafbe80d88442cff08f386a74daf8bb9c8">OTZ_ENC_UINT32</a> &amp;&amp; encode_type != <a class="code" href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beaca96c21c8682cab91130f619cb860602ed">OTZ_SECURE_MEM_REF</a>) {</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                ret_val = <a class="code" href="sw__types_8h.html#a73a2d1613cea88f93fbb8830b2fe857a">OTZ_ILLEGAL_ARGUMENT</a>;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                <span class="keywordflow">goto</span> ret_func;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        }</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        <span class="keywordflow">if</span>(enc_context == <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                enc_context = (<span class="keyword">struct </span><a class="code" href="structotz__secure__encode__ctx.html">otz_secure_encode_ctx</a> *)<a class="code" href="sw__buddy_8h.html#a66652368e6d05f18bdc4be02b0c62694">sw_malloc</a>(</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                                <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structotz__secure__encode__ctx.html">otz_secure_encode_ctx</a>));</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                <span class="keywordflow">if</span>(!enc_context) {</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                        ret_val = <a class="code" href="sw__types_8h.html#a0e40f13f8595fceec45f6f8a0c35cf7c">OTZ_ENOMEM</a>;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                        <span class="keywordflow">goto</span> ret_free_mem;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                }</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                <a class="code" href="sw__mem__functions_8h.html#a14af1b39b1154a36624740bad34b813f">sw_memset</a>(enc_context, 0, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structotz__secure__encode__ctx.html">otz_secure_encode_ctx</a>));</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        } </div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        <span class="keywordflow">if</span>(meta_data == <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                meta_data = (<span class="keyword">struct </span><a class="code" href="structotzc__encode__meta.html">otzc_encode_meta</a> *)<a class="code" href="sw__buddy_8h.html#a66652368e6d05f18bdc4be02b0c62694">sw_malloc</a>(</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                                <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structotzc__encode__meta.html">otzc_encode_meta</a>) *</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                                (<a class="code" href="otz__common_8h.html#ae03d01e9604f8191960ab4faff98c12e">OTZ_MAX_RES_PARAMS</a> + <a class="code" href="otz__common_8h.html#af68d1342e11ec79eb995c40ad0e1303d">OTZ_MAX_REQ_PARAMS</a>));</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                <span class="keywordflow">if</span>(!meta_data) {</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                        ret_val = <a class="code" href="sw__types_8h.html#a0e40f13f8595fceec45f6f8a0c35cf7c">OTZ_ENOMEM</a>;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                        <span class="keywordflow">goto</span> ret_free_mem;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                }</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                <a class="code" href="sw__mem__functions_8h.html#a14af1b39b1154a36624740bad34b813f">sw_memset</a>(meta_data, 0, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structotzc__encode__meta.html">otzc_encode_meta</a>) *</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                                (<a class="code" href="otz__common_8h.html#ae03d01e9604f8191960ab4faff98c12e">OTZ_MAX_RES_PARAMS</a> + <a class="code" href="otz__common_8h.html#af68d1342e11ec79eb995c40ad0e1303d">OTZ_MAX_REQ_PARAMS</a>));</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        } </div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        <span class="keywordflow">if</span>(enc-&gt;<a class="code" href="structotz__secure__encode__cmd.html#a9cc703d4a32b0900f45449e5ea4e2607">param_type</a> == <a class="code" href="otz__common_8h.html#a792f9d4615b444fce1b56b3c7b6e8052af60016bf7987a1ce074d83f028f07614">OTZC_PARAM_IN</a>) {  </div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                <span class="keywordflow">if</span>(!enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#a7513d2246199ffe6feb1c29661df9d83">req_addr</a>) {</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                        enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#a7513d2246199ffe6feb1c29661df9d83">req_addr</a> = (<span class="keywordtype">void</span> *)<a class="code" href="sw__buddy_8h.html#a66652368e6d05f18bdc4be02b0c62694">sw_malloc</a>(<a class="code" href="otz__common_8h.html#a4002145756597ed650cbd0447719ac6c">OTZ_1K_SIZE</a>);</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                        <span class="keywordflow">if</span>(!enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#a7513d2246199ffe6feb1c29661df9d83">req_addr</a>) {</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                                <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: otz_client_encode: request addr malloc failed\n&quot;</span>);</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                                ret_val = <a class="code" href="sw__types_8h.html#a0e40f13f8595fceec45f6f8a0c35cf7c">OTZ_ENOMEM</a>;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                                <span class="keywordflow">goto</span> ret_free_mem;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                        }</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                        enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#aa7b1f5a4b1c8a14610cc9cc8efd7b81b">enc_req_offset</a> = 0;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                        enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#a411088c3eec2ffd06b2c60be382b77db">enc_req_pos</a> = 0;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                }</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                <span class="keywordflow">if</span>((enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#aa7b1f5a4b1c8a14610cc9cc8efd7b81b">enc_req_offset</a> + <span class="keyword">sizeof</span>(<a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>) &lt;= </div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                                        <a class="code" href="otz__common_8h.html#a4002145756597ed650cbd0447719ac6c">OTZ_1K_SIZE</a>) &amp;&amp;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                                (enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#a411088c3eec2ffd06b2c60be382b77db">enc_req_pos</a> &lt; <a class="code" href="otz__common_8h.html#af68d1342e11ec79eb995c40ad0e1303d">OTZ_MAX_REQ_PARAMS</a>)) {</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                        *((<a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>*)enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#a7513d2246199ffe6feb1c29661df9d83">req_addr</a> + enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#aa7b1f5a4b1c8a14610cc9cc8efd7b81b">enc_req_offset</a>) =</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                                (<a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>)enc-&gt;<a class="code" href="structotz__secure__encode__cmd.html#a497cda85a2e25f1dee3f5a4fea09e827">data</a>;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                        enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#aa7b1f5a4b1c8a14610cc9cc8efd7b81b">enc_req_offset</a> += <span class="keyword">sizeof</span>(<a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                        meta_data[enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#a411088c3eec2ffd06b2c60be382b77db">enc_req_pos</a>].<a class="code" href="structotzc__encode__meta.html#a88023806f0f388e879fb6e264c65419c">type</a> = encode_type;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                        meta_data[enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#a411088c3eec2ffd06b2c60be382b77db">enc_req_pos</a>].<a class="code" href="structotzc__encode__meta.html#a9ed5f89cd7e766cfbcc92af753e13a8b">len</a> = enc-&gt;<a class="code" href="structotz__secure__encode__cmd.html#a02767fcd38e58b6a2649eb56eebfea72">len</a>;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                        enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#a411088c3eec2ffd06b2c60be382b77db">enc_req_pos</a>++;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                }</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                        ret_val = <a class="code" href="sw__types_8h.html#a0e40f13f8595fceec45f6f8a0c35cf7c">OTZ_ENOMEM</a>;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                        <span class="keywordflow">goto</span> ret_free_mem;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                }</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        }</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(enc-&gt;<a class="code" href="structotz__secure__encode__cmd.html#a9cc703d4a32b0900f45449e5ea4e2607">param_type</a> == <a class="code" href="otz__common_8h.html#a792f9d4615b444fce1b56b3c7b6e8052a53a3f6b1183de5cf3cf9c9d564b164bc">OTZC_PARAM_OUT</a>) {   </div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                <span class="keywordflow">if</span>(!enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#abcd7fbec6df74d8b939c0a97947717b7">res_addr</a>) {</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                        enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#abcd7fbec6df74d8b939c0a97947717b7">res_addr</a> = (<span class="keywordtype">void</span> *)<a class="code" href="sw__buddy_8h.html#a66652368e6d05f18bdc4be02b0c62694">sw_malloc</a>(<a class="code" href="otz__common_8h.html#a4002145756597ed650cbd0447719ac6c">OTZ_1K_SIZE</a>);</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                        <span class="keywordflow">if</span>(!enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#abcd7fbec6df74d8b939c0a97947717b7">res_addr</a>) {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                                <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;SW: otz_client_encode: response addr malloc failed\n&quot;</span>);</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                                ret_val = <a class="code" href="sw__types_8h.html#a0e40f13f8595fceec45f6f8a0c35cf7c">OTZ_ENOMEM</a>;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                                <span class="keywordflow">goto</span> ret_free_mem;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                        }</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                        enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#a93000d009ece5da4a14402b31ddd82d9">enc_res_pos</a> = <a class="code" href="otz__common_8h.html#af68d1342e11ec79eb995c40ad0e1303d">OTZ_MAX_REQ_PARAMS</a>;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                        enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#a07e5a3ad08eb9a072f5a622a532c6278">enc_res_offset</a> = 0;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                }</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                <span class="keywordflow">if</span>((enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#a07e5a3ad08eb9a072f5a622a532c6278">enc_res_offset</a> + <span class="keyword">sizeof</span>(<a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>)</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                                        &lt;= <a class="code" href="otz__common_8h.html#a4002145756597ed650cbd0447719ac6c">OTZ_1K_SIZE</a>) &amp;&amp;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                                (enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#a93000d009ece5da4a14402b31ddd82d9">enc_res_pos</a> &lt; </div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                                 (<a class="code" href="otz__common_8h.html#ae03d01e9604f8191960ab4faff98c12e">OTZ_MAX_RES_PARAMS</a> + <a class="code" href="otz__common_8h.html#af68d1342e11ec79eb995c40ad0e1303d">OTZ_MAX_REQ_PARAMS</a> ))) {</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                        *((<a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>*)enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#abcd7fbec6df74d8b939c0a97947717b7">res_addr</a> + </div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                                        enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#a07e5a3ad08eb9a072f5a622a532c6278">enc_res_offset</a>) </div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                                = (<a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>)enc-&gt;<a class="code" href="structotz__secure__encode__cmd.html#a497cda85a2e25f1dee3f5a4fea09e827">data</a>;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                        enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#a07e5a3ad08eb9a072f5a622a532c6278">enc_res_offset</a> += <span class="keyword">sizeof</span>(<a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>);</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                        meta_data[enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#a93000d009ece5da4a14402b31ddd82d9">enc_res_pos</a>].<a class="code" href="structotzc__encode__meta.html#a88023806f0f388e879fb6e264c65419c">type</a> </div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                                =  encode_type;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                        meta_data[enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#a93000d009ece5da4a14402b31ddd82d9">enc_res_pos</a>].<a class="code" href="structotzc__encode__meta.html#a9ed5f89cd7e766cfbcc92af753e13a8b">len</a> = enc-&gt;<a class="code" href="structotz__secure__encode__cmd.html#a02767fcd38e58b6a2649eb56eebfea72">len</a>;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                        enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#a93000d009ece5da4a14402b31ddd82d9">enc_res_pos</a>++;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                }</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;                        ret_val = <a class="code" href="sw__types_8h.html#a0e40f13f8595fceec45f6f8a0c35cf7c">OTZ_ENOMEM</a>;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                        <span class="keywordflow">goto</span> ret_free_mem;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                }   </div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        }</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                ret_val = <a class="code" href="sw__types_8h.html#a73a2d1613cea88f93fbb8830b2fe857a">OTZ_ILLEGAL_ARGUMENT</a>;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                <span class="keywordflow">goto</span> ret_func;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        }</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        <span class="keywordflow">goto</span> ret_func;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;ret_free_mem:</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        <span class="keywordflow">if</span>(enc_context) {</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                <span class="keywordflow">if</span>(enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#a7513d2246199ffe6feb1c29661df9d83">req_addr</a>) {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                        <a class="code" href="sw__buddy_8h.html#a18008f7ca319ae3bbe7c8cc24bbc7d4b">sw_free</a>(enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#a7513d2246199ffe6feb1c29661df9d83">req_addr</a>);</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                        enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#a7513d2246199ffe6feb1c29661df9d83">req_addr</a> = <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                }</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                <span class="keywordflow">if</span>(enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#abcd7fbec6df74d8b939c0a97947717b7">res_addr</a>) {</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                        <a class="code" href="sw__buddy_8h.html#a18008f7ca319ae3bbe7c8cc24bbc7d4b">sw_free</a>(enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#abcd7fbec6df74d8b939c0a97947717b7">res_addr</a>);</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                        enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#abcd7fbec6df74d8b939c0a97947717b7">res_addr</a> = <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                }</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                <a class="code" href="sw__buddy_8h.html#a18008f7ca319ae3bbe7c8cc24bbc7d4b">sw_free</a>(enc_context);</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        } </div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        <span class="keywordflow">if</span>(meta_data) {</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                <a class="code" href="sw__buddy_8h.html#a18008f7ca319ae3bbe7c8cc24bbc7d4b">sw_free</a>(meta_data);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        } </div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;ret_func:</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        <span class="keywordflow">if</span>(! (*pmeta_data))</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                *pmeta_data = meta_data;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        <span class="keywordflow">if</span>(! (*penc_context))</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                *penc_context = enc_context;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        <span class="keywordflow">return</span> ret_val;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;}</div>
<div class="ttc" id="structotz__secure__encode__ctx_html_a7513d2246199ffe6feb1c29661df9d83"><div class="ttname"><a href="structotz__secure__encode__ctx.html#a7513d2246199ffe6feb1c29661df9d83">otz_secure_encode_ctx::req_addr</a></div><div class="ttdeci">void * req_addr</div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8h_source.html#l00045">secure_api.h:45</a></div></div>
<div class="ttc" id="structotzc__encode__meta_html_a9ed5f89cd7e766cfbcc92af753e13a8b"><div class="ttname"><a href="structotzc__encode__meta.html#a9ed5f89cd7e766cfbcc92af753e13a8b">otzc_encode_meta::len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00093">otz_common.h:93</a></div></div>
<div class="ttc" id="otz__common_8h_html_af68d1342e11ec79eb995c40ad0e1303d"><div class="ttname"><a href="otz__common_8h.html#af68d1342e11ec79eb995c40ad0e1303d">OTZ_MAX_REQ_PARAMS</a></div><div class="ttdeci">#define OTZ_MAX_REQ_PARAMS</div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00029">otz_common.h:29</a></div></div>
<div class="ttc" id="sw__semaphores_8h_html_aad472a601abac5aab18d6afddeab7de5"><div class="ttname"><a href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a></div><div class="ttdeci">#define OTZ_OK</div><div class="ttdef"><b>Definition:</b> <a href="sw__semaphores_8h_source.html#l00038">sw_semaphores.h:38</a></div></div>
<div class="ttc" id="otz__common_8h_html_a4002145756597ed650cbd0447719ac6c"><div class="ttname"><a href="otz__common_8h.html#a4002145756597ed650cbd0447719ac6c">OTZ_1K_SIZE</a></div><div class="ttdeci">#define OTZ_1K_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00031">otz_common.h:31</a></div></div>
<div class="ttc" id="otz__common_8h_html_a792f9d4615b444fce1b56b3c7b6e8052a53a3f6b1183de5cf3cf9c9d564b164bc"><div class="ttname"><a href="otz__common_8h.html#a792f9d4615b444fce1b56b3c7b6e8052a53a3f6b1183de5cf3cf9c9d564b164bc">OTZC_PARAM_OUT</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00074">otz_common.h:74</a></div></div>
<div class="ttc" id="sw__buddy_8h_html_a66652368e6d05f18bdc4be02b0c62694"><div class="ttname"><a href="sw__buddy_8h.html#a66652368e6d05f18bdc4be02b0c62694">sw_malloc</a></div><div class="ttdeci">void * sw_malloc(u32 size)</div><div class="ttdoc">Gets the task id and allocates memory in the heap memory corresponding to the task. </div><div class="ttdef"><b>Definition:</b> <a href="sw__buddy_8c_source.html#l00688">sw_buddy.c:688</a></div></div>
<div class="ttc" id="structotz__secure__encode__ctx_html_a411088c3eec2ffd06b2c60be382b77db"><div class="ttname"><a href="structotz__secure__encode__ctx.html#a411088c3eec2ffd06b2c60be382b77db">otz_secure_encode_ctx::enc_req_pos</a></div><div class="ttdeci">u32 enc_req_pos</div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8h_source.html#l00052">secure_api.h:52</a></div></div>
<div class="ttc" id="otz__common_8h_html_a792f9d4615b444fce1b56b3c7b6e8052af60016bf7987a1ce074d83f028f07614"><div class="ttname"><a href="otz__common_8h.html#a792f9d4615b444fce1b56b3c7b6e8052af60016bf7987a1ce074d83f028f07614">OTZC_PARAM_IN</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00073">otz_common.h:73</a></div></div>
<div class="ttc" id="structotz__secure__encode__ctx_html"><div class="ttname"><a href="structotz__secure__encode__ctx.html">otz_secure_encode_ctx</a></div><div class="ttdoc">Encode context. </div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8h_source.html#l00044">secure_api.h:44</a></div></div>
<div class="ttc" id="sw__mem__functions_8h_html_a14af1b39b1154a36624740bad34b813f"><div class="ttname"><a href="sw__mem__functions_8h.html#a14af1b39b1154a36624740bad34b813f">sw_memset</a></div><div class="ttdeci">void * sw_memset(void *dest, u32 c, u32 count)</div><div class="ttdoc">memory set </div><div class="ttdef"><b>Definition:</b> <a href="sw__mem__functions_8c_source.html#l00074">sw_mem_functions.c:74</a></div></div>
<div class="ttc" id="otz__id_8h_html_a3d6ef0f9d032e84e0b1cb1d4abc9beacafbe80d88442cff08f386a74daf8bb9c8"><div class="ttname"><a href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beacafbe80d88442cff08f386a74daf8bb9c8">OTZ_ENC_UINT32</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00042">otz_id.h:42</a></div></div>
<div class="ttc" id="structotz__secure__encode__ctx_html_a07e5a3ad08eb9a072f5a622a532c6278"><div class="ttname"><a href="structotz__secure__encode__ctx.html#a07e5a3ad08eb9a072f5a622a532c6278">otz_secure_encode_ctx::enc_res_offset</a></div><div class="ttdeci">u32 enc_res_offset</div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8h_source.html#l00051">secure_api.h:51</a></div></div>
<div class="ttc" id="structotz__secure__encode__ctx_html_a93000d009ece5da4a14402b31ddd82d9"><div class="ttname"><a href="structotz__secure__encode__ctx.html#a93000d009ece5da4a14402b31ddd82d9">otz_secure_encode_ctx::enc_res_pos</a></div><div class="ttdeci">u32 enc_res_pos</div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8h_source.html#l00053">secure_api.h:53</a></div></div>
<div class="ttc" id="structotz__secure__encode__ctx_html_aa7b1f5a4b1c8a14610cc9cc8efd7b81b"><div class="ttname"><a href="structotz__secure__encode__ctx.html#aa7b1f5a4b1c8a14610cc9cc8efd7b81b">otz_secure_encode_ctx::enc_req_offset</a></div><div class="ttdeci">u32 enc_req_offset</div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8h_source.html#l00050">secure_api.h:50</a></div></div>
<div class="ttc" id="structotzc__encode__meta_html"><div class="ttname"><a href="structotzc__encode__meta.html">otzc_encode_meta</a></div><div class="ttdoc">Metadata used for encoding/decoding. </div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00091">otz_common.h:91</a></div></div>
<div class="ttc" id="structotz__secure__encode__cmd_html_a02767fcd38e58b6a2649eb56eebfea72"><div class="ttname"><a href="structotz__secure__encode__cmd.html#a02767fcd38e58b6a2649eb56eebfea72">otz_secure_encode_cmd::len</a></div><div class="ttdeci">unsigned int len</div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8h_source.html#l00036">secure_api.h:36</a></div></div>
<div class="ttc" id="sw__types_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00039">sw_types.h:39</a></div></div>
<div class="ttc" id="sw__debug_8h_html_a501cc8c07cf94dc1a6269c0d3ba5a234"><div class="ttname"><a href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a></div><div class="ttdeci">u32 sw_printf(const char *fmt,...)</div><div class="ttdoc">Print Function. </div><div class="ttdef"><b>Definition:</b> <a href="sw__debug_8c_source.html#l00046">sw_debug.c:46</a></div></div>
<div class="ttc" id="sw__buddy_8h_html_a18008f7ca319ae3bbe7c8cc24bbc7d4b"><div class="ttname"><a href="sw__buddy_8h.html#a18008f7ca319ae3bbe7c8cc24bbc7d4b">sw_free</a></div><div class="ttdeci">void sw_free(void *pointer)</div><div class="ttdoc">Gets the task_id and frees the heap memory corresponding to the task_id. </div><div class="ttdef"><b>Definition:</b> <a href="sw__buddy_8c_source.html#l00757">sw_buddy.c:757</a></div></div>
<div class="ttc" id="structotzc__encode__meta_html_a88023806f0f388e879fb6e264c65419c"><div class="ttname"><a href="structotzc__encode__meta.html#a88023806f0f388e879fb6e264c65419c">otzc_encode_meta::type</a></div><div class="ttdeci">int type</div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00092">otz_common.h:92</a></div></div>
<div class="ttc" id="sw__types_8h_html_a10e94b422ef0c20dcdec20d31a1f5049"><div class="ttname"><a href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a></div><div class="ttdeci">unsigned int u32</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00061">sw_types.h:61</a></div></div>
<div class="ttc" id="otz__common_8h_html_ae03d01e9604f8191960ab4faff98c12e"><div class="ttname"><a href="otz__common_8h.html#ae03d01e9604f8191960ab4faff98c12e">OTZ_MAX_RES_PARAMS</a></div><div class="ttdeci">#define OTZ_MAX_RES_PARAMS</div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00030">otz_common.h:30</a></div></div>
<div class="ttc" id="structotz__secure__encode__ctx_html_abcd7fbec6df74d8b939c0a97947717b7"><div class="ttname"><a href="structotz__secure__encode__ctx.html#abcd7fbec6df74d8b939c0a97947717b7">otz_secure_encode_ctx::res_addr</a></div><div class="ttdeci">void * res_addr</div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8h_source.html#l00047">secure_api.h:47</a></div></div>
<div class="ttc" id="otz__id_8h_html_a3d6ef0f9d032e84e0b1cb1d4abc9beaca96c21c8682cab91130f619cb860602ed"><div class="ttname"><a href="otz__id_8h.html#a3d6ef0f9d032e84e0b1cb1d4abc9beaca96c21c8682cab91130f619cb860602ed">OTZ_SECURE_MEM_REF</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00045">otz_id.h:45</a></div></div>
<div class="ttc" id="structotz__secure__encode__cmd_html_a9cc703d4a32b0900f45449e5ea4e2607"><div class="ttname"><a href="structotz__secure__encode__cmd.html#a9cc703d4a32b0900f45449e5ea4e2607">otz_secure_encode_cmd::param_type</a></div><div class="ttdeci">int param_type</div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8h_source.html#l00038">secure_api.h:38</a></div></div>
<div class="ttc" id="structotz__secure__encode__cmd_html_a497cda85a2e25f1dee3f5a4fea09e827"><div class="ttname"><a href="structotz__secure__encode__cmd.html#a497cda85a2e25f1dee3f5a4fea09e827">otz_secure_encode_cmd::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8h_source.html#l00037">secure_api.h:37</a></div></div>
<div class="ttc" id="sw__types_8h_html_a0e40f13f8595fceec45f6f8a0c35cf7c"><div class="ttname"><a href="sw__types_8h.html#a0e40f13f8595fceec45f6f8a0c35cf7c">OTZ_ENOMEM</a></div><div class="ttdeci">#define OTZ_ENOMEM</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00045">sw_types.h:45</a></div></div>
<div class="ttc" id="sw__types_8h_html_a73a2d1613cea88f93fbb8830b2fe857a"><div class="ttname"><a href="sw__types_8h.html#a73a2d1613cea88f93fbb8830b2fe857a">OTZ_ILLEGAL_ARGUMENT</a></div><div class="ttdeci">#define OTZ_ILLEGAL_ARGUMENT</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00046">sw_types.h:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aeac54a699cee6c80d67865a35ce71752"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void otz_release_data </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structotz__secure__encode__ctx.html">otz_secure_encode_ctx</a> *&#160;</td>
          <td class="paramname"><em>enc_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structotzc__encode__meta.html">otzc_encode_meta</a> *&#160;</td>
          <td class="paramname"><em>meta_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release the encoded data. </p>
<p>This function releases the resources which got allocated in encoding function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">enc_context</td><td>Encode context </td></tr>
    <tr><td class="paramname">meta_data</td><td>Meta data which got populated in encoding </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="secure__api_8c_source.html#l00761">761</a> of file <a class="el" href="secure__api_8c_source.html">secure_api.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;{</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        <span class="keywordflow">if</span>(enc_context) {</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                <span class="keywordflow">if</span>(enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#a7513d2246199ffe6feb1c29661df9d83">req_addr</a>) {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                        <a class="code" href="sw__buddy_8h.html#a18008f7ca319ae3bbe7c8cc24bbc7d4b">sw_free</a>(enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#a7513d2246199ffe6feb1c29661df9d83">req_addr</a>);</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                        enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#a7513d2246199ffe6feb1c29661df9d83">req_addr</a> = <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                }</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                <span class="keywordflow">if</span>(enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#abcd7fbec6df74d8b939c0a97947717b7">res_addr</a>) {</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                        <a class="code" href="sw__buddy_8h.html#a18008f7ca319ae3bbe7c8cc24bbc7d4b">sw_free</a>(enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#abcd7fbec6df74d8b939c0a97947717b7">res_addr</a>);</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                        enc_context-&gt;<a class="code" href="structotz__secure__encode__ctx.html#abcd7fbec6df74d8b939c0a97947717b7">res_addr</a> = <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                }</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                <a class="code" href="sw__buddy_8h.html#a18008f7ca319ae3bbe7c8cc24bbc7d4b">sw_free</a>(enc_context);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        } </div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        <span class="keywordflow">if</span>(meta_data) {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                <a class="code" href="sw__buddy_8h.html#a18008f7ca319ae3bbe7c8cc24bbc7d4b">sw_free</a>(meta_data);</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        } </div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;}</div>
<div class="ttc" id="structotz__secure__encode__ctx_html_a7513d2246199ffe6feb1c29661df9d83"><div class="ttname"><a href="structotz__secure__encode__ctx.html#a7513d2246199ffe6feb1c29661df9d83">otz_secure_encode_ctx::req_addr</a></div><div class="ttdeci">void * req_addr</div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8h_source.html#l00045">secure_api.h:45</a></div></div>
<div class="ttc" id="sw__types_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00039">sw_types.h:39</a></div></div>
<div class="ttc" id="sw__buddy_8h_html_a18008f7ca319ae3bbe7c8cc24bbc7d4b"><div class="ttname"><a href="sw__buddy_8h.html#a18008f7ca319ae3bbe7c8cc24bbc7d4b">sw_free</a></div><div class="ttdeci">void sw_free(void *pointer)</div><div class="ttdoc">Gets the task_id and frees the heap memory corresponding to the task_id. </div><div class="ttdef"><b>Definition:</b> <a href="sw__buddy_8c_source.html#l00757">sw_buddy.c:757</a></div></div>
<div class="ttc" id="structotz__secure__encode__ctx_html_abcd7fbec6df74d8b939c0a97947717b7"><div class="ttname"><a href="structotz__secure__encode__ctx.html#abcd7fbec6df74d8b939c0a97947717b7">otz_secure_encode_ctx::res_addr</a></div><div class="ttdeci">void * res_addr</div><div class="ttdef"><b>Definition:</b> <a href="secure__api_8h_source.html#l00047">secure_api.h:47</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab005498bb644293762a2f577d0eb7eb3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sa_close_session </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>session_context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close Session. </p>
<p>This function close the session which got established between secure and non-secure application. This function destroys the corresponding service task.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session_context</td><td>Session ID</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>otz_return_t: OTZ_OK - Session closed successfully<br/>
OTZ_* - An implementation-defined error code for any other error.<br/>
</dd></dl>

<p>Definition at line <a class="el" href="secure__api_8c_source.html#l00395">395</a> of file <a class="el" href="secure__api_8c_source.html">secure_api.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;{</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <span class="keywordtype">int</span> ret_val;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        ret_val = <a class="code" href="task_8h.html#a1057a59409acffbd0c626dcebe0f5138">destroy_task</a>(*((<span class="keywordtype">int</span>*)session_context));</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <span class="keywordflow">return</span> ret_val;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;}</div>
<div class="ttc" id="task_8h_html_a1057a59409acffbd0c626dcebe0f5138"><div class="ttname"><a href="task_8h.html#a1057a59409acffbd0c626dcebe0f5138">destroy_task</a></div><div class="ttdeci">int destroy_task(int task_id)</div><div class="ttdoc">Destroy the created task. </div><div class="ttdef"><b>Definition:</b> <a href="task_8c_source.html#l00157">task.c:157</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac4e7d606b3dba5159d3c3a7a9f1d7511"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sa_create_entry_point </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>svc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsa__config__t.html">sa_config_t</a> *&#160;</td>
          <td class="paramname"><em>psa_config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Invokes the init function of the service task. </p>
<p>This function invokes the init function of the corresponding service task</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">svc_id</td><td>Service identifier of the task </td></tr>
    <tr><td class="paramname">psa_config</td><td>Configuration details for the task</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>otz_return_t: OTZ_OK - Session established successfully<br/>
OTZ_* - An implementation-defined error code for any other error.<br/>
</dd></dl>

<p>Definition at line <a class="el" href="secure__api_8c_source.html#l00271">271</a> of file <a class="el" href="secure__api_8c_source.html">secure_api.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;{</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="keywordtype">int</span> ret=<a class="code" href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a>;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="keywordflow">if</span>(svc_id == <a class="code" href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aa2cb1d1aee99cb072f3c2e5928ffbf65c">OTZ_SVC_ECHO</a>) {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                 <span class="keywordflow">if</span>(<a class="code" href="echo__task_8c.html#a12bd3ced8788ed087ece46bb203694bc">echo_task_init</a>(psa_config) != <a class="code" href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a>)</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                         <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        } </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(svc_id == <a class="code" href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aacbc01795f896499464e162fc15d87ced">OTZ_SVC_DRM</a>) {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="drm__task_8c.html#af6cb859271f38b85836a112fadc27842">drm_task_init</a>(psa_config) != <a class="code" href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a>)</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(svc_id == <a class="code" href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aaffa07fe76b99c8529f2a5a3661257800">OTZ_SVC_CRYPT</a>) {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="crypto__task_8c.html#aad840aa12178371254cf54b4040c698c">crypto_task_init</a>(psa_config) != <a class="code" href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a>)</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        }</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(svc_id == <a class="code" href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aadba8cf97767809199e1eaec0bf9e8731">OTZ_SVC_MUTEX_TEST</a>) {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="elf__loader__app_8c.html#a0bb6b7debaa5edc43584f49158d8c277">mutex_test_task_init</a>(psa_config) != <a class="code" href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a>)</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        }</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(svc_id == <a class="code" href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aabeab15394d1dab1b902190515516ea05">OTZ_SVC_GLOBAL</a>) {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="dispatcher__task_8c.html#a24b2cf461d7256034a302b442796fbdc">dispatch_task_init</a>(psa_config);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        }</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="preprocessor">#ifdef CONFIG_GUI_SUPPORT</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="preprocessor"></span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(svc_id == <a class="code" href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aae1473c238d5e1a8f1ec201674d58617a">OTZ_SVC_VIRTUAL_KEYBOARD</a>) {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="virtual__keyboard__task_8h.html#a4debbd6743c8d7f4dde7e54571cc7669">virtual_keyboard_task_init</a>(psa_config) != <a class="code" href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a>)</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                        <span class="keywordflow">return</span> -1;              </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#ifdef CONFIG_SW_ELF_LOADER_SUPPORT</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="preprocessor"></span>        <span class="keywordflow">if</span>(psa_config-&gt;<a class="code" href="structsa__config__t.html#aaf22a3f2509c5b4b1c7eeccc4be71a10">elf_flag</a> == <a class="code" href="elf__loader_8h.html#acfd3dc2389f7fcf6882a4c66cfbf06dc">ELF_FLAG</a>)</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                ret = <a class="code" href="sw__syscall_8h.html#ac0f29297004391a1e1557007fb5f8d7a">__elf_load</a>(psa_config);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="preprocessor">#endif  </span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="preprocessor"></span>        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;}</div>
<div class="ttc" id="dispatcher__task_8c_html_a24b2cf461d7256034a302b442796fbdc"><div class="ttname"><a href="dispatcher__task_8c.html#a24b2cf461d7256034a302b442796fbdc">dispatch_task_init</a></div><div class="ttdeci">int dispatch_task_init(sa_config_t *psa_config)</div><div class="ttdoc">Dispatcher task init. </div><div class="ttdef"><b>Definition:</b> <a href="dispatcher__task_8c_source.html#l00192">dispatcher_task.c:192</a></div></div>
<div class="ttc" id="otz__id_8h_html_afbdebb53d1ef45ed1b498899088b4f7aacbc01795f896499464e162fc15d87ced"><div class="ttname"><a href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aacbc01795f896499464e162fc15d87ced">OTZ_SVC_DRM</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00055">otz_id.h:55</a></div></div>
<div class="ttc" id="sw__semaphores_8h_html_aad472a601abac5aab18d6afddeab7de5"><div class="ttname"><a href="sw__semaphores_8h.html#aad472a601abac5aab18d6afddeab7de5">OTZ_OK</a></div><div class="ttdeci">#define OTZ_OK</div><div class="ttdef"><b>Definition:</b> <a href="sw__semaphores_8h_source.html#l00038">sw_semaphores.h:38</a></div></div>
<div class="ttc" id="drm__task_8c_html_af6cb859271f38b85836a112fadc27842"><div class="ttname"><a href="drm__task_8c.html#af6cb859271f38b85836a112fadc27842">drm_task_init</a></div><div class="ttdeci">int drm_task_init(sa_config_t *psa_config)</div><div class="ttdoc">: DRM task init </div><div class="ttdef"><b>Definition:</b> <a href="drm__task_8c_source.html#l00291">drm_task.c:291</a></div></div>
<div class="ttc" id="elf__loader_8h_html_acfd3dc2389f7fcf6882a4c66cfbf06dc"><div class="ttname"><a href="elf__loader_8h.html#acfd3dc2389f7fcf6882a4c66cfbf06dc">ELF_FLAG</a></div><div class="ttdeci">#define ELF_FLAG</div><div class="ttdef"><b>Definition:</b> <a href="elf__loader_8h_source.html#l00029">elf_loader.h:29</a></div></div>
<div class="ttc" id="crypto__task_8c_html_aad840aa12178371254cf54b4040c698c"><div class="ttname"><a href="crypto__task_8c.html#aad840aa12178371254cf54b4040c698c">crypto_task_init</a></div><div class="ttdeci">int crypto_task_init(sa_config_t *psa_config)</div><div class="ttdoc">: Crypto task init </div><div class="ttdef"><b>Definition:</b> <a href="crypto__task_8c_source.html#l00599">crypto_task.c:599</a></div></div>
<div class="ttc" id="otz__id_8h_html_afbdebb53d1ef45ed1b498899088b4f7aae1473c238d5e1a8f1ec201674d58617a"><div class="ttname"><a href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aae1473c238d5e1a8f1ec201674d58617a">OTZ_SVC_VIRTUAL_KEYBOARD</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00058">otz_id.h:58</a></div></div>
<div class="ttc" id="sw__syscall_8h_html_ac0f29297004391a1e1557007fb5f8d7a"><div class="ttname"><a href="sw__syscall_8h.html#ac0f29297004391a1e1557007fb5f8d7a">__elf_load</a></div><div class="ttdeci">int __elf_load(void *sa_config)</div><div class="ttdoc">system call to usleep </div></div>
<div class="ttc" id="otz__id_8h_html_afbdebb53d1ef45ed1b498899088b4f7aaffa07fe76b99c8529f2a5a3661257800"><div class="ttname"><a href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aaffa07fe76b99c8529f2a5a3661257800">OTZ_SVC_CRYPT</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00056">otz_id.h:56</a></div></div>
<div class="ttc" id="echo__task_8c_html_a12bd3ced8788ed087ece46bb203694bc"><div class="ttname"><a href="echo__task_8c.html#a12bd3ced8788ed087ece46bb203694bc">echo_task_init</a></div><div class="ttdeci">int echo_task_init(sa_config_t *psa_config)</div><div class="ttdoc">: Echo task init </div><div class="ttdef"><b>Definition:</b> <a href="echo__task_8c_source.html#l00705">echo_task.c:705</a></div></div>
<div class="ttc" id="virtual__keyboard__task_8h_html_a4debbd6743c8d7f4dde7e54571cc7669"><div class="ttname"><a href="virtual__keyboard__task_8h.html#a4debbd6743c8d7f4dde7e54571cc7669">virtual_keyboard_task_init</a></div><div class="ttdeci">int virtual_keyboard_task_init(sa_config_t *psa_config)</div><div class="ttdoc">: Mutex test task init </div></div>
<div class="ttc" id="otz__id_8h_html_afbdebb53d1ef45ed1b498899088b4f7aa2cb1d1aee99cb072f3c2e5928ffbf65c"><div class="ttname"><a href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aa2cb1d1aee99cb072f3c2e5928ffbf65c">OTZ_SVC_ECHO</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00054">otz_id.h:54</a></div></div>
<div class="ttc" id="otz__id_8h_html_afbdebb53d1ef45ed1b498899088b4f7aadba8cf97767809199e1eaec0bf9e8731"><div class="ttname"><a href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aadba8cf97767809199e1eaec0bf9e8731">OTZ_SVC_MUTEX_TEST</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00057">otz_id.h:57</a></div></div>
<div class="ttc" id="structsa__config__t_html_aaf22a3f2509c5b4b1c7eeccc4be71a10"><div class="ttname"><a href="structsa__config__t.html#aaf22a3f2509c5b4b1c7eeccc4be71a10">sa_config_t::elf_flag</a></div><div class="ttdeci">u32 elf_flag</div><div class="ttdef"><b>Definition:</b> <a href="task_8h_source.html#l00052">task.h:52</a></div></div>
<div class="ttc" id="otz__id_8h_html_afbdebb53d1ef45ed1b498899088b4f7aabeab15394d1dab1b902190515516ea05"><div class="ttname"><a href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aabeab15394d1dab1b902190515516ea05">OTZ_SVC_GLOBAL</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00053">otz_id.h:53</a></div></div>
<div class="ttc" id="elf__loader__app_8c_html_a0bb6b7debaa5edc43584f49158d8c277"><div class="ttname"><a href="elf__loader__app_8c.html#a0bb6b7debaa5edc43584f49158d8c277">mutex_test_task_init</a></div><div class="ttdeci">int mutex_test_task_init(sa_config_t *psa_config)</div><div class="ttdoc">: Mutex test task init </div><div class="ttdef"><b>Definition:</b> <a href="elf__loader__app_8c_source.html#l00103">elf_loader_app.c:103</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a90a30e0965553d5de2a7fc03b5cd1412"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sa_destroy_entry_point </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>svc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>elf_flag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Invokes the exit function of the service task. </p>
<p>This function invokes the exit function of the corresponding service task</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">svc_id</td><td>: service identifier of the task </td></tr>
    <tr><td class="paramname">data</td><td>: private data which need to be freed </td></tr>
    <tr><td class="paramname">elf_flag</td><td>: to free the mapped secure memory</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>otz_return_t: OTZ_OK - Session closed successfully<br/>
OTZ_* - An implementation-defined error code for any other error.<br/>
</dd></dl>

<p>Definition at line <a class="el" href="secure__api_8c_source.html#l00324">324</a> of file <a class="el" href="secure__api_8c_source.html">secure_api.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;{</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="preprocessor">#if defined (CONFIG_SW_ELF_LOADER_SUPPORT)</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="preprocessor"></span>        <span class="comment">/* unmap the region of secure memory */</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="keywordflow">if</span> (elf_flag == <a class="code" href="elf__loader_8h.html#aa3de69f2cbb1862a37592061fbb666d2">ELF_FLAG_MAP</a>){</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                <a class="code" href="elf__loader_8c.html#ab6814f634bead0f3ecd360e88acd9df8">elf_loader_cleanup</a>();</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <span class="keywordflow">if</span>(svc_id == <a class="code" href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aa2cb1d1aee99cb072f3c2e5928ffbf65c">OTZ_SVC_ECHO</a>) {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="echo__task_8c.html#a256184588424d2a5772b71dac814747b">echo_task_exit</a>(<a class="code" href="fat32_8c.html#a40767ad71451f60885c01f28dd2a4b47">data</a>);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="keywordflow">if</span>(svc_id == <a class="code" href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aacbc01795f896499464e162fc15d87ced">OTZ_SVC_DRM</a>) {</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="drm__task_8c.html#af6d65f1d9674eb40a3fc99da6d56cd2d">drm_task_exit</a>(<a class="code" href="fat32_8c.html#a40767ad71451f60885c01f28dd2a4b47">data</a>);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        }</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="keywordflow">if</span>(svc_id == <a class="code" href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aaffa07fe76b99c8529f2a5a3661257800">OTZ_SVC_CRYPT</a>) {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="crypto__task_8c.html#a08a7a6ced0f333203820b975324b5311">crypto_task_exit</a>(<a class="code" href="fat32_8c.html#a40767ad71451f60885c01f28dd2a4b47">data</a>);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <span class="keywordflow">if</span>(svc_id == <a class="code" href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aadba8cf97767809199e1eaec0bf9e8731">OTZ_SVC_MUTEX_TEST</a>) {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="elf__loader__app_8c.html#a6a26858706ad2f8a2c87435acdf00dad">mutex_test_task_exit</a>(<a class="code" href="fat32_8c.html#a40767ad71451f60885c01f28dd2a4b47">data</a>);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        }</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <span class="keywordflow">if</span>(svc_id == <a class="code" href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aabeab15394d1dab1b902190515516ea05">OTZ_SVC_GLOBAL</a>) {</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="dispatcher__task_8c.html#a5b8539980492a6994b4e99826cfba661">dispatch_task_exit</a>(<a class="code" href="fat32_8c.html#a40767ad71451f60885c01f28dd2a4b47">data</a>);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="preprocessor">#ifdef CONFIG_GUI_SUPPORT</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="preprocessor"></span>        <span class="keywordflow">if</span>(svc_id == <a class="code" href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aae1473c238d5e1a8f1ec201674d58617a">OTZ_SVC_VIRTUAL_KEYBOARD</a>) {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="virtual__keyboard__task_8h.html#a47e85e31c09bbd6ecea9eb36eef2dc74">virtual_keyboard_task_exit</a>(<a class="code" href="fat32_8c.html#a40767ad71451f60885c01f28dd2a4b47">data</a>);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="preprocessor"></span>        <a class="code" href="unused_8h.html#a6bc306171da085f4c7df2c66d2ff8e47">UNUSED</a>(elf_flag);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="sw__types_8h.html#ade5dde89d25481cc2f1ebe77a8d0d85b">OTZ_EFAIL</a>;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;}</div>
<div class="ttc" id="unused_8h_html_a6bc306171da085f4c7df2c66d2ff8e47"><div class="ttname"><a href="unused_8h.html#a6bc306171da085f4c7df2c66d2ff8e47">UNUSED</a></div><div class="ttdeci">#define UNUSED(X)</div><div class="ttdef"><b>Definition:</b> <a href="unused_8h_source.html#l00004">unused.h:4</a></div></div>
<div class="ttc" id="echo__task_8c_html_a256184588424d2a5772b71dac814747b"><div class="ttname"><a href="echo__task_8c.html#a256184588424d2a5772b71dac814747b">echo_task_exit</a></div><div class="ttdeci">int echo_task_exit(void *data)</div><div class="ttdoc">Echo task exit. </div><div class="ttdef"><b>Definition:</b> <a href="echo__task_8c_source.html#l00734">echo_task.c:734</a></div></div>
<div class="ttc" id="drm__task_8c_html_af6d65f1d9674eb40a3fc99da6d56cd2d"><div class="ttname"><a href="drm__task_8c.html#af6d65f1d9674eb40a3fc99da6d56cd2d">drm_task_exit</a></div><div class="ttdeci">int drm_task_exit(void *data)</div><div class="ttdoc">DRM task exit. </div><div class="ttdef"><b>Definition:</b> <a href="drm__task_8c_source.html#l00321">drm_task.c:321</a></div></div>
<div class="ttc" id="otz__id_8h_html_afbdebb53d1ef45ed1b498899088b4f7aacbc01795f896499464e162fc15d87ced"><div class="ttname"><a href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aacbc01795f896499464e162fc15d87ced">OTZ_SVC_DRM</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00055">otz_id.h:55</a></div></div>
<div class="ttc" id="elf__loader__app_8c_html_a6a26858706ad2f8a2c87435acdf00dad"><div class="ttname"><a href="elf__loader__app_8c.html#a6a26858706ad2f8a2c87435acdf00dad">mutex_test_task_exit</a></div><div class="ttdeci">int mutex_test_task_exit(void *data)</div><div class="ttdoc">Mutex test task exit. </div><div class="ttdef"><b>Definition:</b> <a href="elf__loader__app_8c_source.html#l00137">elf_loader_app.c:137</a></div></div>
<div class="ttc" id="sw__types_8h_html_ade5dde89d25481cc2f1ebe77a8d0d85b"><div class="ttname"><a href="sw__types_8h.html#ade5dde89d25481cc2f1ebe77a8d0d85b">OTZ_EFAIL</a></div><div class="ttdeci">#define OTZ_EFAIL</div><div class="ttdef"><b>Definition:</b> <a href="sw__types_8h_source.html#l00044">sw_types.h:44</a></div></div>
<div class="ttc" id="virtual__keyboard__task_8h_html_a47e85e31c09bbd6ecea9eb36eef2dc74"><div class="ttname"><a href="virtual__keyboard__task_8h.html#a47e85e31c09bbd6ecea9eb36eef2dc74">virtual_keyboard_task_exit</a></div><div class="ttdeci">int virtual_keyboard_task_exit(void *data)</div><div class="ttdoc">Mutex test task exit. </div></div>
<div class="ttc" id="otz__id_8h_html_afbdebb53d1ef45ed1b498899088b4f7aae1473c238d5e1a8f1ec201674d58617a"><div class="ttname"><a href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aae1473c238d5e1a8f1ec201674d58617a">OTZ_SVC_VIRTUAL_KEYBOARD</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00058">otz_id.h:58</a></div></div>
<div class="ttc" id="elf__loader_8h_html_aa3de69f2cbb1862a37592061fbb666d2"><div class="ttname"><a href="elf__loader_8h.html#aa3de69f2cbb1862a37592061fbb666d2">ELF_FLAG_MAP</a></div><div class="ttdeci">#define ELF_FLAG_MAP</div><div class="ttdef"><b>Definition:</b> <a href="elf__loader_8h_source.html#l00030">elf_loader.h:30</a></div></div>
<div class="ttc" id="fat32_8c_html_a40767ad71451f60885c01f28dd2a4b47"><div class="ttname"><a href="fat32_8c.html#a40767ad71451f60885c01f28dd2a4b47">data</a></div><div class="ttdeci">u8 * data</div><div class="ttdef"><b>Definition:</b> <a href="fat32_8c_source.html#l00038">fat32.c:38</a></div></div>
<div class="ttc" id="otz__id_8h_html_afbdebb53d1ef45ed1b498899088b4f7aaffa07fe76b99c8529f2a5a3661257800"><div class="ttname"><a href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aaffa07fe76b99c8529f2a5a3661257800">OTZ_SVC_CRYPT</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00056">otz_id.h:56</a></div></div>
<div class="ttc" id="otz__id_8h_html_afbdebb53d1ef45ed1b498899088b4f7aa2cb1d1aee99cb072f3c2e5928ffbf65c"><div class="ttname"><a href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aa2cb1d1aee99cb072f3c2e5928ffbf65c">OTZ_SVC_ECHO</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00054">otz_id.h:54</a></div></div>
<div class="ttc" id="otz__id_8h_html_afbdebb53d1ef45ed1b498899088b4f7aadba8cf97767809199e1eaec0bf9e8731"><div class="ttname"><a href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aadba8cf97767809199e1eaec0bf9e8731">OTZ_SVC_MUTEX_TEST</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00057">otz_id.h:57</a></div></div>
<div class="ttc" id="otz__id_8h_html_afbdebb53d1ef45ed1b498899088b4f7aabeab15394d1dab1b902190515516ea05"><div class="ttname"><a href="otz__id_8h.html#afbdebb53d1ef45ed1b498899088b4f7aabeab15394d1dab1b902190515516ea05">OTZ_SVC_GLOBAL</a></div><div class="ttdef"><b>Definition:</b> <a href="otz__id_8h_source.html#l00053">otz_id.h:53</a></div></div>
<div class="ttc" id="crypto__task_8c_html_a08a7a6ced0f333203820b975324b5311"><div class="ttname"><a href="crypto__task_8c.html#a08a7a6ced0f333203820b975324b5311">crypto_task_exit</a></div><div class="ttdeci">int crypto_task_exit(void *data)</div><div class="ttdoc">Crypto task exit. </div><div class="ttdef"><b>Definition:</b> <a href="crypto__task_8c_source.html#l00629">crypto_task.c:629</a></div></div>
<div class="ttc" id="elf__loader_8c_html_ab6814f634bead0f3ecd360e88acd9df8"><div class="ttname"><a href="elf__loader_8c.html#ab6814f634bead0f3ecd360e88acd9df8">elf_loader_cleanup</a></div><div class="ttdeci">int elf_loader_cleanup(void)</div><div class="ttdoc">clean up function to remove the mappings </div><div class="ttdef"><b>Definition:</b> <a href="elf__loader_8c_source.html#l00082">elf_loader.c:82</a></div></div>
<div class="ttc" id="dispatcher__task_8c_html_a5b8539980492a6994b4e99826cfba661"><div class="ttname"><a href="dispatcher__task_8c.html#a5b8539980492a6994b4e99826cfba661">dispatch_task_exit</a></div><div class="ttdeci">int dispatch_task_exit(void *data)</div><div class="ttdoc">Dispatcher task exit. </div><div class="ttdef"><b>Definition:</b> <a href="dispatcher__task_8c_source.html#l00227">dispatcher_task.c:227</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af39d5aab76117e76cecf6d911cdaefb6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sa_open_session </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsa__config__t.html">sa_config_t</a> *&#160;</td>
          <td class="paramname"><em>psa_config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>session_context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open Session. </p>
<p>This function establish the session between secure and non-secure application. This function creates the task correspond to the service ID.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">psa_config</td><td>Pointer to task init configuration structure. </td></tr>
    <tr><td class="paramname">session_context</td><td>Session ID as output parameter.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>otz_return_t: OTZ_OK - Session established successfully<br/>
OTZ_* - An implementation-defined error code for any other error.<br/>
</dd></dl>

<p>Definition at line <a class="el" href="secure__api_8c_source.html#l00373">373</a> of file <a class="el" href="secure__api_8c_source.html">secure_api.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;{</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="keywordtype">int</span> ret_val;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <span class="comment">/* session context = task id */</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        ret_val = <a class="code" href="task_8h.html#a43eeab0b9c59f88e4cff31a1bad971ec">create_task</a>(psa_config, (<span class="keywordtype">int</span>*)session_context);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keywordflow">return</span> ret_val;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;}</div>
<div class="ttc" id="task_8h_html_a43eeab0b9c59f88e4cff31a1bad971ec"><div class="ttname"><a href="task_8h.html#a43eeab0b9c59f88e4cff31a1bad971ec">create_task</a></div><div class="ttdeci">int create_task(sa_config_t *psa_config, int *task_id)</div><div class="ttdoc">Create a task. </div><div class="ttdef"><b>Definition:</b> <a href="task_8c_source.html#l00049">task.c:49</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9bd892045df93e29b38e8744cb151c6b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int update_response_len </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structotzc__encode__meta.html">otzc_encode_meta</a> *&#160;</td>
          <td class="paramname"><em>meta_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper function to update the response length. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">meta_data</td><td>Meta data helps to identify the encoded data </td></tr>
    <tr><td class="paramname">pos</td><td>Current position </td></tr>
    <tr><td class="paramname">len</td><td>new response length</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>otz_return_t: OTZ_OK - Updated responsed length successfully<br/>
OTZ_* - An implementation-defined error code for any other error.<br/>
</dd></dl>

<p>Definition at line <a class="el" href="secure__api_8c_source.html#l00590">590</a> of file <a class="el" href="secure__api_8c_source.html">secure_api.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;{</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="keywordflow">if</span>(pos &lt;= <a class="code" href="otz__common_8h.html#af68d1342e11ec79eb995c40ad0e1303d">OTZ_MAX_REQ_PARAMS</a> + <a class="code" href="otz__common_8h.html#ae03d01e9604f8191960ab4faff98c12e">OTZ_MAX_RES_PARAMS</a>) {</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                meta_data[pos -1].<a class="code" href="structotzc__encode__meta.html#a2962366827a8abcb92fb657cbd232fb1">ret_len</a> = <a class="code" href="structotzc__encode__meta.html#a9ed5f89cd7e766cfbcc92af753e13a8b">len</a>;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        }</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;}</div>
<div class="ttc" id="structotzc__encode__meta_html_a9ed5f89cd7e766cfbcc92af753e13a8b"><div class="ttname"><a href="structotzc__encode__meta.html#a9ed5f89cd7e766cfbcc92af753e13a8b">otzc_encode_meta::len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00093">otz_common.h:93</a></div></div>
<div class="ttc" id="otz__common_8h_html_af68d1342e11ec79eb995c40ad0e1303d"><div class="ttname"><a href="otz__common_8h.html#af68d1342e11ec79eb995c40ad0e1303d">OTZ_MAX_REQ_PARAMS</a></div><div class="ttdeci">#define OTZ_MAX_REQ_PARAMS</div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00029">otz_common.h:29</a></div></div>
<div class="ttc" id="structotzc__encode__meta_html_a2962366827a8abcb92fb657cbd232fb1"><div class="ttname"><a href="structotzc__encode__meta.html#a2962366827a8abcb92fb657cbd232fb1">otzc_encode_meta::ret_len</a></div><div class="ttdeci">int ret_len</div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00095">otz_common.h:95</a></div></div>
<div class="ttc" id="otz__common_8h_html_ae03d01e9604f8191960ab4faff98c12e"><div class="ttname"><a href="otz__common_8h.html#ae03d01e9604f8191960ab4faff98c12e">OTZ_MAX_RES_PARAMS</a></div><div class="ttdeci">#define OTZ_MAX_RES_PARAMS</div><div class="ttdef"><b>Definition:</b> <a href="otz__common_8h_source.html#l00030">otz_common.h:30</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat May 3 2014 13:35:45 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
